<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>深信服产品的研究</title>
    <link href="/2001013/"/>
    <url>/2001013/</url>
    
    <content type="html"><![CDATA[<blockquote><p>仅供学习使用,仅作为笔记使用</p><p>本教程仅用于个人学习和技术交流，不构成任何商业推荐或投资建议。教程中涉及的工具、软件或服务仅供参考，作者不对其实际效果、安全性或合法性做任何保证。</p><p>请用户根据自身情况审慎判断，并自行承担使用本教程及其中提到的任何工具、软件或服务可能带来的风险（包括但不限于数据丢失、系统损坏、法律纠纷等）。</p><p>本教程文字内容由作者[开心ucu]创作，版权归属作者本人。</p><p>严禁转载，如果转载造成的任何问题，后果请自行承担。如有问题请联系 <code>ucu520@qq.com</code></p><p>sfos-x86_64 -&gt; 防火墙系统</p><p>550C -&gt; Debian12系统，PVE系统</p></blockquote><hr><blockquote><p>添加内容AF</p></blockquote><h1 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h1><h2 id="AF"><a href="#AF" class="headerlink" title="AF"></a>AF</h2><h3 id="8-0-95"><a href="#8-0-95" class="headerlink" title="8.0.95"></a>8.0.95</h3><h5 id="部分anaconda-ks-cfg"><a href="#部分anaconda-ks-cfg" class="headerlink" title="部分anaconda-ks.cfg"></a>部分<code>anaconda-ks.cfg</code></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs cfg">#version=RHEL8<br>ignoredisk --only-use=sda<br># System bootloader configuration<br>bootloader --append=&quot; crashkernel=128M&quot; --location=mbr --boot-drive=sda<br># Clear the Master Boot Record<br>zerombr<br># Partition clearing information<br>clearpart --all --initlabel --drives=sda<br># Use text mode install<br>text<br>repo --name=&quot;BaseOS&quot; --baseurl=file:///run/install/repo/BaseOS<br># Use CDROM installation media<br>cdrom<br># Keyboard layouts<br>keyboard --vckeymap=us --xlayouts=&#x27;us&#x27;<br># System language<br>lang en_US.UTF-8<br><br># Network information<br>network  --bootproto=dhcp --device=eth0 --hostname=sfos-x86_64.localdomain --ipv6=auto --activate<br># Root password<br>rootpw --iscrypted $6$.nc6QO9MTqODpUdY$1RTIfNULCp0VQi0bgQtJKl3c7GNmixpoH8TWcxD/i5ku7SM5b/fFyyRYu/ZbW8xbbSTZmad08f7ZHwxN.1FXm1<br># SELinux configuration<br>selinux --disabled<br># Run the Setup Agent on first boot<br>firstboot --enable<br># Do not configure the X Window System<br>skipx<br># System services<br>services --disabled=&quot;NetworkManager,chronyd&quot;<br># System timezone<br>timezone Asia/Shanghai --isUtc<br># Disk partitioning information<br>part /boot --fstype=&quot;ext4&quot; --ondisk=sda --size=512 --label=boot<br>part pv.99 --fstype=&quot;lvmpv&quot; --ondisk=sda --size=60538<br>volgroup vg1 --pesize=4096 pv.99<br>logvol /var --fstype=&quot;ext4&quot; --grow --size=4 --mkfsoptions=&quot;-O has_journal&quot; --name=share --vgname=vg1<br>logvol /sfos_back/config --fstype=&quot;ext4&quot; --size=3072 --mkfsoptions=&quot;-O has_journal&quot; --name=slave_conf --vgname=vg1<br>logvol / --fstype=&quot;ext4&quot; --size=4096 --mkfsoptions=&quot;-O has_journal&quot; --name=master_root --vgname=vg1<br>logvol /sfos/system --fstype=&quot;ext4&quot; --size=10240 --mkfsoptions=&quot;-O has_journal&quot; --name=master_sfos --vgname=vg1<br>logvol /sfos/config --fstype=&quot;ext4&quot; --size=3072 --mkfsoptions=&quot;-O has_journal&quot; --name=master_conf --vgname=vg1<br>logvol /rfs_back --fstype=&quot;ext4&quot; --size=4096 --mkfsoptions=&quot;-O has_journal&quot; --name=slave_root --vgname=vg1<br>logvol /sfdata/log --fstype=&quot;ext4&quot; --size=17577 --mkfsoptions=&quot;-O has_journal&quot; --name=log --vgname=vg1<br>logvol /sfos_back/system --fstype=&quot;ext4&quot; --size=10240 --mkfsoptions=&quot;-O has_journal&quot; --name=slave_sfos --vgname=vg1<br></code></pre></td></tr></table></figure><p><a href="https://ucu520.lanzoum.com/i9zod3998iha">https://ucu520.lanzoum.com/i9zod3998iha</a></p><h5 id="部分original-ks-cfg"><a href="#部分original-ks-cfg" class="headerlink" title="部分original-ks.cfg"></a>部分<code>original-ks.cfg</code></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">genks config</span><br>zerombr<br>bootloader --location=mbr<br>text<br>repo --name=&quot;BaseOS&quot; --baseurl=&quot;file:///run/install/repo/BaseOS&quot;<br>cdrom<br>keyboard --vckeymap=us --xlayouts=&#x27;us&#x27;<br>lang en_US.UTF-8<br>network --bootproto=dhcp --device=eth0 --ipv6=auto --hostname=sfos-x86_64.locald<br>omain --activate<br>rootpw --iscrypted $6$.nc6QO9MTqODpUdY$1RTIfNULCp0VQi0bgQtJKl3c7GNmixpoH8TWcxD/i<br>5ku7SM5b/fFyyRYu/ZbW8xbbSTZmad08f7ZHwxN.1FXm1<br>firstboot --enable<br>skipx<br>services --disable=&quot;chronyd&quot;<br>services --disable=&quot;firewalld&quot;<br>services --disable=&quot;polkit&quot;<br>services --disable=&quot;pmcd&quot;<br>services --disable=&quot;pmlogger&quot;<br>services --disable=&quot;abrtd&quot;<br>services --disable=&quot;pmie&quot;<br>services --disable=&quot;dnsmasq&quot;<br>services --disable=&quot;dhcpd&quot;<br>services --disable=&quot;NetworkManager&quot;<br>timezone Asia/Shanghai --isUtc<br>selinux --disabled<br><span class="hljs-meta prompt_">%</span><span class="language-bash">include /tmp/part_option</span><br><span class="hljs-meta prompt_">%</span><span class="language-bash">include /tmp/kdump_option</span><br><span class="hljs-meta prompt_">%</span><span class="language-bash">packages --excludedocs</span><br>@^core<br>-chrony<br>PackageKit<br></code></pre></td></tr></table></figure><p><a href="https://ucu520.lanzoum.com/i6Kyj399a3rc">https://ucu520.lanzoum.com/i6Kyj399a3rc</a></p><h5 id="ls-sfdata-log-anaconda"><a href="#ls-sfdata-log-anaconda" class="headerlink" title="ls &#x2F;sfdata&#x2F;log&#x2F;anaconda"></a>ls &#x2F;sfdata&#x2F;log&#x2F;anaconda</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell">[sangfor@sfos-x86_64 anaconda]# ls -lha<br>total 124K<br>drwxr-xr-x.  2 sangfor sangfor 4.0K Aug 29  2024 .<br>drwxrwxrwx. 74 nobody  nobody  4.0K Oct 29 13:54 ..<br>-rw-r--r--.  1 sangfor sangfor  401 Aug 29  2024 backup.log<br>-rw-r--r--.  1 sangfor sangfor   30 Aug 29  2024 create_slink_nochroot.log<br>-rw-r--r--.  1 sangfor sangfor  117 Aug 29  2024 deal_packages.log<br>-rw-r--r--.  1 sangfor sangfor    0 Aug 29  2024 debug_tools.log<br>-rw-r--r--.  1 sangfor sangfor  268 Aug 29  2024 install_chuyun_kernel_chroot.log<br>-rw-r--r--.  1 sangfor sangfor  439 Aug 29  2024 install_chuyun_kernel.log<br>-rw-r--r--.  1 sangfor sangfor  75K Aug 29  2024 install_package_chroot.log<br>-rw-r--r--.  1 sangfor sangfor    0 Aug 29  2024 install_package_nochroot.log<br>-rw-r--r--.  1 sangfor sangfor 7.6K Aug 29  2024 install_pip_chroot.log<br>-rw-r--r--.  1 sangfor sangfor 4.7K Aug 29  2024 install_pip_nochroot.log<br>-rw-r--r--.  1 sangfor sangfor    0 Aug 29  2024 partition_option.log<br>-rw-r--r--.  1 sangfor sangfor    0 Aug 29  2024 rpm_db.log<br>-rw-r--r--.  1 sangfor sangfor   57 Aug 29  2024 start_option.log<br>[sangfor@sfos-x86_64 anaconda]# pwd<br>/sfdata/log/anaconda<br>[sangfor@sfos-x86_64 anaconda]# <br></code></pre></td></tr></table></figure><h5 id="pam-d-sshd-login"><a href="#pam-d-sshd-login" class="headerlink" title="pam.d-sshd-login"></a>pam.d-sshd-login</h5><p>注释如下能够实现使用非admin账号登录<br><code>auth    requisite     /sfos/system/app/af/lib/pam_sfos_login.so</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs shell">[sangfor@sfos-x86_64 ~]# cd /etc/pam.d/<br>[sangfor@sfos-x86_64 pam.d]# ll<br>total 76<br>-rw-r--r--. 1 sangfor sangfor 232 Jun 19  2020 config-util<br>-rw-r--r--. 1 sangfor sangfor 701 Jun 19  2020 fingerprint-auth<br>-rw-r--r--. 1 sangfor sangfor 780 Oct 29 00:34 login<br>-rw-r--r--. 1 sangfor sangfor 154 Jun 19  2020 other<br>-rw-r--r--. 1 sangfor sangfor 168 Apr  9  2020 passwd<br>-rw-r--r--. 1 sangfor sangfor 760 Aug 29  2024 password-auth<br>-rw-r--r--. 1 sangfor sangfor 398 Jun 19  2020 postlogin<br>-rw-r--r--. 1 sangfor sangfor 640 Jul 29  2020 remote<br>-rw-r--r--. 1 sangfor sangfor 143 Jul 29  2020 runuser<br>-rw-r--r--. 1 sangfor sangfor 138 Jul 22  2020 runuser-l<br>-rw-r--r--. 1 sangfor sangfor 743 Jun 19  2020 smartcard-auth<br>-rw-r--r--  1 sangfor sangfor 898 Oct 29 12:52 sshd<br>-rw-r--r--. 1 sangfor sangfor 566 Jul 29  2020 su<br>-rw-r--r--. 1 sangfor sangfor 154 May 09  2020 sudo<br>-rw-r--r--. 1 sangfor sangfor 178 May 19  2020 sudo-i<br>-rw-r--r--. 1 sangfor sangfor 137 Jul 29  2020 su-l<br>-rw-r--r--. 1 sangfor sangfor 760 Jun 19  2020 system-auth<br>-rw-r--r--. 1 sangfor sangfor 248 Dec 19  2020 systemd-user<br>-rw-r--r--. 1 sangfor sangfor  84 Jul 29  2020 vlock<br>[sangfor@sfos-x86_64 pam.d]# more login <br><span class="hljs-meta prompt_">#</span><span class="language-bash">%PAM-1.0</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">auth    requisite     /sfos/system/app/af/lib/pam_sfos_login.so</span><br>auth       substack     system-auth<br>auth       include      postlogin<br>account    required     pam_nologin.so<br>account    include      system-auth<br>password   include      system-auth<br><span class="hljs-meta prompt_"># </span><span class="language-bash">pam_selinux.so close should be the first session rule</span><br>session    required     pam_selinux.so close<br>session    required     pam_loginuid.so<br>session    optional     pam_console.so<br><span class="hljs-meta prompt_"># </span><span class="language-bash">pam_selinux.so open should only be followed by sessions to be executed <span class="hljs-keyword">in</span> the user context</span><br>session    required     pam_selinux.so open<br>session    required     pam_namespace.so<br>session    optional     pam_keyinit.so force revoke<br>session    include      system-auth<br>session    include      postlogin<br>-session   optional     pam_ck_connector.so<br>[sangfor@sfos-x86_64 pam.d]# cat sshd <br><span class="hljs-meta prompt_">#</span><span class="language-bash">%PAM-1.0</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">auth       [success=<span class="hljs-keyword">done</span> ignore=ignore default=die] /sfos/system/app/af/lib/pam_sfos.so</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">session    [success=ok default=ignore] /sfos/system/app/af/lib/pam_sfos.so close</span><br>auth       substack     password-auth<br>auth       include      postlogin<br>account    required     pam_sepermit.so<br>account    required     pam_nologin.so<br>account    include      password-auth<br>password   include      password-auth<br><span class="hljs-meta prompt_"># </span><span class="language-bash">pam_selinux.so close should be the first session rule</span><br>session    required     pam_selinux.so close<br>session    required     pam_loginuid.so<br><span class="hljs-meta prompt_"># </span><span class="language-bash">pam_selinux.so open should only be followed by sessions to be executed <span class="hljs-keyword">in</span> the user context</span><br>session    required     pam_selinux.so open env_params<br>session    required     pam_namespace.so<br>session    optional     pam_keyinit.so force revoke<br>session    optional     pam_motd.so<br>session    include      password-auth<br>session    include      postlogin<br>[sangfor@sfos-x86_64 pam.d]# <br><br></code></pre></td></tr></table></figure><h5 id="pam-sfos-so"><a href="#pam-sfos-so" class="headerlink" title="pam_sfos.so"></a>pam_sfos.so</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs ida">.rodata:0000000000000C70 ; const char format[]<br>.rodata:0000000000000C70 format          db &#x27;exec moashell error[%s]&#x27;,0Ah,0<br>.rodata:0000000000000C70                                         ; DATA XREF: exec_cmd(char const*)+58↑o<br>.rodata:0000000000000C89 ; const char aLoginFailedSta[]<br>.rodata:0000000000000C89 aLoginFailedSta db &#x27;login failed status[%d]&#x27;,0Ah,0<br>.rodata:0000000000000C89                                         ; DATA XREF: exec_cmd(char const*)+99↑o<br>.rodata:0000000000000CA2 ; const char s2[]<br>.rodata:0000000000000CA2 s2              db &#x27;admin&#x27;,0            ; DATA XREF: user_is_admin(char const*)+1F↑o<br>.rodata:0000000000000CA8 ; const char aSfosSystemBinL[]<br>.rodata:0000000000000CA8 aSfosSystemBinL db &#x27;/sfos/system/bin/loginshell&#x27;,0<br>.rodata:0000000000000CA8                                         ; DATA XREF: pam_ismoashell(pam_handle *,char const*)+59↑o<br>.rodata:0000000000000CC4 ; const char aSfosSystemBinS[]<br>.rodata:0000000000000CC4 aSfosSystemBinS db &#x27;/sfos/system/bin/sfcli&#x27;,0<br>.rodata:0000000000000CC4                                         ; DATA XREF: pam_iscli(pam_handle *,char const*)+59↑o<br>.rodata:0000000000000CDB                 align 20h<br>.rodata:0000000000000CE0 ; const char aSfosSystemBinS_0[]<br>.rodata:0000000000000CE0 aSfosSystemBinS_0 db &#x27;/sfos/system/bin/sfusermod admin -s /sfos/system/bin/sfcli&#x27;,0<br>.rodata:0000000000000CE0                                         ; DATA XREF: perform_check(pam_handle *)+6E↑o<br>.rodata:0000000000000D1B                 align 20h<br>.rodata:0000000000000D20 ; const char aSfosSystemBinL_0[]<br>.rodata:0000000000000D20 aSfosSystemBinL_0 db &#x27;/sfos/system/bin/loginshell -n noshell&#x27;,0<br>.rodata:0000000000000D20                                         ; DATA XREF: perform_check(pam_handle *):loc_B57↑o<br>.rodata:0000000000000D20 _rodata         ends<br></code></pre></td></tr></table></figure><h5 id="sfos-system-bin-loginshell-n-noshell"><a href="#sfos-system-bin-loginshell-n-noshell" class="headerlink" title="&#x2F;sfos&#x2F;system&#x2F;bin&#x2F;loginshell -n noshell"></a>&#x2F;sfos&#x2F;system&#x2F;bin&#x2F;loginshell -n noshell</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs shell">[sangfor@sfos-x86_64 log]# /sfos/system/bin/loginshell --help<br>Usage: loginshell [OPTION]... [STRING]<br>Encode input data in a QR Code and save.<br><br>  -h, --help   display this message.<br>  -M           encode in general QR Code. (default)<br>  -X           encode in X-Token QR Code.<br>  -n noshell:  login noshell.<br>  -l &#123;LMQH&#125;    specify error correction level from L (lowest) to H (highest).<br>               (default=L)<br>  -v NUMBER    specify the minimum version of the symbol. (default=auto)<br>  -m NUMBER    specify the width of the margins. (default=2)<br>  -t &#123;ANSI,ANSI256,ASCII,ASCIIi,UTF8,UTF8i,ANSIUTF8,ANSIUTF8i,ANSI256UTF8&#125;<br>  -k, --kanji  assume that the input text contains kanji (shift-jis).<br>  -c           encode lower-case alphabet characters in 8-bit mode. (default)<br>  -i           ignore case distinctions and use only upper-case characters.<br>  -8           encode entire data in 8-bit mode. -c and -i will be ignored.<br>  --verbose    display verbose information to stderr.<br>[sangfor@sfos-x86_64 log]# /sfos/system/bin/loginshell -n<br>/sfos/system/bin/loginshell: option requires an argument -- &#x27;n&#x27;<br>Try &quot;--help&quot; for more information.<br>[sangfor@sfos-x86_64 log]# /sfos/system/bin/loginshell -n noshell<br>(QR code display incorrectly? try &quot;loginshell -t ANSI&quot;)<br>X-Token: xxxxxxxxxxxxxx<br>Input password: ^C<br>[sangfor@sfos-x86_64 log]# <br></code></pre></td></tr></table></figure><h5 id="loginshell-ida"><a href="#loginshell-ida" class="headerlink" title="loginshell -ida"></a>loginshell -ida</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><code class="hljs ida">.rodata:00000000004CCC48 lpdso_handle    dq 0                    ; DATA XREF: sub_4CCC10+4↑r<br>.rodata:00000000004CCC50 aEccCryptoC     db &#x27;ecc_crypto.c&#x27;,0     ; DATA XREF: sub_40358F+233↑o<br>.rodata:00000000004CCC50                                         ; sub_40358F+73F↑o ...<br>.rodata:00000000004CCC5D                 align 20h<br>.rodata:00000000004CCC60 aBeginPublicKey db &#x27;-----BEGIN PUBLIC KEY-----&#x27;,0Ah<br>.rodata:00000000004CCC60                                         ; DATA XREF: .data:off_736488↓o<br>.rodata:00000000004CCC7B                 db &#x27;xxxxxxxx+eo2n+uPLP+xxxxxx&#x27;,0Ah<br>.rodata:00000000004CCCBC                 db &#x27;xxxxxx==&#x27;,0Ah<br>.rodata:00000000004CCCC5                 db &#x27;-----END PUBLIC KEY-----&#x27;,0Ah,0<br>.rodata:00000000004CCCDF aAcsupportSangf db &#x27;acsupport.sangfor.net&#x27;,0<br>.rodata:00000000004CCCDF                                         ; DATA XREF: .data:off_736498↓o<br>.rodata:00000000004CCCF5                 align 8<br>.rodata:00000000004CCCF8 aHttpsOpenWeixi db &#x27;https://open.weixin.qq.com/connect/oauth2/authorize&#x27;,0<br>.rodata:00000000004CCCF8                                         ; DATA XREF: .data:off_7364A0↓o<br>.rodata:00000000004CCD2C aWw47ef82ca5b89 db &#x27;wwxxxxxxxxx&#x27;,0<br>.rodata:00000000004CCD2C                                         ; DATA XREF: .data:off_7364A8↓o<br>.rodata:00000000004CCD3F a1000267        db &#x27;1000267&#x27;,0          ; DATA XREF: .data:off_7364B0↓o<br>.rodata:00000000004CCD47 ; const char file[]<br>.rodata:00000000004CCD47 file            db &#x27;/dev/urandom&#x27;,0     ; DATA XREF: sub_4046E9+14↑o<br>.rodata:00000000004CCD54 ; const char format[]<br>.rodata:00000000004CCD54 format          db &#x27;%08x&#x27;,0             ; DATA XREF: sub_40477A+2C↑o<br>.rodata:00000000004CCD59                 align 20h<br>.rodata:00000000004CCD60 a0123456789abcd_6 db &#x27;0123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ-~.()&#x27;,0<br>.rodata:00000000004CCD60                                         ; DATA XREF: sub_4047BE+16↑o<br>.rodata:00000000004CCDA1 ; const char aMainC[]<br>.rodata:00000000004CCDA1 aMainC          db &#x27;main.c&#x27;,0           ; DATA XREF: sub_4047BE+32↑o<br>.rodata:00000000004CCDA1                                         ; sub_4048E9+35↑o ...<br>.rodata:00000000004CCDA8 ; const char assertion[]<br>.rodata:00000000004CCDA8 assertion       db &#x27;(len &amp; 1) == 0&#x27;,0   ; DATA XREF: sub_4047BE+37↑o<br>.rodata:00000000004CCDB7 ; const char aCCC[]<br>.rodata:00000000004CCDB7 aCCC            db &#x27;%c%c%c&#x27;,0           ; DATA XREF: sub_4047BE+FD↑o<br>.rodata:00000000004CCDBE a0123456789abcd_7 db &#x27;0123456789abcdef&#x27;,0<br>.rodata:00000000004CCDBE                                         ; DATA XREF: sub_4048E9+16↑o<br>.rodata:00000000004CCDCF ; const char aOutlenVlen21[]<br>.rodata:00000000004CCDCF aOutlenVlen21   db &#x27;outlen &gt;= vlen * 2 + 1&#x27;,0<br>.rodata:00000000004CCDCF                                         ; DATA XREF: sub_4048E9+3A↑o<br>.rodata:00000000004CCDE6 ; const char modes[]<br>.rodata:00000000004CCDE6 modes           db &#x27;r&#x27;,0                ; DATA XREF: sub_4049C6+18↑o<br>.rodata:00000000004CCDE8 ; const char command[]<br>.rodata:00000000004CCDE8 command         db &#x27;getDeviceId 2&gt;/dev/null&#x27;,0<br>.rodata:00000000004CCDE8                                         ; DATA XREF: sub_4049C6+1D↑o<br>.rodata:00000000004CCE00 ; const char s[]<br>.rodata:00000000004CCE00 s               db &#x27;Timeout&#x27;,0          ; DATA XREF: handler+B↑o<br>.rodata:00000000004CCE08 ; const char needle[]<br>.rodata:00000000004CCE08 needle          db &#x27;http&#x27;,0             ; DATA XREF: sub_404AC1+8D↑o<br>.rodata:00000000004CCE0D ; const char name[]<br>.rodata:00000000004CCE0D name            db &#x27;WECOM_DOMAIN&#x27;,0     ; DATA XREF: sub_404AC1+CD↑o<br>.rodata:00000000004CCE1A                 align 20h<br>.rodata:00000000004CCE20 ; const char aDomainNameSLen[]<br>.rodata:00000000004CCE20 aDomainNameSLen db &#x27;domain name[%s] length too long.&#x27;,0Ah,0<br>.rodata:00000000004CCE20                                         ; DATA XREF: sub_404AC1+10C↑o<br>.rodata:00000000004CCE20                                         ; sub_404AC1+2AB↑o<br>.rodata:00000000004CCE42 ; const char aSCgiBinWCgiS[]<br>.rodata:00000000004CCE42 aSCgiBinWCgiS   db &#x27;%s/cgi-bin/w.cgi?%s&#x27;,0<br>.rodata:00000000004CCE42                                         ; DATA XREF: sub_404AC1+15D↑o<br>.rodata:00000000004CCE56 ; const char aHttpsSCgiBinWC[]<br>.rodata:00000000004CCE56 aHttpsSCgiBinWC db &#x27;https://%s/cgi-bin/w.cgi?%s&#x27;,0<br>.rodata:00000000004CCE56                                         ; DATA XREF: sub_404AC1+18E↑o<br>.rodata:00000000004CCE72 aUriEncodeFaile db &#x27;uri encode failed!&#x27;,0Ah,0<br>.rodata:00000000004CCE72                                         ; DATA XREF: sub_404AC1+1F2↑o<br>.rodata:00000000004CCE86                 align 8<br>.rodata:00000000004CCE88 ; const char aSAppidSRedirec[]<br>.rodata:00000000004CCE88 aSAppidSRedirec db &#x27;%s?appid=%s&amp;redirect_uri=%s&amp;response_type=code&amp;scope=snsapi_base&amp;&#x27;<br>.rodata:00000000004CCE88                                         ; DATA XREF: sub_404AC1+237↑o<br>.rodata:00000000004CCEC9                 db &#x27;agentid=%s#wechat_redirect&#x27;,0<br>.rodata:00000000004CCEE4 ; const char aMoaDomain[]<br>.rodata:00000000004CCEE4 aMoaDomain      db &#x27;MOA_DOMAIN&#x27;,0       ; DATA XREF: sub_404AC1+26C↑o<br>.rodata:00000000004CCEEF ; const char aSCgiBinQCgiS[]<br>.rodata:00000000004CCEEF aSCgiBinQCgiS   db &#x27;%s/cgi-bin/q.cgi?%s&#x27;,0<br>.rodata:00000000004CCEEF                                         ; DATA XREF: sub_404AC1+2E5↑o<br>.rodata:00000000004CCF03 ; const char aHttpsSCgiBinQC[]<br>.rodata:00000000004CCF03 aHttpsSCgiBinQC db &#x27;https://%s/cgi-bin/q.cgi?%s&#x27;,0<br>.rodata:00000000004CCF03                                         ; DATA XREF: sub_404AC1+316↑o<br>.rodata:00000000004CCF1F ; const char aXTokenS[]<br>.rodata:00000000004CCF1F aXTokenS        db &#x27;X-Token: %s&#x27;,0Ah,0  ; DATA XREF: sub_404AC1+358↑o<br>.rodata:00000000004CCF2C ; const char aSS_5[]<br>.rodata:00000000004CCF2C aSS_5           db &#x27;%s,%s&#x27;,0            ; DATA XREF: main+110↑o<br>.rodata:00000000004CCF32 ; const char aS_2[]<br>.rodata:00000000004CCF32 aS_2            db &#x27;%s&#x27;,0               ; DATA XREF: main+137↑o<br>.rodata:00000000004CCF35 ; const char aEnclen0Enclen2[]<br>.rodata:00000000004CCF35 aEnclen0Enclen2 db &#x27;enclen &gt; 0 &amp;&amp; enclen &lt; 256&#x27;,0<br>.rodata:00000000004CCF35                                         ; DATA XREF: main+1AB↑o<br>.rodata:00000000004CCF50 ; const char aInputPassword[]<br>.rodata:00000000004CCF50 aInputPassword  db &#x27;Input password: &#x27;,0 ; DATA XREF: main:loc_40504D↑o<br>.rodata:00000000004CCF61 aNoshell        db &#x27;noshell&#x27;,0          ; DATA XREF: main+2E0↑o<br>.rodata:00000000004CCF61                                         ; main+39B↑o<br>.rodata:00000000004CCF69 ; const char aLoginSuccessfu[]<br>.rodata:00000000004CCF69 aLoginSuccessfu db &#x27;Login successful with noshell&#x27;,0<br>.rodata:00000000004CCF69                                         ; DATA XREF: main+2F1↑o<br>.rodata:00000000004CCF87 ; const char aShellLoginSucc[]<br>.rodata:00000000004CCF87 aShellLoginSucc db &#x27;Shell login successful!&#x27;,0<br>.rodata:00000000004CCF87                                         ; DATA XREF: main:loc_405130↑o<br>.rodata:00000000004CCF9F ; const char aBinSh[]<br>.rodata:00000000004CCF9F aBinSh          db &#x27;/bin/sh&#x27;,0          ; DATA XREF: main+30F↑o<br>.rodata:00000000004CCF9F                                         ; main+34F↑o<br>.rodata:00000000004CCFA7 aC              db &#x27;-c&#x27;,0               ; DATA XREF: main+31A↑o<br>.rodata:00000000004CCFAA aBinBashLogin   db &#x27;/bin/bash --login&#x27;,0<br>.rodata:00000000004CCFAA                                         ; DATA XREF: main+325↑o<br>.rodata:00000000004CCFBC ; const char aPasswordIncorr[]<br>.rodata:00000000004CCFBC aPasswordIncorr db &#x27;Password incorrect&#x27;,0<br>.rodata:00000000004CCFBC                                         ; DATA XREF: main:loc_40518E↑o<br>.rodata:00000000004CCFCF                 align 10h<br>.rodata:00000000004CCFD0 ; const char function[]<br>.rodata:00000000004CCFD0 function        db &#x27;xencode&#x27;,0          ; DATA XREF: sub_4047BE+28↑o<br>.rodata:00000000004CCFD8 ; const char aTohex[]<br>.rodata:00000000004CCFD8 aTohex          db &#x27;tohex&#x27;,0            ; DATA XREF: sub_4048E9+2B↑o<br>.rodata:00000000004CCFDE ; const char aMain[]<br>.rodata:00000000004CCFDE aMain           db &#x27;main&#x27;,0             ; DATA XREF: main:loc_404FC7↑o<br>.rodata:00000000004CCFE3                 align 20h<br>.rodata:00000000004CD000 aHelp           db &#x27;help&#x27;,0             ; DATA XREF: .rodata:longopts↓o<br>.rodata:00000000004CD005 aOutput         db &#x27;output&#x27;,0           ; DATA XREF: .rodata:00000000004CD0E0↓o<br>.rodata:00000000004CD00C aReadFrom       db &#x27;read-from&#x27;,0<br>.rodata:00000000004CD016 aLevel          db &#x27;level&#x27;,0<br>.rodata:00000000004CD01C aNoshell_0      db &#x27;noshell&#x27;,0<br>.rodata:00000000004CD024 aSymversion     db &#x27;symversion&#x27;,0<br>.rodata:00000000004CD02F aMargin         db &#x27;margin&#x27;,0<br>.rodata:00000000004CD036 aType_1         db &#x27;type&#x27;,0<br>.rodata:00000000004CD03B aDomain         db &#x27;domain&#x27;,0<br>.rodata:00000000004CD042 aKanji          db &#x27;kanji&#x27;,0<br>.rodata:00000000004CD048 aCasesensitive  db &#x27;casesensitive&#x27;,0<br>.rodata:00000000004CD056 aIgnorecase     db &#x27;ignorecase&#x27;,0<br>.rodata:00000000004CD061 a8bit           db &#x27;8bit&#x27;,0<br>.rodata:00000000004CD066 aMoa            db &#x27;MOA&#x27;,0<br>.rodata:00000000004CD06A aWecom          db &#x27;WECOM&#x27;,0<br>.rodata:00000000004CD070 aXtoken         db &#x27;XTOKEN&#x27;,0<br>.rodata:00000000004CD077 aRle            db &#x27;rle&#x27;,0<br>.rodata:00000000004CD07B aSvgPath        db &#x27;svg-path&#x27;,0<br>.rodata:00000000004CD084 aInline         db &#x27;inline&#x27;,0<br>.rodata:00000000004CD08B aStrictVersion  db &#x27;strict-version&#x27;,0<br>.rodata:00000000004CD09A aForeground     db &#x27;foreground&#x27;,0<br>.rodata:00000000004CD0A5 aBackground     db &#x27;background&#x27;,0<br>.rodata:00000000004CD0B0 aVerbose        db &#x27;verbose&#x27;,0<br>.rodata:00000000004CD0B8                 align 20h<br>.rodata:00000000004CD0C0 ; const struct option longopts<br>.rodata:00000000004CD0C0 longopts        option &lt;offset aHelp, 0, 0, 68h&gt;<br>.rodata:00000000004CD0C0                                         ; DATA XREF: sub_40753A+492↑o<br>.rodata:00000000004CD0C0                                         ; &quot;help&quot;<br>.rodata:00000000004CD0E0                 dq offset aOutput       ; &quot;output&quot;<br></code></pre></td></tr></table></figure><h5 id="loginshell-到其他Linux运行"><a href="#loginshell-到其他Linux运行" class="headerlink" title="loginshell 到其他Linux运行"></a>loginshell 到其他Linux运行</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs shell">root@550C:~# chmod +x loginshell <br>root@550C:~# ./loginshell <br>./loginshell: error while loading shared libraries: libqrencode.so.5: cannot open shared object file: No such file or directory<br>root@550C:~# ./loginshell <br>./loginshell: error while loading shared libraries: libqrencode.so.5: cannot open shared object file: No such file or directory<br><br>root@550C:~# cp libqrencode.so.5 /usr/lib<br>lib/     lib64/   libexec/ <br>root@550C:~# cp libqrencode.so.5 /usr/lib/<br>root@550C:~# ldconfig<br>root@550C:~# ./loginshell <br>(QR code display incorrectly? try &quot;loginshell -t ANSI&quot;)<br><br>X-Token: xxxxxx<br>Input password: aaaa<br>Password incorrect<br>Input password: ^C<br></code></pre></td></tr></table></figure><h5 id="ldd-loginshell"><a href="#ldd-loginshell" class="headerlink" title="ldd loginshell"></a>ldd loginshell</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">[sangfor@sfos-x86_64 bin]# ldd loginshell <br>linux-vdso.so.1 (0x00007ffc12fad000)<br>libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007f3b23229000)<br>libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f3b23025000)<br>libqrencode.so.5 =&gt; /lib64/libqrencode.so.5 (0x00007f3b22e1a000)<br>libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f3b22a57000)<br>/lib64/ld-linux-x86-64.so.2 (0x00007f3b23449000)<br>[sangfor@sfos-x86_64 bin]# <br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">root@550C:~# ldd loginshell <br>linux-vdso.so.1 (0x00007fff7ab8c000)<br>libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x000071bda5543000)<br>libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x000071bda553e000)<br>libqrencode.so.5 =&gt; /lib/libqrencode.so.5 (0x000071bda5200000)<br>libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x000071bda501f000)<br>/lib64/ld-linux-x86-64.so.2 (0x000071bda5553000)<br>root@550C:~# <br></code></pre></td></tr></table></figure><h5 id="file-loginshell"><a href="#file-loginshell" class="headerlink" title="file loginshell"></a>file loginshell</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[sangfor@sfos-x86_64 bin]# file loginshell <br>loginshell: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 3.2.0, BuildID[sha1]=d2ce3208d845aec8c93f8dff53cfca76c9c86afd, stripped<br>[sangfor@sfos-x86_64 bin]# <br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>技术/软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>记录</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>TrueNAS-25.04.2.1允许密码登录ssh</title>
    <link href="/2001012/"/>
    <url>/2001012/</url>
    
    <content type="html"><![CDATA[<p>解决</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">ssh xxx@192.168.50.247<br>xxx@192.168.50.247: Permission denied (publickey).<br></code></pre></td></tr></table></figure><hr><h1 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h1><p>登录web控制台，<br>用户凭证-&gt;用户</p><p>新增用户<br>勾选”允许使用所有sudo命令，命令行bash，用户组root，附属组”root”,”sudo”,”builtion_administrators”</p><blockquote><p><img src="/../../img/2024/10/06/2001012-TrueNas-uerAdd.png" alt="2001012-TrueNas-uerAdd.png"></p></blockquote><h1 id="修改sshd文件"><a href="#修改sshd文件" class="headerlink" title="修改sshd文件"></a>修改sshd文件</h1><p>“系统”-&gt;”命令行”</p><p>如果当前用户权限不是root，使用<code>sudo -i</code>切换到root权限</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">root@truenas[~]# </span><span class="language-bash">vim /etc/ssh/ssh_config</span><br></code></pre></td></tr></table></figure><p>修改</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">PasswordAuthentication no<br></code></pre></td></tr></table></figure><p>将no修改为yes后保存，并执行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl restart ssh<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>技术/软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>TrueNas</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>云南移动机顶盒专网测试</title>
    <link href="/2001011/"/>
    <url>/2001011/</url>
    
    <content type="html"><![CDATA[<blockquote><p>仅供学习使用</p><p>本教程仅用于个人学习和技术交流，不构成任何商业推荐或投资建议。教程中涉及的工具、软件或服务仅供参考，作者不对其实际效果、安全性或合法性做任何保证。</p><p>请用户根据自身情况审慎判断，并自行承担使用本教程及其中提到的任何工具、软件或服务可能带来的风险（包括但不限于数据丢失、系统损坏、法律纠纷等）。</p><p>本教程文字内容由作者[开心ucu]创作，版权归属作者本人。</p><p>严禁转载，如果转载造成的任何问题，后果请自行承担</p><p>机顶盒为云南移动,网络也是云南移动</p><p>测试的网络拓扑</p><blockquote><p>iperf3服务端  —&gt;   iKuai    —&gt; iKuai2     —–&gt; iperf3客户端<br>iKuai做了DMZ<br>测试的服务都跑在pve服务器上，pve服务器的网卡连到了光猫，千兆口</p></blockquote></blockquote><h1 id="抓包"><a href="#抓包" class="headerlink" title="抓包"></a>抓包</h1><p>参考自 </p><blockquote><p><a href="https://www.right.com.cn/forum/thread-7722652-1-1.html">https://www.right.com.cn/forum/thread-7722652-1-1.html</a></p><blockquote><p>电脑打开Wireshark软件，选择以太网进行抓包，打开电信盒子，开始抓包，等盒子进入到主界面后停止抓包即可<br>在搜索框输入dhcp进行筛选，选择DHCP Request进行下一步分析</p></blockquote><blockquote><p>进入到分组界面后，展开最后一项Dynamic Host Configuration Protocol (Request)即可看到option12和option60</p></blockquote><blockquote><p>option12,也就是盒子后面标签上的STBID值</p></blockquote><blockquote><p>option60那一行，展开后，在Vendor class identifier这行上，鼠标右键选择复制—-as a Hex Stream就可以复制出option60的信息了，这个就是加密后的itv的账号和密码，我们只需在openwrt里原样发送就可以了</p></blockquote><p>提供一个建议&#x2F;方法。电脑网线插机顶盒，电脑连接wifi，将wifi桥接给有线。抓有线网卡的数据包分析</p></blockquote><h1 id="使用iKuai连接"><a href="#使用iKuai连接" class="headerlink" title="使用iKuai连接"></a>使用iKuai连接</h1><p>手动配置DHCP Option能够获取到地址</p><blockquote><p><img src="/../../img/2024/08/24/2001011-ikuai-dhcp-get_ip__iptv.png" alt="2001011-ikuai-dhcp-get_ip__iptv.png.jpg"></p></blockquote><h1 id="使用OpenWrt"><a href="#使用OpenWrt" class="headerlink" title="使用OpenWrt"></a>使用OpenWrt</h1><h2 id="修改OpenWrt的dhcp配置文件"><a href="#修改OpenWrt的dhcp配置文件" class="headerlink" title="修改OpenWrt的dhcp配置文件"></a>修改OpenWrt的dhcp配置文件</h2><p>参考自 <a href="https://www.right.com.cn/forum/thread-522652-1-1.html">https://www.right.com.cn/forum/thread-522652-1-1.html</a></p><p>修改 &#x2F;lib&#x2F;netifd&#x2F;proto&#x2F;dhcp.sh 脚本</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-variable">$&#123;vendorid:+-V &quot;$vendorid&quot;&#125;</span> \<br></code></pre></td></tr></table></figure><p>修改为</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-variable">$&#123;vendorid:+-V &#x27;&#x27; &quot;-x 0x3c:$vendorid&quot;&#125;</span> \<br></code></pre></td></tr></table></figure><p><img src="/../../img/2024/08/24/2001011-ikuai-dhcp-get_ip__iptv-2.png" alt="2001011-ikuai-dhcp-get_ip__iptv-2.png"></p><p>编辑网卡</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">vim /etc/config/network <br></code></pre></td></tr></table></figure><p>修改连接的网卡配置（不要照抄），数据来源自上面的抓包数据</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs text">                                       <br>config interface &#x27;eth2_svmbr2&#x27;          <br>        option proto &#x27;dhcp&#x27;   <br>        option device &#x27;eth2&#x27;         <br>        option hostname &#x27;android-xxxxxxxxxxx&#x27;<br>        option clientid &#x27;00:00:00:00:00:00&#x27;       <br>        option vendorid &#x27;182chars    00:00:00&#x27;<br>    <br></code></pre></td></tr></table></figure><p><img src="/../../img/2024/08/24/2001011-ikuai-dhcp-get_ip__iptv-3.png" alt="2001011-ikuai-dhcp-get_ip__iptv-3.png"></p><h1 id="用途-玩法"><a href="#用途-玩法" class="headerlink" title="用途&#x2F;玩法"></a>用途&#x2F;玩法</h1><h2 id="看IPTV"><a href="#看IPTV" class="headerlink" title="看IPTV"></a>看IPTV</h2><h2 id="传数据（把两个改为同网段能互通，不同网段不行）19位的地址（我的物理网卡1GB）"><a href="#传数据（把两个改为同网段能互通，不同网段不行）19位的地址（我的物理网卡1GB）" class="headerlink" title="传数据（把两个改为同网段能互通，不同网段不行）19位的地址（我的物理网卡1GB）"></a>传数据（把两个改为同网段能互通，不同网段不行）19位的地址（我的物理网卡1GB）</h2><p><img src="/../../img/2024/08/24/2001011-ikuai-dhcp-get_ip__iptv-4.png" alt="2001011-ikuai-dhcp-get_ip__iptv-4.png"></p><p>同样的Option信息（MAC地址不同）获取到的网段不同，无法通信<br><img src="/../../img/2024/08/24/2001011-ikuai-dhcp-get_ip__iptv-5.png" alt="2001011-ikuai-dhcp-get_ip__iptv-5.png"></p><p>手动配IP测试<br><img src="/../../img/2024/08/24/2001011-ikuai-dhcp-get_ip__iptv-6.png" alt="2001011-ikuai-dhcp-get_ip__iptv-6.png"></p><p>有概率会遇到分配的IP为一个段的<br><img src="/../../img/2024/08/24/2001011-ikuai-dhcp-get_ip__iptv-7.png" alt="2001011-ikuai-dhcp-get_ip__iptv-7.png"></p><h2 id="代理上网"><a href="#代理上网" class="headerlink" title="代理上网"></a>代理上网</h2><p>比如，A地方网速1000Mbps，B地方只有50Mbps但如果走机顶盒专线，在A地方接入一个机顶盒的网，B设置为同段，不知道能不能实现B地方用A地方上网<br>往大了说，B地方不需要交网费，因为走的是机顶盒的vlan43而不是上网的vlan41<br><img src="/../../img/2024/08/24/2001011-ikuai-dhcp-get_ip__iptv-8.png" alt="2001011-ikuai-dhcp-get_ip__iptv-8.png"></p>]]></content>
    
    
    <categories>
      
      <category>技术/软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>OpenWrt</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>授权测试记录-虚拟机</title>
    <link href="/2001010/"/>
    <url>/2001010/</url>
    
    <content type="html"><![CDATA[<blockquote><p>仅供学习使用</p><p>本教程仅用于个人学习和技术交流，不构成任何商业推荐或投资建议。教程中涉及的工具、软件或服务仅供参考，作者不对其实际效果、安全性或合法性做任何保证。</p><p>请用户根据自身情况审慎判断，并自行承担使用本教程及其中提到的任何工具、软件或服务可能带来的风险（包括但不限于数据丢失、系统损坏、法律纠纷等）。</p><p>本教程文字内容由作者[开心ucu]创作，版权归属作者本人。</p><p>严禁转载，如果转载造成的任何问题，后果请自行承担</p><p>快照是个好东西，建议合理使用，这些镜像等情况都能通过快照形式接着用，无非是有些会掉用ntp或定时同步系统时间<br>实现了授权到期的情况，虚拟机运行时将同步系统时间关闭，不联网（无法连接到ntp服务器）等操作，可实现一直用</p></blockquote><hr><blockquote><p>20250727 增加深信服AC，安恒漏扫 内容</p></blockquote><h1 id="网御星云"><a href="#网御星云" class="headerlink" title="网御星云"></a>网御星云</h1><h2 id="漏扫"><a href="#漏扫" class="headerlink" title="漏扫"></a>漏扫</h2><blockquote><p>系统为ova格式，使用Vmware安装，会发现，将此虚拟机换到另一台电脑运行时，授权码会出现变化。</p><blockquote><p>使用Vmware的cpuID模拟，模拟cpuID和cpu型号可以跳过校验,实现“通用”</p></blockquote></blockquote><p>如果觉得麻烦，直接使用快照即可，关闭Vmware设置的时间同步功能等，做完的时候使用快照，需要用到的时候恢复快照，或挂起。</p><h3 id="查看cpuID和型号"><a href="#查看cpuID和型号" class="headerlink" title="查看cpuID和型号"></a>查看cpuID和型号</h3><p>下载一个ubuntu的镜像文件（Desktop），用Try模式，在安装界面这里不安装，打开终端，使用如下命令查看cpu型号(<code>lscpu</code>也能看)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cat /proc/cpuinfo<br></code></pre></td></tr></table></figure><p>返回如下数据</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs text"># cat /proc/cpuinfo <br>processor       : 0<br>vendor_id       : GenuineIntel<br>cpu family      : 6<br>model           : 79<br>model name      : Intel(R) Xeon(R) CPU E5-2660 v4 @ 2.00GHz<br>stepping        : 1<br>microcode       : 0xb00003a<br>cpu MHz         : 1995.500<br>cache size      : 35840 KB<br>physical id     : 0<br>siblings        : 28<br>core id         : 3<br>cpu cores       : 14<br>apicid          : 6<br>initial apicid  : 6<br>fpu             : yes<br>fpu_exception   : yes<br>cpuid level     : 20<br>wp              : yes<br>flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc cpuid aperfmperf pni pclmulqdq dtes64 ds_cpl vmx smx est tm2 ssse3 sdbg fma cx16 xtpr pdcm pcid dca sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand lahf_lm abm 3dnowprefetch cpuid_fault epb cat_l3 cdp_l3 pti intel_ppin ssbd ibrs ibpb stibp tpr_shadow flexpriority ept vpid ept_ad fsgsbase tsc_adjust bmi1 hle avx2 smep bmi2 erms invpcid rtm cqm rdt_a rdseed adx smap intel_pt xsaveopt cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local dtherm arat pln pts vnmi md_clear flush_l1d<br>vmx flags       : vnmi preemption_timer posted_intr invvpid ept_x_only ept_ad ept_1gb flexpriority apicv tsc_offset vtpr mtf vapic ept vpid unrestricted_guest vapic_reg vid ple shadow_vmcs pml<br>bugs            : cpu_meltdown spectre_v1 spectre_v2 spec_store_bypass l1tf mds swapgs taa itlb_multihit mmio_stale_data<br>bogomips        : 3991.00<br>clflush size    : 64<br>cache_alignment : 64<br>address sizes   : 46 bits physical, 48 bits virtual<br>power management:<br></code></pre></td></tr></table></figure><p>其中cpu型号为model name数据：<code>Intel(R) Xeon(R) CPU E5-2660 v4 @ 2.00GHz</code></p><p>查看cpuID如下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">dmidecode -t 4 | grep ID | sort -u | awk -F&#x27;: &#x27; &#x27;&#123;print $2&#125;&#x27;<br></code></pre></td></tr></table></figure><p>丰富点的如下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">dmidecode -t 4 <br></code></pre></td></tr></table></figure><p>执行结果如下</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs text">root@hcss-ecs-6975:~#  dmidecode -t 4 <br># dmidecode 3.4<br>Getting SMBIOS data from sysfs.<br>SMBIOS 2.8 present.<br><br>Handle 0x0400, DMI type 4, 42 bytes<br>Processor Information<br>        Socket Designation: CPU 0<br>        Type: Central Processor<br>        Family: Other<br>        Manufacturer: QEMU<br>        ID: 57 06 05 00 FF FB 8B 0F<br>        Version: pc-i440fx-2.8<br>        Voltage: Unknown<br>        External Clock: Unknown<br>        Max Speed: 2000 MHz<br>        Current Speed: 2000 MHz<br>        Status: Populated, Enabled<br>        Upgrade: Other<br>        L1 Cache Handle: Not Provided<br>        L2 Cache Handle: Not Provided<br>        L3 Cache Handle: Not Provided<br>        Serial Number: Not Specified<br>        Asset Tag: Not Specified<br>        Part Number: Not Specified<br>        Core Count: 1<br>        Core Enabled: 1<br>        Thread Count: 2<br>        Characteristics: None<br><br>root@hcss-ecs-6975:~# <br></code></pre></td></tr></table></figure><p>其中cpuID为<code>57 06 05 00 FF FB 8B 0F</code></p><p>修改vmware的信息参考这个地址：<a href="https://luotianyi.vc/8375.html">https://luotianyi.vc/8375.html</a></p><h3 id="进底层"><a href="#进底层" class="headerlink" title="进底层"></a>进底层</h3><p>有个挑战码，这个可以直接拨打400拿到进底层</p><blockquote><p>我找到个0day，可以通过这个0day直接进底层，暂不公开</p></blockquote><h3 id="授权时间"><a href="#授权时间" class="headerlink" title="授权时间"></a>授权时间</h3><p>经测试，过去后，修改时间为授权时间范围内，可以正常使用</p><blockquote><p>进底层，将ntp相关服务删了，同时更改系统时间为授权时间范围</p><p>然后呢，基线等正常，包括xxx都正常的</p></blockquote><h2 id="EDR"><a href="#EDR" class="headerlink" title="EDR"></a>EDR</h2><h3 id="安装，使用openEuler进行安装"><a href="#安装，使用openEuler进行安装" class="headerlink" title="安装，使用openEuler进行安装"></a>安装，使用openEuler进行安装</h3><p>安装过程中，可以通过ps -aux查看进程得到***的密码<br>解包后可进行内容分析</p><p>当然了，EDR装好后也可以直接登录系统openEuler看的。</p><p>能够定位到使用了tomcat，且调用了war包，通过逆向war包，测试，能够拿到xxx的逻辑</p><p>其中，java中调用了so文件来解密授权文件，逆向so文件（C#）按照这个逻辑，弄到授权的加密逻辑，可根据逻辑编写加密及解密的方法实现自己开授权</p><p>经测试xx后正常，且xx等都能实现。</p><h1 id="安恒信息"><a href="#安恒信息" class="headerlink" title="安恒信息"></a>安恒信息</h1><h2 id="漏洞扫描"><a href="#漏洞扫描" class="headerlink" title="漏洞扫描"></a>漏洞扫描</h2><h3 id="快照"><a href="#快照" class="headerlink" title="快照"></a>快照</h3><h3 id="改Vmware模拟cpuid等"><a href="#改Vmware模拟cpuid等" class="headerlink" title="改Vmware模拟cpuid等"></a>改Vmware模拟cpuid等</h3><p>和网御星云的楼扫一样，实际上嘛，用不用这个方法无所谓，多的不好描述</p><h3 id="部分授权信息"><a href="#部分授权信息" class="headerlink" title="部分授权信息"></a>部分授权信息</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">[</span><br>  <span class="hljs-attr">&quot;license&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;number&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxxxxxXXxx&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;serviceCode&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxxxxxxxxxxxxxxxxxxx&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;licenseStartDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxxx-xx-xx 00:00:00&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;licenseMainDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxxx-xx-xx 00:00:00&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;licenseSubject&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxxx&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;licenseVersion&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;正式版&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;licenseEndDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;xxxx-xx-xx 00:00:00&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;modules&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;task_concurrent_num&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;text&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;任务授权信息&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;label&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;任务并发数&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;value&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">15</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;option&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">15</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;webscan&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;text&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;网站扫描&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;label&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;授权数&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;value&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;无限制&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;dbscan&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;text&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;数据库扫描&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;label&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;授权数&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;value&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;无限制&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;hostscan&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;text&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;主机扫描&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;label&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;授权数&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;value&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;无限制&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;baseline&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;text&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;基线扫描&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;label&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;授权数&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;value&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;无限制&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><h3 id="部分代码"><a href="#部分代码" class="headerlink" title="部分代码"></a>部分代码</h3><p>部分授权信息</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">XXXX</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">SYS_START_TIME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;SYS_START_TIME&quot;</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">SYS_END_TIME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;SYS_END_TIME&quot;</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">SYS_MAIN_TIME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;SYS_MAIN_TIME&quot;</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">SYS_USER</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;SYS_USER&quot;</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">SYS_PRODUCT_CODE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;SYS_PRODUCT_CODE&quot;</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">SYS_VERSION</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;SYS_VERSION&quot;</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">SYS_MODELS</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;SYS_MODELS&quot;</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">MODELS</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;MODELS&quot;</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">RUNTIME_ENV_OS</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;OS&quot;</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">RUNTIME_ENV_RAM</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;RAM&quot;</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">RUNTIME_ENV_HWADDR</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;HWADDR&quot;</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">L_OK</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">L_FILE_ERROR</span> <span class="hljs-operator">=</span> <span class="hljs-number">32</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">L_TIME_ERROR</span> <span class="hljs-operator">=</span> <span class="hljs-number">64</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">L_RENV_ERROR</span> <span class="hljs-operator">=</span> <span class="hljs-number">128</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">L_CODE_ERROR</span> <span class="hljs-operator">=</span> <span class="hljs-number">256</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">L_OTHER_ERROR</span> <span class="hljs-operator">=</span> <span class="hljs-number">512</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">L_FILE_NOT_EXIST</span> <span class="hljs-operator">=</span> <span class="hljs-number">33</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">L_FILE_ERR_FORMAT</span> <span class="hljs-operator">=</span> <span class="hljs-number">34</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">L_TIME_AHEAD_START</span> <span class="hljs-operator">=</span> <span class="hljs-number">65</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">L_TIME_EXCEED_MAIN</span> <span class="hljs-operator">=</span> <span class="hljs-number">66</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">L_TIME_EXCEED_END</span> <span class="hljs-operator">=</span> <span class="hljs-number">67</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">L_RENV_RAM</span> <span class="hljs-operator">=</span> <span class="hljs-number">129</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">L_RENV_OS</span> <span class="hljs-operator">=</span> <span class="hljs-number">130</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">L_RENV_HWADDR</span> <span class="hljs-operator">=</span> <span class="hljs-number">131</span>;<br>   <span class="hljs-keyword">protected</span> <span class="hljs-type">Map</span> <span class="hljs-variable">delegate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashMap</span>();<br>   <span class="hljs-keyword">private</span> _L.StringCryption stringCryption;<br>   <span class="hljs-keyword">private</span> _L.StringIO stringIO;<br>   <span class="hljs-keyword">private</span> _L.StringConverter stringConverter;<br><br>   <span class="hljs-keyword">protected</span> Map <span class="hljs-title function_">getRuntimeEnv</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-type">Map</span> <span class="hljs-variable">renv</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashMap</span>();<br>      <span class="hljs-type">String</span> <span class="hljs-variable">default_value</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;ERROR&quot;</span>;<br>      <span class="hljs-type">String</span> <span class="hljs-variable">ram</span> <span class="hljs-operator">=</span> default_value;<br><br>      <span class="hljs-keyword">try</span> &#123;<br>         ram = SIGather.getRamMB() + <span class="hljs-string">&quot;MB&quot;</span>;<br>      &#125; <span class="hljs-keyword">catch</span> (Throwable var8) &#123;<br>         var8.printStackTrace();<br>      &#125;<br><br>      renv.put(<span class="hljs-string">&quot;RAM&quot;</span>, ram);<br>      <span class="hljs-type">Map</span> <span class="hljs-variable">os</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>      os.put(<span class="hljs-string">&quot;os.name&quot;</span>, SIGather.getOSName());<br>      os.put(<span class="hljs-string">&quot;os.version&quot;</span>, SIGather.getOSVersion());<br>      os.put(<span class="hljs-string">&quot;os.arch&quot;</span>, SIGather.getOSArch());<br>      renv.put(<span class="hljs-string">&quot;OS&quot;</span>, os);<br>      <span class="hljs-type">String</span> <span class="hljs-variable">hwaddr</span> <span class="hljs-operator">=</span> default_value;<br><br>      <span class="hljs-keyword">try</span> &#123;<br>         hwaddr = SIGather.getMAC();<br>      &#125; <span class="hljs-keyword">catch</span> (Throwable var7) &#123;<br>         var7.printStackTrace();<br>      &#125;<br><br>      renv.put(<span class="hljs-string">&quot;HWADDR&quot;</span>, hwaddr);<br>      <span class="hljs-keyword">return</span> renv;<br>   &#125;<br><br>   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">log</span><span class="hljs-params">(String msg, Exception e)</span> &#123;<br>      <span class="hljs-keyword">if</span> (msg != <span class="hljs-literal">null</span> &amp;&amp; !msg.isEmpty()) &#123;<br>         System.err.println(msg);<br>      &#125;<br><br>      <span class="hljs-keyword">if</span> (e != <span class="hljs-literal">null</span>) &#123;<br>         e.printStackTrace(System.err);<br>      &#125;<br><br>   &#125;<br><br>   <span class="hljs-keyword">public</span> _L.StringIO <span class="hljs-title function_">getStringIO</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> (_L.StringIO)(<span class="hljs-built_in">this</span>.stringIO == <span class="hljs-literal">null</span> ? <span class="hljs-keyword">new</span> <span class="hljs-title class_">_L</span>.DefaultStringIO() : <span class="hljs-built_in">this</span>.stringIO);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setStringIO</span><span class="hljs-params">(_L.StringIO stringIO)</span> &#123;<br>      <span class="hljs-built_in">this</span>.stringIO = stringIO;<br>   &#125;<br><br>   _L.StringConverter <span class="hljs-title function_">getStringConverter</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.stringConverter;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setStringConverter</span><span class="hljs-params">(_L.StringConverter stringConverter)</span> &#123;<br>      <span class="hljs-built_in">this</span>.stringConverter = stringConverter;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> _L.StringCryption <span class="hljs-title function_">getStringCryption</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> (_L.StringCryption)(<span class="hljs-built_in">this</span>.stringCryption == <span class="hljs-literal">null</span> ? <span class="hljs-keyword">new</span> <span class="hljs-title class_">_L</span>.DefaultStringCryption() : <span class="hljs-built_in">this</span>.stringCryption);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setStringCryption</span><span class="hljs-params">(_L.StringCryption stringCryption)</span> &#123;<br>      <span class="hljs-built_in">this</span>.stringCryption = stringCryption;<br>   &#125;<br><br>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DefaultStringIO</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">_L</span>.StringIO &#123;<br>      <span class="hljs-keyword">private</span> <span class="hljs-title function_">DefaultStringIO</span><span class="hljs-params">()</span> &#123;<br>      &#125;<br><br>      <span class="hljs-keyword">public</span> String <span class="hljs-title function_">read</span><span class="hljs-params">(InputStream inputStream)</span> &#123;<br>         <span class="hljs-type">ByteArrayOutputStream</span> <span class="hljs-variable">byteArrayOutputStream</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayOutputStream</span>();<br>         <span class="hljs-type">byte</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">4096</span>];<br>         <span class="hljs-type">boolean</span> <span class="hljs-variable">var4</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br><br>         <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">int</span> k;<br>            <span class="hljs-keyword">while</span>((k = inputStream.read(buffer)) &gt; <span class="hljs-number">0</span>) &#123;<br>               byteArrayOutputStream.write(buffer, <span class="hljs-number">0</span>, k);<br>            &#125;<br><br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(byteArrayOutputStream.toByteArray());<br>         &#125; <span class="hljs-keyword">catch</span> (IOException var6) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(var6);<br>         &#125;<br>      &#125;<br><br>      <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">wirte</span><span class="hljs-params">(OutputStream outputStream, String content)</span> &#123;<br>         <span class="hljs-type">byte</span>[] bytes = content.getBytes();<br><br>         <span class="hljs-keyword">try</span> &#123;<br>            outputStream.write(bytes);<br>            outputStream.flush();<br>         &#125; <span class="hljs-keyword">catch</span> (IOException var5) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(var5);<br>         &#125;<br>      &#125;<br><br>      <span class="hljs-comment">// $FF: synthetic method</span><br>      DefaultStringIO(Object x1) &#123;<br>         <span class="hljs-built_in">this</span>();<br>      &#125;<br>   &#125;<br><br>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DefaultStringCryption</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">_L</span>.StringCryption &#123;<br>      <span class="hljs-keyword">private</span> String key;<br><br>      <span class="hljs-keyword">private</span> <span class="hljs-title function_">DefaultStringCryption</span><span class="hljs-params">()</span> &#123;<br>         <span class="hljs-built_in">this</span>.key = <span class="hljs-string">&quot;XXXXXXXXXXXX&quot;</span>;<br>      &#125;<br><br>      <span class="hljs-keyword">public</span> String <span class="hljs-title function_">encrypt</span><span class="hljs-params">(String source)</span> &#123;<br>         <span class="hljs-keyword">if</span> (source != <span class="hljs-literal">null</span> &amp;&amp; !source.trim().isEmpty()) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>               <span class="hljs-type">byte</span>[] bytes = source.getBytes(<span class="hljs-string">&quot;utf-8&quot;</span>);<br>               <span class="hljs-type">byte</span>[] bytes1 = <span class="hljs-built_in">this</span>.encryByRC4(bytes, <span class="hljs-built_in">this</span>.key);<br>               <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.Bytes2HexString(bytes1);<br>            &#125; <span class="hljs-keyword">catch</span> (UnsupportedEncodingException var4) &#123;<br>               <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(var4);<br>            &#125;<br>         &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> source;<br>         &#125;<br>      &#125;<br><br>      <span class="hljs-keyword">public</span> String <span class="hljs-title function_">decrypt</span><span class="hljs-params">(String source)</span> &#123;<br>         <span class="hljs-keyword">if</span> (source != <span class="hljs-literal">null</span> &amp;&amp; !source.trim().isEmpty()) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>               <span class="hljs-type">byte</span>[] bytes = <span class="hljs-built_in">this</span>.HexString2Bytes(source);<br>               <span class="hljs-type">byte</span>[] bytes1 = <span class="hljs-built_in">this</span>.decryByRC4(bytes, <span class="hljs-built_in">this</span>.key);<br>               <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(bytes1, <span class="hljs-string">&quot;utf-8&quot;</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (UnsupportedEncodingException var4) &#123;<br>               <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(var4);<br>            &#125;<br>         &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> source;<br>         &#125;<br>      &#125;<br><br>      <span class="hljs-keyword">private</span> <span class="hljs-type">byte</span>[] decryByRC4(<span class="hljs-type">byte</span>[] data, String key) &#123;<br>         <span class="hljs-keyword">return</span> data != <span class="hljs-literal">null</span> &amp;&amp; key != <span class="hljs-literal">null</span> ? <span class="hljs-built_in">this</span>.RC4Base(data, key) : <span class="hljs-literal">null</span>;<br>      &#125;<br><br>      <span class="hljs-keyword">private</span> <span class="hljs-type">byte</span>[] encryByRC4(<span class="hljs-type">byte</span>[] data, String key) &#123;<br>         <span class="hljs-keyword">return</span> data != <span class="hljs-literal">null</span> &amp;&amp; key != <span class="hljs-literal">null</span> ? <span class="hljs-built_in">this</span>.RC4Base(data, key) : <span class="hljs-literal">null</span>;<br>      &#125;<br><br>      <span class="hljs-keyword">private</span> String <span class="hljs-title function_">asString</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] buf)</span> &#123;<br>         <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">strbuf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>(buf.length);<br><br>         <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; buf.length; ++i) &#123;<br>            strbuf.append((<span class="hljs-type">char</span>)buf[i]);<br>         &#125;<br><br>         <span class="hljs-keyword">return</span> strbuf.toString();<br>      &#125;<br><br>      <span class="hljs-keyword">private</span> <span class="hljs-type">byte</span>[] initKey(String aKey) &#123;<br>         <span class="hljs-type">byte</span>[] b_key = aKey.getBytes();<br>         <span class="hljs-type">byte</span>[] state = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">256</span>];<br><br>         <span class="hljs-type">int</span> index1;<br>         <span class="hljs-keyword">for</span>(index1 = <span class="hljs-number">0</span>; index1 &lt; <span class="hljs-number">256</span>; ++index1) &#123;<br>            state[index1] = (<span class="hljs-type">byte</span>)index1;<br>         &#125;<br><br>         index1 = <span class="hljs-number">0</span>;<br>         <span class="hljs-type">int</span> <span class="hljs-variable">index2</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>         <span class="hljs-keyword">if</span> (b_key != <span class="hljs-literal">null</span> &amp;&amp; b_key.length != <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">256</span>; ++i) &#123;<br>               index2 = (b_key[index1] &amp; <span class="hljs-number">255</span>) + (state[i] &amp; <span class="hljs-number">255</span>) + index2 &amp; <span class="hljs-number">255</span>;<br>               <span class="hljs-type">byte</span> <span class="hljs-variable">tmp</span> <span class="hljs-operator">=</span> state[i];<br>               state[i] = state[index2];<br>               state[index2] = tmp;<br>               index1 = (index1 + <span class="hljs-number">1</span>) % b_key.length;<br>            &#125;<br><br>            <span class="hljs-keyword">return</span> state;<br>         &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>         &#125;<br>      &#125;<br><br>      <span class="hljs-keyword">private</span> String <span class="hljs-title function_">Bytes2HexString</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] data)</span> &#123;<br>         <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.asString(data);<br>         <span class="hljs-type">int</span> <span class="hljs-variable">sLen</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>)Math.ceil((<span class="hljs-type">double</span>)s.length() / <span class="hljs-number">2.0D</span>);<br>         <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>();<br>         <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">str1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>();<br><br>         <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; sLen; ++i) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">ch</span> <span class="hljs-operator">=</span> s.charAt(i);<br>            <span class="hljs-type">String</span> <span class="hljs-variable">s4</span> <span class="hljs-operator">=</span> Integer.toHexString(ch &amp; <span class="hljs-number">255</span>);<br>            <span class="hljs-keyword">if</span> (s4.length() == <span class="hljs-number">1</span>) &#123;<br>               str.append(<span class="hljs-string">&#x27;0&#x27;</span>);<br>            &#125;<br><br>            str.append(s4);<br>            <span class="hljs-keyword">if</span> (sLen + i &lt; s.length()) &#123;<br>               <span class="hljs-type">int</span> <span class="hljs-variable">ch1</span> <span class="hljs-operator">=</span> s.charAt(sLen + i);<br>               <span class="hljs-type">String</span> <span class="hljs-variable">s44</span> <span class="hljs-operator">=</span> Integer.toHexString(ch1 &amp; <span class="hljs-number">255</span>);<br>               <span class="hljs-keyword">if</span> (s44.length() == <span class="hljs-number">1</span>) &#123;<br>                  str1.append(<span class="hljs-string">&#x27;0&#x27;</span>);<br>               &#125;<br><br>               str1.append(s44);<br>            &#125;<br>         &#125;<br><br>         <span class="hljs-keyword">return</span> str.append(str1).toString();<br>      &#125;<br><br>      <span class="hljs-keyword">private</span> <span class="hljs-type">byte</span>[] HexString2Bytes(String src) &#123;<br>         <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> src.length();<br>         <span class="hljs-type">byte</span>[] ret = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[size / <span class="hljs-number">2</span>];<br>         <span class="hljs-type">byte</span>[] tmp = src.getBytes();<br><br>         <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; size / <span class="hljs-number">2</span>; ++i) &#123;<br>            ret[i] = <span class="hljs-built_in">this</span>.uniteBytes(tmp[i * <span class="hljs-number">2</span>], tmp[i * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>]);<br>         &#125;<br><br>         <span class="hljs-keyword">return</span> ret;<br>      &#125;<br><br>      <span class="hljs-keyword">private</span> <span class="hljs-type">byte</span> <span class="hljs-title function_">uniteBytes</span><span class="hljs-params">(<span class="hljs-type">byte</span> src0, <span class="hljs-type">byte</span> src1)</span> &#123;<br>         <span class="hljs-type">char</span> <span class="hljs-variable">_b0</span> <span class="hljs-operator">=</span> (<span class="hljs-type">char</span>)Byte.decode(<span class="hljs-string">&quot;0x&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[]&#123;src0&#125;));<br>         _b0 = (<span class="hljs-type">char</span>)(_b0 &lt;&lt; <span class="hljs-number">4</span>);<br>         <span class="hljs-type">char</span> <span class="hljs-variable">_b1</span> <span class="hljs-operator">=</span> (<span class="hljs-type">char</span>)Byte.decode(<span class="hljs-string">&quot;0x&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[]&#123;src1&#125;));<br>         <span class="hljs-type">byte</span> <span class="hljs-variable">ret</span> <span class="hljs-operator">=</span> (<span class="hljs-type">byte</span>)(_b0 ^ _b1);<br>         <span class="hljs-keyword">return</span> ret;<br>      &#125;<br><br>      <span class="hljs-keyword">private</span> <span class="hljs-type">byte</span>[] RC4Base(<span class="hljs-type">byte</span>[] input, String mKkey) &#123;<br>         <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>         <span class="hljs-type">int</span> <span class="hljs-variable">y</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>         <span class="hljs-type">byte</span>[] key = <span class="hljs-built_in">this</span>.initKey(mKkey);<br>         <span class="hljs-type">byte</span>[] result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[input.length];<br><br>         <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; input.length; ++i) &#123;<br>            x = x + <span class="hljs-number">1</span> &amp; <span class="hljs-number">255</span>;<br>            y = (key[x] &amp; <span class="hljs-number">255</span>) + y &amp; <span class="hljs-number">255</span>;<br>            <span class="hljs-type">byte</span> <span class="hljs-variable">tmp</span> <span class="hljs-operator">=</span> key[x];<br>            key[x] = key[y];<br>            key[y] = tmp;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">xorIndex</span> <span class="hljs-operator">=</span> (key[x] &amp; <span class="hljs-number">255</span>) + (key[y] &amp; <span class="hljs-number">255</span>) &amp; <span class="hljs-number">255</span>;<br>            result[i] = (<span class="hljs-type">byte</span>)(input[i] ^ key[xorIndex]);<br>         &#125;<br><br>         <span class="hljs-keyword">return</span> result;<br>      &#125;<br><br>      <span class="hljs-comment">// $FF: synthetic method</span><br>      DefaultStringCryption(Object x1) &#123;<br>         <span class="hljs-built_in">this</span>();<br>      &#125;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">StringConverter</span> &#123;<br>      String <span class="hljs-title function_">toString</span><span class="hljs-params">(Object var1)</span>;<br><br>      Object <span class="hljs-title function_">fromString</span><span class="hljs-params">(String var1, Class var2)</span>;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">StringIO</span> &#123;<br>      String <span class="hljs-title function_">read</span><span class="hljs-params">(InputStream var1)</span>;<br><br>      <span class="hljs-keyword">void</span> <span class="hljs-title function_">wirte</span><span class="hljs-params">(OutputStream var1, String var2)</span>;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">StringCryption</span> &#123;<br>      String <span class="hljs-title function_">encrypt</span><span class="hljs-params">(String var1)</span>;<br><br>      String <span class="hljs-title function_">decrypt</span><span class="hljs-params">(String var1)</span>;<br>   &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>部分网络请求</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(&#123;&quot;/&quot;&#125;)</span><br><span class="hljs-meta">@Guarded</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthAction</span> &#123;<br>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">log</span> <span class="hljs-operator">=</span> LogManager.getLogger(AuthAction.class);<br>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> LoadingCache verificationCodeMap;<br>   <span class="hljs-meta">@Autowired</span><br>   <span class="hljs-keyword">private</span> IUser userService;<br>   <span class="hljs-meta">@Autowired</span><br>   <span class="hljs-keyword">private</span> ILog logService;<br>   <span class="hljs-meta">@Autowired</span><br>   <span class="hljs-keyword">public</span> RedisTemplate redisTemplate;<br>   <span class="hljs-meta">@Autowired</span><br>   <span class="hljs-keyword">public</span> IUpgrade upgradeService;<br>   <span class="hljs-meta">@Autowired</span><br>   <span class="hljs-keyword">public</span> IRole roleService;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">IPADDR_LOCK</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;ipaddrLock&quot;</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">USER_ATTRIBUTE_KEY</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;user&quot;</span>;<br><br>   <span class="hljs-meta">@RequestMapping(</span><br><span class="hljs-meta">      value = &#123;&quot;settings&quot;&#125;,</span><br><span class="hljs-meta">      method = &#123;RequestMethod.GET&#125;</span><br><span class="hljs-meta">   )</span><br>   <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">setting</span><span class="hljs-params">(HttpServletRequest request)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>      <span class="hljs-keyword">return</span> ProductUtil.isSecret() ? <span class="hljs-built_in">this</span>.setting_secret(request) : <span class="hljs-built_in">this</span>.setting_default();<br>   &#125;<br><br>   <span class="hljs-keyword">private</span> Object <span class="hljs-title function_">setting_default</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>      <span class="hljs-type">JsonObj</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObj</span>(<span class="hljs-literal">true</span>);<br>      <span class="hljs-type">Map</span> <span class="hljs-variable">settings</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>      <span class="hljs-type">Object</span> <span class="hljs-variable">licInfo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br><br>      <span class="hljs-keyword">try</span> &#123;<br>         licInfo = (Map)LicenseUIData.readInfo().get(<span class="hljs-string">&quot;license&quot;</span>);<br>      &#125; <span class="hljs-keyword">catch</span> (Exception var8) &#123;<br>         log.error(<span class="hljs-string">&quot;read license error&quot;</span>, var8);<br>      &#125;<br><br>      <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">version</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>      version.append(CurrentLocale.getMessage(<span class="hljs-string">&quot;auth.get.normal.msg1-1&quot;</span>, MapUtils.getString((Map)licInfo, <span class="hljs-string">&quot;licenseSubject&quot;</span>, <span class="hljs-string">&quot;-&quot;</span>)));<br>      <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">version2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>      <span class="hljs-keyword">if</span> (ProductUtil.isSecret()) &#123;<br>         <span class="hljs-type">String</span> <span class="hljs-variable">licenseVersion</span> <span class="hljs-operator">=</span> org.apache.commons.collections4.MapUtils.getString(Constant.CONF, <span class="hljs-string">&quot;license_version&quot;</span>);<br>         <span class="hljs-keyword">if</span> (!Strings.isNullOrEmpty(licenseVersion)) &#123;<br>            version2.append(licenseVersion);<br>         &#125; <span class="hljs-keyword">else</span> &#123;<br>            version2.append(MapUtils.getString((Map)licInfo, <span class="hljs-string">&quot;licenseVersion&quot;</span>, <span class="hljs-string">&quot;正式版&quot;</span>));<br>         &#125;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>         version.append(MapUtils.getString((Map)licInfo, <span class="hljs-string">&quot;licenseVersion&quot;</span>, <span class="hljs-string">&quot;正式版&quot;</span>));<br>         version.append(<span class="hljs-string">&quot; v&quot;</span>);<br>      &#125;<br><br>      <span class="hljs-type">Map</span> <span class="hljs-variable">others</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>      settings.put(<span class="hljs-string">&quot;logo&quot;</span>, <span class="hljs-string">&quot;/logo/logo-cra.png&quot;</span>);<br>      version.append(UpgradeHelper.currentVersion());<br>      others.put(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>      settings.put(<span class="hljs-string">&quot;version&quot;</span>, version.toString());<br>      settings.put(<span class="hljs-string">&quot;copyright&quot;</span>, Constant.CONF.getProperty(<span class="hljs-string">&quot;product_copyright&quot;</span>));<br>      settings.put(<span class="hljs-string">&quot;supportUrl&quot;</span>, Constant.CONF.getProperty(<span class="hljs-string">&quot;company_website&quot;</span>));<br>      settings.put(<span class="hljs-string">&quot;contact&quot;</span>, Constant.CONF.getProperty(<span class="hljs-string">&quot;produc_contact&quot;</span>));<br>      settings.put(<span class="hljs-string">&quot;encrypt&quot;</span>, <span class="hljs-string">&quot;true&quot;</span>);<br>      settings.put(<span class="hljs-string">&quot;login&quot;</span>, <span class="hljs-literal">true</span>);<br>      String productName;<br>      <span class="hljs-keyword">if</span> (ProductUtil.isSecret()) &#123;<br>         productName = SysConfig.INFO.get(<span class="hljs-string">&quot;product_name&quot;</span>, CurrentLocale.getMessage(<span class="hljs-string">&quot;product_name_secret&quot;</span>));<br>         <span class="hljs-keyword">if</span> (Strings.isNullOrEmpty(productName)) &#123;<br>            productName = CurrentLocale.getMessage(Constant.CONF.getProperty(<span class="hljs-string">&quot;product_name_scan&quot;</span>));<br>            settings.put(<span class="hljs-string">&quot;property&quot;</span>, <span class="hljs-literal">true</span>);<br>            settings.put(<span class="hljs-string">&quot;series&quot;</span>, CurrentLocale.getMessage(<span class="hljs-string">&quot;product_series&quot;</span>));<br>            settings.put(<span class="hljs-string">&quot;support&quot;</span>, CurrentLocale.getMessage(<span class="hljs-string">&quot;product_company&quot;</span>));<br>            settings.put(<span class="hljs-string">&quot;holder&quot;</span>, CurrentLocale.getMessage(<span class="hljs-string">&quot;product_series&quot;</span>));<br>         &#125; <span class="hljs-keyword">else</span> &#123;<br>            settings.put(<span class="hljs-string">&quot;property&quot;</span>, <span class="hljs-literal">false</span>);<br>            settings.put(<span class="hljs-string">&quot;series&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>            settings.put(<span class="hljs-string">&quot;support&quot;</span>, CurrentLocale.getMessage(<span class="hljs-string">&quot;product_company&quot;</span>));<br>            settings.put(<span class="hljs-string">&quot;holder&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>         &#125;<br><br>         settings.put(<span class="hljs-string">&quot;title&quot;</span>, productName + <span class="hljs-string">&quot; &quot;</span> + version2.toString());<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>         productName = SysConfig.INFO.get(<span class="hljs-string">&quot;product_name&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>         <span class="hljs-keyword">if</span> (Strings.isNullOrEmpty(productName) &amp;&amp; !ProductUtil.isSecret()) &#123;<br>            productName = CurrentLocale.getMessage(Constant.CONF.getProperty(<span class="hljs-string">&quot;product_name_scan&quot;</span>));<br>            settings.put(<span class="hljs-string">&quot;property&quot;</span>, <span class="hljs-literal">false</span>);<br>            settings.put(<span class="hljs-string">&quot;series&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>            settings.put(<span class="hljs-string">&quot;support&quot;</span>, CurrentLocale.getMessage(<span class="hljs-string">&quot;product_company&quot;</span>));<br>            settings.put(<span class="hljs-string">&quot;holder&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>         &#125; <span class="hljs-keyword">else</span> &#123;<br>            settings.put(<span class="hljs-string">&quot;property&quot;</span>, <span class="hljs-literal">false</span>);<br>            settings.put(<span class="hljs-string">&quot;series&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>            settings.put(<span class="hljs-string">&quot;support&quot;</span>, SysConfig.INFO.get(<span class="hljs-string">&quot;product_company&quot;</span>, CurrentLocale.getMessage(<span class="hljs-string">&quot;product_company&quot;</span>)));<br>            settings.put(<span class="hljs-string">&quot;holder&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>         &#125;<br><br>         settings.put(<span class="hljs-string">&quot;title&quot;</span>, productName);<br>      &#125;<br><br>      others.put(<span class="hljs-string">&quot;type&quot;</span>, <span class="hljs-string">&quot;form&quot;</span>);<br>      others.put(<span class="hljs-string">&quot;link&quot;</span>, <span class="hljs-literal">false</span>);<br>      others.put(<span class="hljs-string">&quot;slogan&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>      others.put(<span class="hljs-string">&quot;forgot_pass&quot;</span>, <span class="hljs-literal">false</span>);<br>      others.put(<span class="hljs-string">&quot;signup&quot;</span>, <span class="hljs-literal">false</span>);<br>      <span class="hljs-type">Map</span> <span class="hljs-variable">auth</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>      auth.put(<span class="hljs-string">&quot;admin&quot;</span>, others);<br>      settings.put(<span class="hljs-string">&quot;auth&quot;</span>, auth);<br>      settings.put(<span class="hljs-string">&quot;product_type&quot;</span>, SysConfig.INFO.getAsInt(<span class="hljs-string">&quot;system_type&quot;</span>, <span class="hljs-number">1</span>));<br>      settings.put(<span class="hljs-string">&quot;lang&quot;</span>, CurrentLocale.getLocale().toLanguageTag());<br>      obj.put(<span class="hljs-string">&quot;setting&quot;</span>, settings);<br>      <span class="hljs-keyword">return</span> obj;<br>   &#125;<br><br>   <span class="hljs-keyword">private</span> Object <span class="hljs-title function_">setting_secret</span><span class="hljs-params">(HttpServletRequest request)</span> &#123;<br>      <span class="hljs-type">JsonObj</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObj</span>(<span class="hljs-literal">true</span>);<br>      <span class="hljs-type">Map</span> <span class="hljs-variable">settings</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>      <span class="hljs-type">Object</span> <span class="hljs-variable">licInfo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br><br>      <span class="hljs-keyword">try</span> &#123;<br>         licInfo = (Map)LicenseUIData.readInfo().get(<span class="hljs-string">&quot;license&quot;</span>);<br>      &#125; <span class="hljs-keyword">catch</span> (Exception var11) &#123;<br>         log.error(<span class="hljs-string">&quot;read license error&quot;</span>, var11);<br>      &#125;<br><br>      <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">version</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>      version.append(CurrentLocale.getMessage(<span class="hljs-string">&quot;auth.get.normal.msg1-1&quot;</span>, MapUtils.getString((Map)licInfo, <span class="hljs-string">&quot;licenseSubject&quot;</span>, <span class="hljs-string">&quot;-&quot;</span>)));<br>      <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">version2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>      <span class="hljs-type">String</span> <span class="hljs-variable">licenseVersion</span> <span class="hljs-operator">=</span> org.apache.commons.collections4.MapUtils.getString(Constant.CONF, <span class="hljs-string">&quot;license_version&quot;</span>);<br>      <span class="hljs-keyword">if</span> (!Strings.isNullOrEmpty(licenseVersion)) &#123;<br>         version2.append(licenseVersion);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>         version2.append(MapUtils.getString((Map)licInfo, <span class="hljs-string">&quot;licenseVersion&quot;</span>, <span class="hljs-string">&quot;正式版&quot;</span>));<br>      &#125;<br><br>      version2.append(<span class="hljs-string">&quot; V&quot;</span>);<br>      <span class="hljs-type">Map</span> <span class="hljs-variable">others</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>      settings.put(<span class="hljs-string">&quot;logo&quot;</span>, <span class="hljs-string">&quot;/logo/logo-cra.png&quot;</span>);<br>      version2.append(Constant.CONF.getProperty(<span class="hljs-string">&quot;product_version&quot;</span>));<br>      others.put(<span class="hljs-string">&quot;title&quot;</span>, CurrentLocale.getMessage(<span class="hljs-string">&quot;auth.get.normal.msg1-2&quot;</span>));<br>      settings.put(<span class="hljs-string">&quot;version&quot;</span>, version.toString());<br>      settings.put(<span class="hljs-string">&quot;copyright&quot;</span>, Constant.CONF.getProperty(<span class="hljs-string">&quot;product_copyright&quot;</span>));<br>      settings.put(<span class="hljs-string">&quot;supportUrl&quot;</span>, Constant.CONF.getProperty(<span class="hljs-string">&quot;company_website&quot;</span>));<br>      settings.put(<span class="hljs-string">&quot;contact&quot;</span>, Constant.CONF.getProperty(<span class="hljs-string">&quot;produc_contact&quot;</span>));<br>      settings.put(<span class="hljs-string">&quot;encrypt&quot;</span>, <span class="hljs-string">&quot;true&quot;</span>);<br>      settings.put(<span class="hljs-string">&quot;login&quot;</span>, <span class="hljs-literal">true</span>);<br>      <span class="hljs-type">String</span> <span class="hljs-variable">productName</span> <span class="hljs-operator">=</span> SysConfig.INFO.get(<span class="hljs-string">&quot;product_name&quot;</span>, CurrentLocale.getMessage(<span class="hljs-string">&quot;product_name_secret&quot;</span>));<br>      <span class="hljs-keyword">if</span> (Strings.isNullOrEmpty(productName)) &#123;<br>         productName = CurrentLocale.getMessage(<span class="hljs-string">&quot;product_name_secret&quot;</span>);<br>         settings.put(<span class="hljs-string">&quot;property&quot;</span>, <span class="hljs-literal">true</span>);<br>         settings.put(<span class="hljs-string">&quot;series&quot;</span>, CurrentLocale.getMessage(<span class="hljs-string">&quot;product_series&quot;</span>));<br>         settings.put(<span class="hljs-string">&quot;support&quot;</span>, CurrentLocale.getMessage(<span class="hljs-string">&quot;product_company&quot;</span>));<br>         settings.put(<span class="hljs-string">&quot;holder&quot;</span>, CurrentLocale.getMessage(<span class="hljs-string">&quot;product_series&quot;</span>));<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>         settings.put(<span class="hljs-string">&quot;property&quot;</span>, <span class="hljs-literal">false</span>);<br>         settings.put(<span class="hljs-string">&quot;series&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>         settings.put(<span class="hljs-string">&quot;support&quot;</span>, SysConfig.INFO.get(<span class="hljs-string">&quot;product_company&quot;</span>, <span class="hljs-string">&quot;&quot;</span>));<br>         settings.put(<span class="hljs-string">&quot;holder&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>      &#125;<br><br>      settings.put(<span class="hljs-string">&quot;title&quot;</span>, productName + <span class="hljs-string">&quot; &quot;</span> + version2.toString());<br>      others.put(<span class="hljs-string">&quot;type&quot;</span>, <span class="hljs-string">&quot;form&quot;</span>);<br>      others.put(<span class="hljs-string">&quot;link&quot;</span>, <span class="hljs-literal">false</span>);<br>      others.put(<span class="hljs-string">&quot;slogan&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>      others.put(<span class="hljs-string">&quot;forgot_pass&quot;</span>, <span class="hljs-literal">false</span>);<br>      others.put(<span class="hljs-string">&quot;signup&quot;</span>, <span class="hljs-literal">false</span>);<br>      <span class="hljs-type">Map</span> <span class="hljs-variable">auth</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>      auth.put(<span class="hljs-string">&quot;admin&quot;</span>, others);<br>      settings.put(<span class="hljs-string">&quot;auth&quot;</span>, auth);<br>      settings.put(<span class="hljs-string">&quot;product_type&quot;</span>, SysConfig.INFO.getAsInt(<span class="hljs-string">&quot;system_type&quot;</span>, <span class="hljs-number">1</span>));<br>      settings.put(<span class="hljs-string">&quot;lang&quot;</span>, CurrentLocale.getLocale().toLanguageTag());<br>      obj.put(<span class="hljs-string">&quot;setting&quot;</span>, settings);<br>      <span class="hljs-keyword">return</span> obj;<br>   &#125;<br><br>   <span class="hljs-meta">@IgnoreTokenRestful</span><br>   <span class="hljs-meta">@RequestMapping(</span><br><span class="hljs-meta">      value = &#123;&quot;config&quot;&#125;,</span><br><span class="hljs-meta">      method = &#123;RequestMethod.GET&#125;</span><br><span class="hljs-meta">   )</span><br>   <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">config</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-type">Map</span> <span class="hljs-variable">configMap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();<br>      <span class="hljs-type">JsonObj</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObj</span>(<span class="hljs-literal">true</span>);<br>      obj.appendData(configMap);<br>      configMap.put(<span class="hljs-string">&quot;monitor&quot;</span>, <span class="hljs-literal">true</span>);<br>      configMap.put(<span class="hljs-string">&quot;http401&quot;</span>, <span class="hljs-literal">true</span>);<br>      configMap.put(<span class="hljs-string">&quot;http502&quot;</span>, <span class="hljs-literal">true</span>);<br>      configMap.put(<span class="hljs-string">&quot;monitor_time&quot;</span>, <span class="hljs-number">1000</span>);<br>      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.isCasLoginModel()) &#123;<br>         configMap.put(<span class="hljs-string">&quot;monitor&quot;</span>, <span class="hljs-literal">true</span>);<br>         configMap.put(<span class="hljs-string">&quot;http401&quot;</span>, <span class="hljs-literal">false</span>);<br>         configMap.put(<span class="hljs-string">&quot;http502&quot;</span>, <span class="hljs-literal">false</span>);<br>         configMap.put(<span class="hljs-string">&quot;monitor_time&quot;</span>, <span class="hljs-number">10000</span>);<br>      &#125;<br><br>      <span class="hljs-keyword">return</span> obj;<br>   &#125;<br><br>   <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isCasLoginModel</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> CasModelManager.isCasModel();<br>   &#125;<br><br>   <span class="hljs-meta">@BaseLineAssetAdapterAdvisor</span>.BaseLineLimit<br>   <span class="hljs-meta">@RequestMapping(</span><br><span class="hljs-meta">      value = &#123;&quot;profile&quot;&#125;,</span><br><span class="hljs-meta">      method = &#123;RequestMethod.GET&#125;</span><br><span class="hljs-meta">   )</span><br>   <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">profile</span><span class="hljs-params">(HttpServletRequest request)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>      <span class="hljs-type">Integer</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> (Integer)IdentitySupplier.userIdFromRequest.supplyWith(request);<br>      <span class="hljs-type">User</span> <span class="hljs-variable">u</span> <span class="hljs-operator">=</span> (User)<span class="hljs-built_in">this</span>.userService.queryById(userId);<br>      Validate.notNull(u, <span class="hljs-string">&quot;user.login.error.notExist&quot;</span>);<br>      <span class="hljs-type">JsonObj</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObj</span>(<span class="hljs-literal">true</span>);<br>      obj.put(<span class="hljs-string">&quot;name&quot;</span>, u.getUsername());<br>      obj.put(<span class="hljs-string">&quot;role&quot;</span>, <span class="hljs-built_in">this</span>.userService.queryRole(userId).getName());<br>      obj.put(<span class="hljs-string">&quot;avatar&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>      <span class="hljs-keyword">return</span> obj;<br>   &#125;<br><br>   <span class="hljs-meta">@PostConstruct</span><br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> &#123;<br>      UserSessionManagerFactory.getInstance().registerSessionCallback((sid, e) -&gt; &#123;<br>         <span class="hljs-keyword">switch</span>(e) &#123;<br>         <span class="hljs-keyword">case</span> expiration:<br>            <span class="hljs-keyword">try</span> &#123;<br>               <span class="hljs-type">Integer</span> <span class="hljs-variable">uid</span> <span class="hljs-operator">=</span> (Integer)IdentitySupplier.userIdFromSessionId.supplyWith(sid);<br>               <span class="hljs-type">UserService</span> <span class="hljs-variable">bean</span> <span class="hljs-operator">=</span> (UserService)SpringContext.getBean(UserService.class);<br>               <span class="hljs-type">User</span> <span class="hljs-variable">u</span> <span class="hljs-operator">=</span> (User)bean.queryById(uid);<br>               LogAdder.add(u.getUsername(), u.getId(), (String)<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;access.log.system.event.65&quot;</span>, <span class="hljs-string">&quot;access.log.system.desct.65&quot;</span>, <span class="hljs-literal">true</span>, <span class="hljs-number">3</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (Exception var5) &#123;<br>            &#125;<br>         <span class="hljs-keyword">default</span>:<br>         &#125;<br>      &#125;);<br>   &#125;<br><br>   <span class="hljs-meta">@IgnoreTokenRestful</span><br>   <span class="hljs-meta">@RequestMapping(</span><br><span class="hljs-meta">      value = &#123;&quot;auth/tokens&quot;&#125;,</span><br><span class="hljs-meta">      method = &#123;RequestMethod.POST&#125;</span><br><span class="hljs-meta">   )</span><br>   <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">postTokens</span><span class="hljs-params">(HttpServletRequest req, <span class="hljs-meta">@RequestHeader</span> String times, <span class="hljs-meta">@RequestHeader</span> String hash, String username, String password, String captcha, Integer type, String dynamic)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>      <span class="hljs-type">Integer</span> <span class="hljs-variable">product_type</span> <span class="hljs-operator">=</span> SysConfig.INFO.getAsInt(<span class="hljs-string">&quot;system_type&quot;</span>, <span class="hljs-number">1</span>);<br>      SYSTEMTYPE systemtype;<br>      <span class="hljs-keyword">if</span> (type == <span class="hljs-literal">null</span>) &#123;<br>         systemtype = SYSTEMTYPE.valueOf(product_type);<br>         <span class="hljs-keyword">switch</span>(systemtype) &#123;<br>         <span class="hljs-keyword">case</span> DEFAULT:<br>         <span class="hljs-keyword">case</span> SECRET:<br>            type = LOGIN.TRADITION.getValue();<br>            <span class="hljs-keyword">break</span>;<br>         <span class="hljs-keyword">case</span> FACTOR:<br>            type = LOGIN.TWOFACTOR.getValue();<br>         &#125;<br>      &#125;<br><br>      systemtype = <span class="hljs-literal">null</span>;<br>      <span class="hljs-type">LOGIN</span> <span class="hljs-variable">login</span> <span class="hljs-operator">=</span> LOGIN.fromByValue(type);<br>      Object o;<br>      <span class="hljs-keyword">switch</span>(login) &#123;<br>      <span class="hljs-keyword">case</span> TRADITION:<br>         o = <span class="hljs-built_in">this</span>.loginByTradition(req, times, hash, username, password, captcha);<br>         <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> TWOFACTOR:<br>         o = <span class="hljs-built_in">this</span>.loginByTwoFactor(req, username, password, dynamic, times, hash);<br>         <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">default</span>:<br>         <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AppException</span>(<span class="hljs-string">&quot;user.login.error.unknownLogin&quot;</span>, <span class="hljs-string">&quot;user.login.error.unknownLogin&quot;</span>);<br>      &#125;<br><br>      req.getSession().invalidate();<br>      <span class="hljs-keyword">if</span> (ArrayUtils.isNotEmpty(req.getCookies())) &#123;<br>         <span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie</span> <span class="hljs-operator">=</span> req.getCookies()[<span class="hljs-number">0</span>];<br>         cookie.setMaxAge(<span class="hljs-number">0</span>);<br>      &#125;<br><br>      <span class="hljs-keyword">return</span> o;<br>   &#125;<br><br>   <span class="hljs-keyword">private</span> Object <span class="hljs-title function_">loginByTradition</span><span class="hljs-params">(HttpServletRequest req, String times, String hash, String username, String password, String captcha)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>      <span class="hljs-type">String</span> <span class="hljs-variable">logEvent</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;access.log.system.55.event&quot;</span>;<br><br>      <span class="hljs-keyword">try</span> &#123;<br>         <span class="hljs-type">boolean</span> <span class="hljs-variable">code</span> <span class="hljs-operator">=</span> SysConfig.DEFAULT.getAsInt(SysSetAction.SetItem.verification_code.name(), <span class="hljs-number">1</span>) == <span class="hljs-number">1</span>;<br>         <span class="hljs-keyword">if</span> (!code || !((String)verificationCodeMap.get(hash)).equals(<span class="hljs-string">&quot;&quot;</span>) &amp;&amp; captcha.toLowerCase().equals(((String)verificationCodeMap.get(hash)).toLowerCase())) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.logining(req, username, password, times, hash, logEvent, <span class="hljs-string">&quot;access.log.system.55.desct&quot;</span>);<br>         &#125; <span class="hljs-keyword">else</span> &#123;<br>            verificationCodeMap.invalidate(hash);<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AppException</span>(<span class="hljs-string">&quot;user.login.warn.codeError&quot;</span>);<br>         &#125;<br>      &#125; <span class="hljs-keyword">catch</span> (Exception var14) &#123;<br>         <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;access.log.system.56.desct&quot;</span>;<br>         <span class="hljs-keyword">if</span> (var14 <span class="hljs-keyword">instanceof</span> AppException) &#123;<br>            msg = var14.getMessage();<br>            <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>();<br>            Object[] params = ((AppException)var14).getParams();<br>            <span class="hljs-keyword">if</span> (params != <span class="hljs-literal">null</span> &amp;&amp; params.length &gt; <span class="hljs-number">0</span>) &#123;<br>               msg = msg + <span class="hljs-string">&quot;____&quot;</span>;<br><br>               <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; params.length; ++i) &#123;<br>                  <span class="hljs-type">Object</span> <span class="hljs-variable">ob</span> <span class="hljs-operator">=</span> params[i];<br>                  sb.append(ob).append(<span class="hljs-string">&quot;,&quot;</span>);<br>               &#125;<br><br>               msg = msg + sb.substring(<span class="hljs-number">0</span>, sb.length() - <span class="hljs-number">1</span>);<br>            &#125;<br>         &#125;<br><br>         <span class="hljs-keyword">if</span> (Strings.isNullOrEmpty(username)) &#123;<br>            username = <span class="hljs-string">&quot;access.log.system.57.event&quot;</span>;<br>         &#125;<br><br>         LogAdder.add(username, -<span class="hljs-number">1</span>, req.getRemoteHost(), logEvent, msg, <span class="hljs-literal">false</span>, <span class="hljs-number">3</span>);<br>         <span class="hljs-keyword">throw</span> var14;<br>      &#125;<br>   &#125;<br><br>   <span class="hljs-keyword">private</span> Object <span class="hljs-title function_">logining</span><span class="hljs-params">(HttpServletRequest req, String username, String password, String times, String hash, String logEvent, String logDesct)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>      <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObj</span>(<span class="hljs-literal">true</span>);<br>      <span class="hljs-type">JsonObj</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObj</span>(<span class="hljs-literal">true</span>);<br><br>      JsonObj user;<br>      <span class="hljs-keyword">try</span> &#123;<br>         user = <span class="hljs-built_in">this</span>.login(req, username, password, <span class="hljs-string">&quot;&quot;</span>, times);<br>      &#125; <span class="hljs-keyword">catch</span> (Exception var17) &#123;<br>         verificationCodeMap.invalidate(hash);<br>         <span class="hljs-keyword">if</span> (var17 <span class="hljs-keyword">instanceof</span> AppException) &#123;<br>            <span class="hljs-keyword">throw</span> var17;<br>         &#125;<br><br>         <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AppException</span>(var17.getMessage());<br>      &#125;<br><br>      <span class="hljs-type">Integer</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> (Integer)user.get(<span class="hljs-string">&quot;userId&quot;</span>);<br>      <span class="hljs-type">User</span> <span class="hljs-variable">user1</span> <span class="hljs-operator">=</span> (User)<span class="hljs-built_in">this</span>.userService.queryById(userId);<br>      <span class="hljs-keyword">if</span> (user1 == <span class="hljs-literal">null</span>) &#123;<br>         <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AppException</span>(<span class="hljs-string">&quot;system.common.error.illegalLogin&quot;</span>, <span class="hljs-string">&quot;system.common.error.illegalLogin&quot;</span>);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>         <span class="hljs-type">Integer</span> <span class="hljs-variable">roleId</span> <span class="hljs-operator">=</span> user1.getRoleId();<br>         <span class="hljs-type">String</span> <span class="hljs-variable">sid</span> <span class="hljs-operator">=</span> (String)IdentitySupplier.userIdToSessionId.supplyWith(userId);<br>         token.put(<span class="hljs-string">&quot;token&quot;</span>, sid);<br>         verificationCodeMap.invalidate(hash);<br>         <span class="hljs-keyword">if</span> (SysConfig.DEFAULT.getAsLong(<span class="hljs-string">&quot;last_modify_pwd_&quot;</span> + userId, <span class="hljs-number">0L</span>) == <span class="hljs-number">0L</span>) &#123;<br>            SysConfig.DEFAULT.set(<span class="hljs-string">&quot;last_modify_pwd_&quot;</span> + userId, System.currentTimeMillis());<br>         &#125;<br><br>         req.setAttribute(<span class="hljs-string">&quot;userId&quot;</span>, userId);<br>         LogAdder.add(user1.getUsername(), userId, req.getRemoteHost(), logEvent, logDesct, <span class="hljs-literal">true</span>, <span class="hljs-number">3</span>);<br>         <span class="hljs-type">int</span> <span class="hljs-variable">timeout</span> <span class="hljs-operator">=</span> SysConfig.DEFAULT.getAsInt(SysSetAction.SetItem.timeout_exit.name(), <span class="hljs-number">30</span>);<br>         <span class="hljs-type">String</span> <span class="hljs-variable">k_currLoginClient</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;currLoginClient&quot;</span>;<br>         <span class="hljs-type">UserSessionManager</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> UserSessionManagerFactory.getInstance();<br>         ((Set)IdentitySupplier.sameUserSessionIdsByUid.supplyWith(userId)).forEach((otherSid) -&gt; &#123;<br>            log.debug(<span class="hljs-string">&quot;invalid other sid &#x27;&#123;&#125;&#x27; with same uid &#x27;&#123;&#125;&#x27;&quot;</span>, otherSid, userId);<br>            instance.invalidateSession(otherSid);<br>         &#125;);<br>         instance.initailizeSession(() -&gt; &#123;<br>            <span class="hljs-keyword">return</span> sid;<br>         &#125;, (<span class="hljs-type">long</span>)timeout, TimeUnit.MINUTES);<br>         instance.putIntoSession(sid, <span class="hljs-string">&quot;user&quot;</span>, user1);<br>         instance.putIntoSession(sid, k_currLoginClient, req.getRemoteHost());<br>         <span class="hljs-keyword">return</span> token;<br>      &#125;<br>   &#125;<br><br>   <span class="hljs-keyword">private</span> Object <span class="hljs-title function_">loginByTwoFactor</span><span class="hljs-params">(HttpServletRequest request, String username, String password, String dynamic, String times, String hash)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>      <span class="hljs-type">String</span> <span class="hljs-variable">logEvent</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;access.log.system.55.event&quot;</span>;<br><br>      <span class="hljs-keyword">try</span> &#123;<br>         <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">this</span>.checkCode(dynamic, times, username)) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AppException</span>(<span class="hljs-string">&quot;user.login.error.failiedCode&quot;</span>, <span class="hljs-string">&quot;user.login.error.failiedCode&quot;</span>);<br>         &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.logining(request, username, password, times, hash, logEvent, <span class="hljs-string">&quot;access.log.system.55.desct2&quot;</span>);<br>         &#125;<br>      &#125; <span class="hljs-keyword">catch</span> (Exception var10) &#123;<br>         <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> var10 <span class="hljs-keyword">instanceof</span> AppException ? var10.getMessage() : <span class="hljs-string">&quot;access.log.system.56.desct&quot;</span>;<br>         <span class="hljs-keyword">if</span> (Strings.isNullOrEmpty(username)) &#123;<br>            username = <span class="hljs-string">&quot;access.log.system.57.event&quot;</span>;<br>         &#125;<br><br>         LogAdder.add(username, -<span class="hljs-number">1</span>, request.getRemoteHost(), logEvent, msg, <span class="hljs-literal">false</span>, <span class="hljs-number">3</span>);<br>         <span class="hljs-keyword">throw</span> var10;<br>      &#125;<br>   &#125;<br><br>   <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkCode</span><span class="hljs-params">(String code, String times, String username)</span> &#123;<br>      <span class="hljs-type">boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br>      Validate.notEmpty(code, <span class="hljs-string">&quot;user.login.error.codeEmpty&quot;</span>);<br>      <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>      user.setUsername(username);<br>      user = (User)<span class="hljs-built_in">this</span>.userService.queryOne(user);<br>      Validate.notNull(user, <span class="hljs-string">&quot;user.login.error.notExist&quot;</span>);<br>      <span class="hljs-type">File</span> <span class="hljs-variable">seed</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>      <span class="hljs-type">Role</span> <span class="hljs-variable">role</span> <span class="hljs-operator">=</span> (Role)<span class="hljs-built_in">this</span>.roleService.queryById(user.getRoleId());<br>      <span class="hljs-keyword">if</span> (role.getName().contains(CurrentLocale.getMessage(<span class="hljs-string">&quot;role.admin&quot;</span>))) &#123;<br>         seed = <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(Constant.FEITIANCHENGXIN_DIR, <span class="hljs-string">&quot;seed.txt&quot;</span>);<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (role.getName().contains(CurrentLocale.getMessage(<span class="hljs-string">&quot;role.operator&quot;</span>))) &#123;<br>         seed = <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(Constant.FEITIANCHENGXIN_DIR, <span class="hljs-string">&quot;seed_oper.txt&quot;</span>);<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (role.getName().contains(CurrentLocale.getMessage(<span class="hljs-string">&quot;role.auditor&quot;</span>))) &#123;<br>         seed = <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(Constant.FEITIANCHENGXIN_DIR, <span class="hljs-string">&quot;seed_auditor.txt&quot;</span>);<br>      &#125;<br><br>      <span class="hljs-keyword">if</span> (seed != <span class="hljs-literal">null</span> &amp;&amp; seed.exists()) &#123;<br>         <span class="hljs-keyword">try</span> &#123;<br>            code = UserHelper.getInputPassword(username, code, times);<br>            FeitianchengxinCode.load();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">validate</span> <span class="hljs-operator">=</span> FeitianchengxinCode.validate(seed.getAbsolutePath(), code);<br>            <span class="hljs-keyword">if</span> (validate == <span class="hljs-number">0</span>) &#123;<br>               flag = <span class="hljs-literal">true</span>;<br>            &#125;<br><br>            <span class="hljs-keyword">return</span> flag;<br>         &#125; <span class="hljs-keyword">catch</span> (Exception var9) &#123;<br>            log.error(var9.getMessage());<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AppException</span>(<span class="hljs-string">&quot;动态口令验证错误&quot;</span>, <span class="hljs-string">&quot;user.login.error.verifyError&quot;</span>);<br>         &#125;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>         <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AppException</span>(<span class="hljs-string">&quot;miss seed file !&quot;</span>);<br>      &#125;<br>   &#125;<br><br>   <span class="hljs-meta">@RequestMapping(</span><br><span class="hljs-meta">      value = &#123;&quot;auth/tokens&quot;&#125;,</span><br><span class="hljs-meta">      method = &#123;RequestMethod.GET&#125;</span><br><span class="hljs-meta">   )</span><br>   <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getTokens</span><span class="hljs-params">(HttpServletRequest req)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>      UserSessionManagerFactory.getInstance().touchSession(IdentitySupplier.sessionIdFromRequest.supplyWith(req));<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObj</span>(<span class="hljs-literal">true</span>);<br>   &#125;<br><br>   <span class="hljs-meta">@RequestMapping(</span><br><span class="hljs-meta">      value = &#123;&quot;auth/tokens&quot;&#125;,</span><br><span class="hljs-meta">      method = &#123;RequestMethod.DELETE&#125;</span><br><span class="hljs-meta">   )</span><br>   <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">deleteTokens</span><span class="hljs-params">(HttpServletRequest req)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>      <span class="hljs-keyword">synchronized</span>(<span class="hljs-built_in">this</span>) &#123;<br>         <span class="hljs-type">UserSessionManager</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> UserSessionManagerFactory.getInstance();<br>         <span class="hljs-type">String</span> <span class="hljs-variable">sid</span> <span class="hljs-operator">=</span> (String)IdentitySupplier.sessionIdFromRequest.supplyWith(req);<br>         log.warn(<span class="hljs-string">&quot;request delete sid:&#123;&#125;&quot;</span>, sid);<br>         <span class="hljs-keyword">if</span> (instance.touchSession(sid)) &#123;<br>            <span class="hljs-type">User</span> <span class="hljs-variable">u</span> <span class="hljs-operator">=</span> (User)JSON.parse(instance.getFromSession(sid, <span class="hljs-string">&quot;user&quot;</span>), User.class);<br>            <span class="hljs-keyword">if</span> (u != <span class="hljs-literal">null</span>) &#123;<br>               LogAdder.add(u.getUsername(), u.getId(), req.getRemoteAddr(), <span class="hljs-string">&quot;access.log.system.58.event&quot;</span>, <span class="hljs-string">&quot;access.log.system.58.desct&quot;</span>, <span class="hljs-literal">true</span>, <span class="hljs-number">3</span>);<br>            &#125;<br><br>            instance.invalidateSession(sid);<br>         &#125;<br>      &#125;<br><br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObj</span>(<span class="hljs-literal">true</span>);<br>   &#125;<br><br>   <span class="hljs-meta">@IgnoreTokenRestful</span><br>   <span class="hljs-meta">@RequestMapping(</span><br><span class="hljs-meta">      value = &#123;&quot;auth/captcha&quot;&#125;,</span><br><span class="hljs-meta">      method = &#123;RequestMethod.GET&#125;</span><br><span class="hljs-meta">   )</span><br>   <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">verificationCode</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>      <span class="hljs-type">JsonObj</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObj</span>(<span class="hljs-literal">true</span>);<br>      <span class="hljs-type">boolean</span> <span class="hljs-variable">code</span> <span class="hljs-operator">=</span> SysConfig.DEFAULT.getAsInt(SysSetAction.SetItem.verification_code.name(), <span class="hljs-number">1</span>) == <span class="hljs-number">1</span>;<br>      <span class="hljs-keyword">if</span> (!ProductUtil.isSeed() &amp;&amp; code) &#123;<br>         obj.put(<span class="hljs-string">&quot;has_captcha&quot;</span>, <span class="hljs-literal">true</span>);<br>         <span class="hljs-type">String</span> <span class="hljs-variable">uuid</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString();<br>         obj.put(<span class="hljs-string">&quot;hash&quot;</span>, uuid);<br>         Object[] info = VerificationCodeUtils.generate();<br>         <span class="hljs-type">BASE64Encoder</span> <span class="hljs-variable">encoder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BASE64Encoder</span>();<br>         obj.put(<span class="hljs-string">&quot;base64&quot;</span>, encoder.encode((<span class="hljs-type">byte</span>[])((<span class="hljs-type">byte</span>[])info[<span class="hljs-number">1</span>])));<br>         verificationCodeMap.put(uuid, info[<span class="hljs-number">0</span>].toString());<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>         obj.put(<span class="hljs-string">&quot;has_captcha&quot;</span>, <span class="hljs-literal">false</span>);<br>      &#125;<br><br>      <span class="hljs-keyword">return</span> obj;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> JsonObj <span class="hljs-title function_">login</span><span class="hljs-params">(HttpServletRequest req, <span class="hljs-meta">@NotNull(message = &quot;oval.verify.normal.msg4-1&quot;)</span> String username, <span class="hljs-meta">@NotNull(message = &quot;oval.verify.normal.msg4-1&quot;)</span> String password, <span class="hljs-meta">@NotNull(message = &quot;oval.verify.normal.msg4-1&quot;)</span> String vcode, <span class="hljs-meta">@NotNull(message = &quot;oval.verify.normal.msg4-1&quot;)</span> String times)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>      <span class="hljs-type">SysConfig</span> <span class="hljs-variable">sysConfig</span> <span class="hljs-operator">=</span> SysConfig.DEFAULT;<br>      <span class="hljs-type">User</span> <span class="hljs-variable">u</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(username);<br>      u = (User)<span class="hljs-built_in">this</span>.userService.queryOne(u);<br>      <span class="hljs-keyword">if</span> (u == <span class="hljs-literal">null</span>) &#123;<br>         <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AppException</span>(<span class="hljs-string">&quot;user.login.error.hasError&quot;</span>);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>         <span class="hljs-type">int</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> u.getId();<br>         <span class="hljs-type">int</span> <span class="hljs-variable">lockWay</span> <span class="hljs-operator">=</span> SysConfig.DEFAULT.getAsInt(SysSetAction.SetItem.login_lock_way.name(), ProductUtil.isSecret() ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>);<br>         <span class="hljs-type">Long</span> <span class="hljs-variable">timeout</span> <span class="hljs-operator">=</span> SysConfig.DEFAULT.getAsLong(SysSetAction.SetItem.max_time_loginfailed.name(), <span class="hljs-number">5L</span>) * <span class="hljs-number">60L</span>;<br>         <span class="hljs-keyword">if</span> (u.getDisabled() == <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-keyword">throw</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">AppException</span>(<span class="hljs-string">&quot;user.login.error.disableLogin&quot;</span>)).setParams(username);<br>         &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">if</span> (lockWay == <span class="hljs-number">1</span>) &#123;<br>               <span class="hljs-type">Long</span> <span class="hljs-variable">lockTime</span> <span class="hljs-operator">=</span> u.getLockTime();<br>               <span class="hljs-keyword">if</span> (lockTime != <span class="hljs-literal">null</span>) &#123;<br>                  <span class="hljs-type">long</span> <span class="hljs-variable">leftTime</span> <span class="hljs-operator">=</span> (System.currentTimeMillis() - lockTime) / <span class="hljs-number">1000L</span> - timeout;<br>                  <span class="hljs-keyword">if</span> (leftTime &lt;= <span class="hljs-number">0L</span>) &#123;<br>                     <span class="hljs-keyword">throw</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">AppException</span>(<span class="hljs-string">&quot;user.login.error.lockUser&quot;</span>)).setParams(Math.abs(leftTime));<br>                  &#125;<br>               &#125;<br>            &#125;<br><br>            <span class="hljs-keyword">if</span> (lockWay == <span class="hljs-number">2</span>) &#123;<br>               <span class="hljs-type">Map</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.redisTemplate.boundHashOps(<span class="hljs-string">&quot;ipaddrLock&quot;</span>).entries();<br>               <span class="hljs-type">Long</span> <span class="hljs-variable">lockTime</span> <span class="hljs-operator">=</span> map == <span class="hljs-literal">null</span> ? <span class="hljs-literal">null</span> : (Long)map.get(req.getRemoteAddr());<br>               <span class="hljs-keyword">if</span> (lockTime != <span class="hljs-literal">null</span>) &#123;<br>                  <span class="hljs-type">long</span> <span class="hljs-variable">leftTime</span> <span class="hljs-operator">=</span> (System.currentTimeMillis() - lockTime) / <span class="hljs-number">1000L</span> - timeout;<br>                  <span class="hljs-keyword">if</span> (leftTime &lt;= <span class="hljs-number">0L</span>) &#123;<br>                     <span class="hljs-keyword">throw</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">AppException</span>(<span class="hljs-string">&quot;user.login.error.lockIp&quot;</span>)).setParams(Math.abs(leftTime));<br>                  &#125;<br><br>                  <span class="hljs-built_in">this</span>.setRedisIpaddr(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>());<br>               &#125;<br>            &#125;<br><br>            <span class="hljs-keyword">if</span> (!UserHelper.decryptGeneratePwd(username, password, times).equals(u.getPassword())) &#123;<br>               <span class="hljs-keyword">if</span> (lockWay != <span class="hljs-number">0</span>) &#123;<br>                  <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> WebContextUtil.getObjInSession(req, <span class="hljs-string">&quot;lock_times&quot;</span>);<br>                  <span class="hljs-type">int</span> <span class="hljs-variable">errorTimes</span> <span class="hljs-operator">=</span> obj == <span class="hljs-literal">null</span> ? <span class="hljs-number">0</span> : Integer.parseInt(obj.toString());<br>                  ++errorTimes;<br>                  <span class="hljs-keyword">if</span> (errorTimes == sysConfig.getAsInt(SysSetAction.SetItem.max_num_loginfailed.name(), <span class="hljs-number">5</span>)) &#123;<br>                     <span class="hljs-type">String</span> <span class="hljs-variable">errorTips</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;用户名或者密码错误，&quot;</span>;<br>                     <span class="hljs-type">String</span> <span class="hljs-variable">msgCode</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;user.login.error.hasError&quot;</span>;<br>                     <span class="hljs-type">Long</span> <span class="hljs-variable">currentTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>                     u.setLockTime(currentTime);<br>                     <span class="hljs-keyword">if</span> (lockWay == <span class="hljs-number">1</span>) &#123;<br>                        errorTips = errorTips + <span class="hljs-string">&quot;该账户已被锁定！&quot;</span>;<br>                        msgCode = <span class="hljs-string">&quot;user.login.error.lockUser2&quot;</span>;<br>                     &#125; <span class="hljs-keyword">else</span> &#123;<br>                        errorTips = errorTips + <span class="hljs-string">&quot;该地址已被锁定！&quot;</span>;<br>                        msgCode = <span class="hljs-string">&quot;user.login.error.lockIp2&quot;</span>;<br>                        <span class="hljs-type">Map</span> <span class="hljs-variable">newHash</span> <span class="hljs-operator">=</span> Maps.newHashMap();<br>                        newHash.put(req.getRemoteAddr(), currentTime);<br>                        <span class="hljs-built_in">this</span>.setRedisIpaddr(newHash);<br>                     &#125;<br><br>                     <span class="hljs-built_in">this</span>.userService.updateById(userId, u);<br>                     req.getSession().setAttribute(<span class="hljs-string">&quot;lock_times&quot;</span>, <span class="hljs-number">0</span>);<br>                     <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AppException</span>(msgCode, msgCode);<br>                  &#125;<br><br>                  req.getSession().setAttribute(<span class="hljs-string">&quot;lock_times&quot;</span>, errorTimes);<br>               &#125;<br><br>               <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LoginException</span>(<span class="hljs-string">&quot;user.login.error.hasError&quot;</span>);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>               <span class="hljs-built_in">this</span>.updateConfig(u);<br>               req.getSession().removeAttribute(<span class="hljs-string">&quot;lock_times&quot;</span>);<br>               u.setLastLoginTime(System.currentTimeMillis());<br>               u.setLockTime((Long)<span class="hljs-literal">null</span>);<br>               u.setLastLoginClient(req.getRemoteAddr());<br>               <span class="hljs-built_in">this</span>.userService.updateById(userId, u);<br>               <span class="hljs-type">JsonObj</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObj</span>(<span class="hljs-literal">true</span>);<br><br>               <span class="hljs-keyword">try</span> &#123;<br>                  obj.put(<span class="hljs-string">&quot;userId&quot;</span>, userId);<br>               &#125; <span class="hljs-keyword">catch</span> (Exception var17) &#123;<br>                  log.error(<span class="hljs-string">&quot;&quot;</span>, var17);<br>               &#125;<br><br>               <span class="hljs-keyword">return</span> obj;<br>            &#125;<br>         &#125;<br>      &#125;<br>   &#125;<br><br>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateConfig</span><span class="hljs-params">(User user)</span> &#123;<br>      <span class="hljs-type">Integer</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> user.getId();<br>      <span class="hljs-keyword">if</span> (userId == <span class="hljs-number">1</span> &amp;&amp; user.getLastLoginTime() == <span class="hljs-literal">null</span>) &#123;<br>         SysConfig.INFO.set(<span class="hljs-string">&quot;password_modify_AD&quot;</span>, <span class="hljs-number">1</span>);<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (userId == <span class="hljs-number">2</span> &amp;&amp; user.getLastLoginTime() == <span class="hljs-literal">null</span>) &#123;<br>         SysConfig.INFO.set(<span class="hljs-string">&quot;password_modify_AU&quot;</span>, <span class="hljs-number">1</span>);<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (userId == <span class="hljs-number">3</span> &amp;&amp; user.getLastLoginTime() == <span class="hljs-literal">null</span>) &#123;<br>         SysConfig.INFO.set(<span class="hljs-string">&quot;password_modify_OP&quot;</span>, <span class="hljs-number">1</span>);<br>      &#125;<br><br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setRedisIpaddr</span><span class="hljs-params">(Map newHash)</span> &#123;<br>      <span class="hljs-type">Map</span> <span class="hljs-variable">map</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.redisTemplate.boundHashOps(<span class="hljs-string">&quot;ipaddrLock&quot;</span>).entries();<br>      <span class="hljs-type">Long</span> <span class="hljs-variable">timeout</span> <span class="hljs-operator">=</span> SysConfig.DEFAULT.getAsLong(SysSetAction.SetItem.max_time_loginfailed.name(), <span class="hljs-number">5L</span>) * <span class="hljs-number">60L</span>;<br>      map.forEach((k, v) -&gt; &#123;<br>         <span class="hljs-type">long</span> <span class="hljs-variable">leftTime</span> <span class="hljs-operator">=</span> timeout - (System.currentTimeMillis() - v) / <span class="hljs-number">1000L</span>;<br>         <span class="hljs-keyword">if</span> (leftTime &gt; <span class="hljs-number">0L</span>) &#123;<br>            newHash.put(k, v);<br>         &#125;<br><br>      &#125;);<br>      <span class="hljs-keyword">if</span> (newHash.size() &gt; <span class="hljs-number">0</span>) &#123;<br>         <span class="hljs-built_in">this</span>.redisTemplate.boundHashOps(<span class="hljs-string">&quot;ipaddrLock&quot;</span>).putAll(newHash);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>         <span class="hljs-built_in">this</span>.redisTemplate.delete(<span class="hljs-string">&quot;ipaddrLock&quot;</span>);<br>      &#125;<br><br>   &#125;<br><br>   <span class="hljs-keyword">static</span> &#123;<br>      verificationCodeMap = CacheBuilder.newBuilder().softValues().maximumSize(<span class="hljs-number">20L</span>).expireAfterAccess(<span class="hljs-number">3L</span>, TimeUnit.MINUTES).build(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CacheLoader</span>() &#123;<br>         <span class="hljs-keyword">public</span> String <span class="hljs-title function_">load</span><span class="hljs-params">(String str)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>         &#125;<br>      &#125;);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="深信服"><a href="#深信服" class="headerlink" title="深信服"></a>深信服</h1><h2 id="AF（下一代防火墙）"><a href="#AF（下一代防火墙）" class="headerlink" title="AF（下一代防火墙）"></a>AF（下一代防火墙）</h2><p>和上面的方法接近，我用PVE，使用备份形式能够实现多设备同网关，然后再申请一个测试授权。</p><p>经测试，同一镜像文件下8095、8075，如果管理网口(第一个网口)的MAC地址一样，则网关ID一样。</p><p>授权相关验证程序拿到，但没时间做逆向分析，且存在大量的so库调用。</p><p>具体过程不便透露</p><h2 id="AC（上网-全网-行为管理系统）"><a href="#AC（上网-全网-行为管理系统）" class="headerlink" title="AC（上网&#x2F;全网 行为管理系统）"></a>AC（上网&#x2F;全网 行为管理系统）</h2><blockquote><p><a href="https://blog.csdn.net/gsls200808/article/details/121795415">底层密码为<code>当前密码</code>sangfornetwork</a></p></blockquote><hr><p>未完待续</p>]]></content>
    
    
    <categories>
      
      <category>技术/软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>记录</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>H5-9光猫的一些配置</title>
    <link href="/2001009/"/>
    <url>/2001009/</url>
    
    <content type="html"><![CDATA[<h2 id="获取-更改-超管密码"><a href="#获取-更改-超管密码" class="headerlink" title="获取&#x2F;更改 超管密码"></a>获取&#x2F;更改 超管密码</h2><h3 id="打开Telnet"><a href="#打开Telnet" class="headerlink" title="打开Telnet"></a>打开Telnet</h3><p>使用浏览器打开<a href="http://192.168.1.1/usr=CMCCAdmin&psw=aDm8H%25MdA&cmd=1&telnet.gch">http://192.168.1.1/usr=CMCCAdmin&psw=aDm8H%25MdA&cmd=1&telnet.gch</a><br>会出现如下提示<br><code>TelnetSet Success!</code></p><h3 id="使用telnet连接"><a href="#使用telnet连接" class="headerlink" title="使用telnet连接"></a>使用telnet连接</h3><p>用户名：<code>CMCCAdmin</code><br>密码：<code>aDm8H%MdA</code></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs text">%telnet 192.168.1.1<br>Trying 192.168.1.1...<br>Connected to 192.168.1.1.<br>Escape character is &#x27;^]&#x27;.<br><br>Login: CMCCAdmin<br>Password: <br>~ $ <br></code></pre></td></tr></table></figure><h3 id="配置超级管理员账号信息"><a href="#配置超级管理员账号信息" class="headerlink" title="配置超级管理员账号信息"></a>配置超级管理员账号信息</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">sidbg 1 DB set DevAuthInfo 0 User CMCCAdmin<br>sidbg 1 DB set DevAuthInfo 0 Pass aDm8H%MdA<br></code></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs text">~ $ sidbg 1 DB set DevAuthInfo 0 User CMCCAdmin<br>&lt;Tbl name=&quot;DevAuthInfo&quot; RowCount=&quot;2&quot;&gt;<br>        &lt;Row No=&quot;0&quot;&gt;<br>                &lt;DM name=&quot;ViewName&quot; val=&quot;IGD.AU1&quot;/&gt;<br>                &lt;DM name=&quot;Enable&quot; val=&quot;1&quot;/&gt;<br>                &lt;DM name=&quot;IsOnline&quot; val=&quot;0&quot;/&gt;<br>                &lt;DM name=&quot;AppID&quot; val=&quot;1&quot;/&gt;<br>                &lt;DM name=&quot;User&quot; val=&quot;******&quot;/&gt;<br>                &lt;DM name=&quot;Pass&quot; val=&quot;******&quot;/&gt;<br>                &lt;DM name=&quot;Level&quot; val=&quot;1&quot;/&gt;<br>                &lt;DM name=&quot;Extra&quot; val=&quot;&quot;/&gt;<br>                &lt;DM name=&quot;ExtraInt&quot; val=&quot;0&quot;/&gt;<br>        &lt;/Row&gt;<br>        &lt;Row No=&quot;1&quot;&gt;<br>                &lt;DM name=&quot;ViewName&quot; val=&quot;IGD.AU2&quot;/&gt;<br>                &lt;DM name=&quot;Enable&quot; val=&quot;1&quot;/&gt;<br>                &lt;DM name=&quot;IsOnline&quot; val=&quot;0&quot;/&gt;<br>                &lt;DM name=&quot;AppID&quot; val=&quot;1&quot;/&gt;<br>                &lt;DM name=&quot;User&quot; val=&quot;******&quot;/&gt;<br>                &lt;DM name=&quot;Pass&quot; val=&quot;******&quot;/&gt;<br>                &lt;DM name=&quot;Level&quot; val=&quot;2&quot;/&gt;<br>                &lt;DM name=&quot;Extra&quot; val=&quot;&quot;/&gt;<br>                &lt;DM name=&quot;ExtraInt&quot; val=&quot;0&quot;/&gt;<br>        &lt;/Row&gt;<br>&lt;/Tbl&gt;<br>~ $ sidbg 1 DB set DevAuthInfo 0 Pass aDm8H%MdA<br>&lt;Tbl name=&quot;DevAuthInfo&quot; RowCount=&quot;2&quot;&gt;<br>        &lt;Row No=&quot;0&quot;&gt;<br>                &lt;DM name=&quot;ViewName&quot; val=&quot;IGD.AU1&quot;/&gt;<br>                &lt;DM name=&quot;Enable&quot; val=&quot;1&quot;/&gt;<br>                &lt;DM name=&quot;IsOnline&quot; val=&quot;0&quot;/&gt;<br>                &lt;DM name=&quot;AppID&quot; val=&quot;1&quot;/&gt;<br>                &lt;DM name=&quot;User&quot; val=&quot;******&quot;/&gt;<br>                &lt;DM name=&quot;Pass&quot; val=&quot;******&quot;/&gt;<br>                &lt;DM name=&quot;Level&quot; val=&quot;1&quot;/&gt;<br>                &lt;DM name=&quot;Extra&quot; val=&quot;&quot;/&gt;<br>                &lt;DM name=&quot;ExtraInt&quot; val=&quot;0&quot;/&gt;<br>        &lt;/Row&gt;<br>        &lt;Row No=&quot;1&quot;&gt;<br>                &lt;DM name=&quot;ViewName&quot; val=&quot;IGD.AU2&quot;/&gt;<br>                &lt;DM name=&quot;Enable&quot; val=&quot;1&quot;/&gt;<br>                &lt;DM name=&quot;IsOnline&quot; val=&quot;0&quot;/&gt;<br>                &lt;DM name=&quot;AppID&quot; val=&quot;1&quot;/&gt;<br>                &lt;DM name=&quot;User&quot; val=&quot;******&quot;/&gt;<br>                &lt;DM name=&quot;Pass&quot; val=&quot;******&quot;/&gt;<br>                &lt;DM name=&quot;Level&quot; val=&quot;2&quot;/&gt;<br>                &lt;DM name=&quot;Extra&quot; val=&quot;&quot;/&gt;<br>                &lt;DM name=&quot;ExtraInt&quot; val=&quot;0&quot;/&gt;<br>        &lt;/Row&gt;<br>&lt;/Tbl&gt;<br></code></pre></td></tr></table></figure><p>此时可以直接使用浏览器登录超级管理员账号<br><a href="http://192.168.1.1/">http://192.168.1.1/</a></p><p>用户名：<code>CMCCAdmin</code><br>密码：<code>aDm8H%MdA</code></p><p>即可完成登录</p><h2 id="玩法-mipsle"><a href="#玩法-mipsle" class="headerlink" title="玩法 mipsle"></a>玩法 mipsle</h2><h3 id="代理（goproxy）"><a href="#代理（goproxy）" class="headerlink" title="代理（goproxy）"></a>代理（goproxy）</h3><p>下载<a href="https://github.com/snail007/goproxy/releases">goproxy</a></p><p>代理命令</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs text">./proxy socks -t tcp -p :38080 --udp-port 0 --udp -u ucu -D 123456 &amp;<br><br># socks 这里为使用的协议<br># :38080为监听的端口<br># ucu 为连接的用户名<br># 123456 为密码<br># 普通版没用户校验，怎么配置密码都没用，建议使用其他的工具<br><br></code></pre></td></tr></table></figure><h3 id="代理（xray）"><a href="#代理（xray）" class="headerlink" title="代理（xray）"></a>代理（xray）</h3><p>以下为xray的config.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;inbounds&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;port&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">38080</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;listen&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0.0.0.0&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;protocol&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;socks&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;settings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;auth&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;password&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;accounts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>          <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;user&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ucu&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;pass&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;123456&quot;</span><br>          <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;udp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;ip&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;192.168.50.254&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;sniffing&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;enabled&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;destOverride&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;http&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;tls&quot;</span><span class="hljs-punctuation">]</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;outbounds&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;protocol&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;freedom&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;settings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text"># socks 这里为使用的协议<br># :38080为监听的端口<br># ucu 为连接的用户名<br># 123456 为密码<br># ip 设备IP<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>技术/软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>光猫</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>目录结构</title>
    <link href="/README/"/>
    <url>/README/</url>
    
    <content type="html"><![CDATA[<h3 id="新编号"><a href="#新编号" class="headerlink" title="新编号"></a>新编号</h3><table><thead><tr><th>名称</th><th>简称</th><th>全称</th><th>范围</th></tr></thead><tbody><tr><td>未分类</td><td>un</td><td>Unclassed</td><td>2000001-2000999</td></tr><tr><td>技软</td><td>tc</td><td>Tech</td><td>2001001-2001999</td></tr><tr><td>点子</td><td>id</td><td>Idea</td><td>2002001-2002999</td></tr><tr><td>语录</td><td>qu</td><td>Quotes</td><td>2003001-2003999</td></tr><tr><td>日常</td><td>da</td><td>Daily</td><td>2004001-2004999</td></tr></tbody></table><hr><h3 id="旧编号"><a href="#旧编号" class="headerlink" title="旧编号"></a>旧编号</h3><p>6084.html.md</p><p>其中<code>6084.html</code>来自于以前的文章地址，目的是为了让有需要的人能够找到以前的文章</p><hr><h3 id="文章的-Head"><a href="#文章的-Head" class="headerlink" title="文章的 Head"></a>文章的 Head</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs markdown">---<br>title: 有意思的语录<span class="hljs-emphasis">_2</span><br><span class="hljs-emphasis">tags: []</span><br><span class="hljs-emphasis">categories:</span><br><span class="hljs-emphasis">  - 语录</span><br><span class="hljs-emphasis">date: 2024-08-24 15:07:25</span><br><span class="hljs-emphasis">author: 陈小可</span><br><span class="hljs-emphasis">excerpt: 遇到有意思的就收集</span><br><span class="hljs-emphasis">---</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>未分类</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>immich解决can&#39;t set healthcheck</title>
    <link href="/2001005/"/>
    <url>/2001005/</url>
    
    <content type="html"><![CDATA[<h3 id="参考来源"><a href="#参考来源" class="headerlink" title="参考来源"></a>参考来源</h3><p><a href="https://tieba.baidu.com/p/9057133310">https://tieba.baidu.com/p/9057133310</a></p><h3 id="解决过程"><a href="#解决过程" class="headerlink" title="解决过程"></a>解决过程</h3><blockquote><p>修改docker-compose.yml文件</p><blockquote><p>注释</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">start_interval:</span> <span class="hljs-string">30s</span><br></code></pre></td></tr></table></figure><p><a href="https://github.com/immich-app/immich/releases/tag/v1.126.1">https://github.com/immich-app/immich/releases/tag/v1.126.1</a><br>的docker-compose.yml第75行</p></blockquote></blockquote>]]></content>
    
    
    <categories>
      
      <category>技术/软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>immich</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Alist增加退出按钮</title>
    <link href="/2001001/"/>
    <url>/2001001/</url>
    
    <content type="html"><![CDATA[<h2 id="特别鸣谢"><a href="#特别鸣谢" class="headerlink" title="特别鸣谢"></a>特别鸣谢</h2><p>QQ昵称:<code>ZZZ</code></p><h2 id="自定义头部"><a href="#自定义头部" class="headerlink" title="自定义头部"></a>自定义头部</h2><h3 id="增加到上方菜单"><a href="#增加到上方菜单" class="headerlink" title="增加到上方菜单"></a>增加到上方菜单</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;DOMContentLoaded&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// 延迟 1 秒执行</span><br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-comment">// 创建一个新的按钮元素</span><br>      <span class="hljs-keyword">var</span> newButton = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;button&#x27;</span>);<br>      <span class="hljs-comment">// 设置按钮的类名</span><br>      newButton.<span class="hljs-property">className</span> = <span class="hljs-string">&#x27;custom-header-button&#x27;</span>;<br>      <span class="hljs-comment">// 设置按钮背景透明</span><br>      newButton.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span> = <span class="hljs-string">&#x27;transparent&#x27;</span>;<br>      newButton.<span class="hljs-property">style</span>.<span class="hljs-property">border</span> = <span class="hljs-string">&#x27;none&#x27;</span>; <span class="hljs-comment">// 移除边框，如果需要的话</span><br>      newButton.<span class="hljs-property">style</span>.<span class="hljs-property">borderRadius</span> = <span class="hljs-string">&#x27;50%&#x27;</span>; <span class="hljs-comment">// 使背景色呈现圆形</span><br>      newButton.<span class="hljs-property">style</span>.<span class="hljs-property">padding</span> = <span class="hljs-string">&#x27;4px&#x27;</span>; <span class="hljs-comment">// 增加一些内边距，使圆形背景更大一些</span><br>      newButton.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;flex&#x27;</span>; <span class="hljs-comment">// 使用 Flexbox 布局</span><br>      newButton.<span class="hljs-property">style</span>.<span class="hljs-property">justifyContent</span> = <span class="hljs-string">&#x27;center&#x27;</span>; <span class="hljs-comment">// 水平居中</span><br>      newButton.<span class="hljs-property">style</span>.<span class="hljs-property">alignItems</span> = <span class="hljs-string">&#x27;center&#x27;</span>; <span class="hljs-comment">// 垂直居中</span><br>      newButton.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">&#x27;32px&#x27;</span>; <span class="hljs-comment">// 确保按钮有足够的宽度</span><br>      newButton.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">&#x27;32px&#x27;</span>; <span class="hljs-comment">// 确保按钮有足够的高度</span><br>      newButton.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span> = <span class="hljs-string">&#x27;#cbe3fb&#x27;</span>; <span class="hljs-comment">// 设置背景颜色</span><br><br>      <span class="hljs-comment">// 创建SVG图标</span><br>      <span class="hljs-keyword">var</span> svgNS = <span class="hljs-string">&quot;http://www.w3.org/2000/svg&quot;</span>; <span class="hljs-comment">// SVG命名空间</span><br>      <span class="hljs-keyword">var</span> svgIcon = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElementNS</span>(svgNS, <span class="hljs-string">&quot;svg&quot;</span>);<br>      svgIcon.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;viewBox&quot;</span>, <span class="hljs-string">&quot;0 0 1042 1024&quot;</span>);<br>      svgIcon.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;height&quot;</span>, <span class="hljs-string">&quot;24&quot;</span>);<br>      svgIcon.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;width&quot;</span>, <span class="hljs-string">&quot;24&quot;</span>);<br><br>      <span class="hljs-comment">// 创建SVG路径（使用你提供的图标代码）</span><br>      <span class="hljs-keyword">var</span> path = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElementNS</span>(svgNS, <span class="hljs-string">&quot;path&quot;</span>);<br>      path.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;d&quot;</span>, <span class="hljs-string">&quot;M581.632 697.344l126.976 0 0 194.56q0 33.792-10.24 58.88t-27.136 40.96-39.424 23.552-48.128 7.68l-452.608 0q-24.576 0-48.128-9.728t-41.472-27.136-29.184-40.96-11.264-52.224l0-706.56q0-24.576 11.776-47.104t30.208-39.936 40.96-28.16 45.056-10.752l449.536 0q26.624 0 50.176 11.776t41.472 29.696 28.16 40.448 10.24 44.032l0 188.416-126.976 0 1.024-195.584-452.608 0-1.024 713.728 452.608 0 0-195.584zM1021.952 505.856q37.888 30.72 2.048 60.416-20.48 15.36-44.544 37.888t-50.176 46.592-51.712 47.616-47.104 40.96q-23.552 18.432-40.448 18.432t-16.896-24.576q2.048-14.336 0.512-35.84t-1.536-36.864q0-17.408-12.288-21.504t-29.696-4.096l-40.96 0-62.464 0q-34.816 0-73.216-0.512t-73.216-0.512l-62.464 0-41.984 0q-8.192 0-17.92-1.536t-17.408-6.656-12.288-14.336-4.608-23.552q0-19.456-0.512-46.08t0.512-47.104q0-27.648 13.312-37.888t43.008-9.216l33.792 0 59.392 0q32.768 0 70.144 0.512t71.168 0.512l61.44 0 38.912 0q25.6 1.024 43.52-4.096t17.92-22.528q0-14.336 1.024-32.256t1.024-32.256q0-23.552 12.8-29.696t32.256 9.216q19.456 16.384 45.568 38.4t52.736 45.056 52.736 45.568 47.616 39.936z&quot;</span>);<br>      path.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;fill&quot;</span>, <span class="hljs-string">&quot;#1296db&quot;</span>); <span class="hljs-comment">// 设置填充颜色</span><br>      svgIcon.<span class="hljs-title function_">appendChild</span>(path);<br><br>      <span class="hljs-comment">// 将SVG图标添加到按钮中</span><br>      newButton.<span class="hljs-title function_">appendChild</span>(svgIcon);<br><br>      <span class="hljs-comment">// 设置按钮的点击事件处理函数</span><br>      newButton.<span class="hljs-property">onclick</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">&#x27;token&#x27;</span>);<br>        <span class="hljs-comment">// 跳转到指定的URL</span><br>        <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">&#x27;/&#x27;</span>;<br>      &#125;;<br><br><br>      <span class="hljs-comment">// 设置鼠标悬停时的提示</span><br>      newButton.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;退出登录&#x27;</span>;<br><br>      <span class="hljs-comment">// 尝试获取目标&lt;div&gt;元素</span><br>      <span class="hljs-keyword">var</span> targetDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.header-right&#x27;</span>);<br><br>      <span class="hljs-comment">// 如果目标元素存在，则直接添加按钮</span><br>      <span class="hljs-keyword">if</span> (targetDiv) &#123;<br>        targetDiv.<span class="hljs-title function_">appendChild</span>(newButton);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">// 如果目标元素不存在，则使用MutationObserver来监听DOM变化</span><br>        <span class="hljs-keyword">var</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationObserver</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">mutations</span>) &#123;<br>          mutations.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">mutation</span>) &#123;<br>            <span class="hljs-keyword">if</span> (mutation.<span class="hljs-property">addedNodes</span>.<span class="hljs-property">length</span>) &#123;<br>              targetDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.header-right&#x27;</span>);<br>              <span class="hljs-keyword">if</span> (targetDiv) &#123;<br>                targetDiv.<span class="hljs-title function_">appendChild</span>(newButton);<br>                observer.<span class="hljs-title function_">disconnect</span>(); <span class="hljs-comment">// 停止观察</span><br>              &#125;<br>            &#125;<br>          &#125;);<br>        &#125;);<br><br>        <span class="hljs-comment">// 配置观察选项</span><br>        <span class="hljs-keyword">var</span> config = &#123; <span class="hljs-attr">childList</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">subtree</span>: <span class="hljs-literal">true</span> &#125;;<br><br>        <span class="hljs-comment">// 选择目标节点</span><br>        <span class="hljs-keyword">var</span> targetNode = <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>;<br><br>        <span class="hljs-comment">// 调用观察者的observe()方法</span><br>        observer.<span class="hljs-title function_">observe</span>(targetNode, config);<br>      &#125;<br>    &#125;, <span class="hljs-number">2000</span>); <span class="hljs-comment">// 2000 毫秒 = 2 秒  延迟是为了让按钮出现时现在在最后面</span><br>  &#125;);<br>&lt;/script&gt;<br><br></code></pre></td></tr></table></figure><h3 id="增加到右侧菜单"><a href="#增加到右侧菜单" class="headerlink" title="增加到右侧菜单"></a>增加到右侧菜单</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;DOMContentLoaded&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// 创建一个新的按钮元素</span><br>    <span class="hljs-keyword">var</span> newButton = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;button&#x27;</span>);<br>    <span class="hljs-comment">// 设置按钮的类名</span><br>    newButton.<span class="hljs-property">className</span> = <span class="hljs-string">&#x27;custom-header-button&#x27;</span>;<br><br>    <span class="hljs-comment">// 创建SVG图标</span><br>    <span class="hljs-keyword">var</span> svgNS = <span class="hljs-string">&quot;http://www.w3.org/2000/svg&quot;</span>; <span class="hljs-comment">// SVG命名空间</span><br>    <span class="hljs-keyword">var</span> svgIcon = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElementNS</span>(svgNS, <span class="hljs-string">&quot;svg&quot;</span>);<br>    svgIcon.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;viewBox&quot;</span>, <span class="hljs-string">&quot;0 0 24 24&quot;</span>);<br>    svgIcon.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;height&quot;</span>, <span class="hljs-string">&quot;24&quot;</span>);<br>    svgIcon.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;width&quot;</span>, <span class="hljs-string">&quot;24&quot;</span>);<br><br>    <span class="hljs-comment">// 创建SVG路径（这里只是一个示例路径，应根据实际图标进行修改）</span><br>    <span class="hljs-keyword">var</span> path = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElementNS</span>(svgNS, <span class="hljs-string">&quot;path&quot;</span>);<br>    path.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">&quot;d&quot;</span>, <span class="hljs-string">&quot;M10 3H6a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h4v-2H6V5h4v2h2V5a2 2 0 0 0-2-2zm4 8v10c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V11c0-.6.4-1 1-1h6c.6 0 1 .4 1 1zm-2 5v-1h2v1h-2z&quot;</span>);<br>    svgIcon.<span class="hljs-title function_">appendChild</span>(path);<br><br>    <span class="hljs-comment">// 将SVG图标添加到按钮中</span><br>    newButton.<span class="hljs-title function_">appendChild</span>(svgIcon);<br><br>    <span class="hljs-comment">// 设置按钮的点击事件处理函数</span><br>    newButton.<span class="hljs-property">onclick</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">clear</span>()<br>    <span class="hljs-comment">// 跳转到指定的URL</span><br>    <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">&#x27;http://127.0.0.1:5244/@login?redirect=%2Flogin&#x27;</span>;<br>  &#125;;<br><br><br>    <span class="hljs-comment">// 设置鼠标悬停时的提示</span><br>    newButton.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;退出登录&#x27;</span>;<br><br>    <span class="hljs-comment">// 尝试获取目标&lt;div&gt;元素</span><br>    <span class="hljs-keyword">var</span> targetDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.left-toolbar-in&#x27;</span>);<br><br>    <span class="hljs-comment">// 如果目标元素存在，则直接添加按钮</span><br>    <span class="hljs-keyword">if</span> (targetDiv) &#123;<br>      targetDiv.<span class="hljs-title function_">appendChild</span>(newButton);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-comment">// 如果目标元素不存在，则使用MutationObserver来监听DOM变化</span><br>      <span class="hljs-keyword">var</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationObserver</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">mutations</span>) &#123;<br>        mutations.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">mutation</span>) &#123;<br>          <span class="hljs-keyword">if</span> (mutation.<span class="hljs-property">addedNodes</span>.<span class="hljs-property">length</span>) &#123;<br>            targetDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.left-toolbar-in&#x27;</span>);<br>            <span class="hljs-keyword">if</span> (targetDiv) &#123;<br>              targetDiv.<span class="hljs-title function_">appendChild</span>(newButton);<br>              observer.<span class="hljs-title function_">disconnect</span>(); <span class="hljs-comment">// 停止观察</span><br>            &#125;<br>          &#125;<br>        &#125;);<br>      &#125;);<br><br>      <span class="hljs-comment">// 配置观察选项</span><br>      <span class="hljs-keyword">var</span> config = &#123; <span class="hljs-attr">childList</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">subtree</span>: <span class="hljs-literal">true</span> &#125;;<br><br>      <span class="hljs-comment">// 选择目标节点</span><br>      <span class="hljs-keyword">var</span> targetNode = <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>;<br><br>      <span class="hljs-comment">// 调用观察者的observe()方法</span><br>      observer.<span class="hljs-title function_">observe</span>(targetNode, config);<br>    &#125;<br>  &#125;);<br>&lt;/script&gt;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>技术/软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Alist</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>吐槽下_20250215</title>
    <link href="/2000001/"/>
    <url>/2000001/</url>
    
    <content type="html"><![CDATA[<h2 id="特别鸣谢"><a href="#特别鸣谢" class="headerlink" title="特别鸣谢"></a>特别鸣谢</h2><p>科技空间(Tech_Sky)、微软、淘宝买家、Gemini、等</p><h2 id="E5被禁用"><a href="#E5被禁用" class="headerlink" title="E5被禁用"></a>E5被禁用</h2><p>过期：2024&#x2F;12&#x2F;24</p><p>直到：2025&#x2F;2&#x2F;21  数据将被全部删除</p><h2 id="E5搬家失败"><a href="#E5搬家失败" class="headerlink" title="E5搬家失败"></a>E5搬家失败</h2><p>特别鸣谢<a href="https://tsy.ink/">科技空间(Tech_Sky)</a></p><p>提供了一个正常的OD给我做备份，使用Rclone备份<br>过了一天，他的服务器死机，他的OD全局挂了</p><h2 id="域名挂了"><a href="#域名挂了" class="headerlink" title="域名挂了"></a>域名挂了</h2><blockquote><p>priv.news</p></blockquote><p>需要氪金30美刀才能用，一年</p><h2 id="硬盘存储失败"><a href="#硬盘存储失败" class="headerlink" title="硬盘存储失败"></a>硬盘存储失败</h2><p>于2月9号左右到了一块16T硬盘（淘宝购买的二手，100小时内，价格1K+）</p><p>差不多每次备份20多个小时左右都会掉线，于2025&#x2F;02&#x2F;15 22:54左右掉线（第三次还是第四次了）<br>通过查看日志分析得知，疑似硬盘存在坏道。将情况告知商家，退货退款处理（此处需感谢商家的售后支持及一直都在[我是23点多反馈的情况]）。</p><p>部分日志如下</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><code class="hljs text">2025-02-15 22:48:46 - HD/dev/sdd is online. Temperature: 37 C<br>2025-02-15 22:51:33 - HD/dev/sdd is online. Temperature:  C<br><br>root@pve:~/hd_drop_logs# cat &#x27;hd_drop_2025-02-15 22:52:33.log&#x27;<br>2025-02-15 22:52:33 - HD/dev/sdd is offline.<br>root@pve:~/hd_drop_logs# sudo journalctl --since &quot;2025-02-15 22:00:00&quot; | grep &quot;sdd&quot;<br>Feb 15 22:00:43 pve sudo[755502]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:01:44 pve sudo[755867]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:02:44 pve sudo[756233]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:03:44 pve sudo[756593]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:04:44 pve sudo[756969]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:05:44 pve sudo[757332]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:06:44 pve sudo[757697]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:07:44 pve sudo[758066]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:08:44 pve sudo[758432]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:09:44 pve sudo[758801]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:10:44 pve sudo[759161]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:11:44 pve sudo[759524]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:12:44 pve sudo[759886]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:13:44 pve sudo[760248]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:14:44 pve sudo[760624]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:15:44 pve sudo[761017]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:16:44 pve sudo[761382]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:17:44 pve sudo[761755]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:18:44 pve sudo[762129]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:19:45 pve sudo[762495]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:20:45 pve sudo[762857]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:21:44 pve smartd[842]: Device: /dev/sdd [SAT], SMART Prefailure Attribute: 8 Seek_Time_Performance changed from 128 to 132<br>Feb 15 22:21:45 pve sudo[763219]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:22:45 pve sudo[763587]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:23:45 pve sudo[763951]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:24:45 pve sudo[764322]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:25:45 pve sudo[764716]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:26:45 pve sudo[765093]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:27:45 pve sudo[765477]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:28:45 pve sudo[765855]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:29:45 pve sudo[766234]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:30:45 pve sudo[766610]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:31:45 pve sudo[766994]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:32:45 pve sudo[767352]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:33:45 pve sudo[767721]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:34:45 pve sudo[768080]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:35:45 pve sudo[768435]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:36:46 pve sudo[768792]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:37:46 pve sudo[769169]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:38:46 pve sudo[769522]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:39:46 pve sudo[769879]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:40:46 pve sudo[770231]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:41:46 pve sudo[770583]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:42:46 pve sudo[770935]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:43:46 pve sudo[771290]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:44:46 pve sudo[771647]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:45:46 pve sudo[772004]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:46:46 pve sudo[772369]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:47:46 pve sudo[772729]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:48:46 pve sudo[773093]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:49:46 pve sudo[773457]:     root : PWD=/root ; USER=root ; COMMAND=/usr/sbin/smartctl -A /dev/sdd<br>Feb 15 22:50:00 pve kernel: sd 5:0:0:1: [sdd] tag#29 uas_eh_abort_handler 0 uas-tag 3 inflight: CMD OUT <br>Feb 15 22:50:00 pve kernel: sd 5:0:0:1: [sdd] tag#29 CDB: Write(16) 8a 00 00 00 00 04 55 ca 48 00 00 00 04 00 00 00<br>Feb 15 22:50:00 pve kernel: sd 5:0:0:1: [sdd] tag#28 uas_eh_abort_handler 0 uas-tag 1 inflight: CMD OUT <br>Feb 15 22:50:00 pve kernel: sd 5:0:0:1: [sdd] tag#28 CDB: Write(16) 8a 00 00 00 00 04 55 ca 44 00 00 00 04 00 00 00<br>Feb 15 22:50:00 pve kernel: sd 5:0:0:1: [sdd] tag#15 uas_eh_abort_handler 0 uas-tag 2 inflight: CMD <br>Feb 15 22:50:00 pve kernel: sd 5:0:0:1: [sdd] tag#15 CDB: Read(16) 88 00 00 00 00 04 55 5f 50 00 00 00 00 80 00 00<br>Feb 15 22:50:00 pve kernel: sd 5:0:0:1: [sdd] tag#3 uas_eh_abort_handler 0 uas-tag 7 inflight: CMD OUT <br>Feb 15 22:50:00 pve kernel: sd 5:0:0:1: [sdd] tag#3 CDB: Write(16) 8a 00 00 00 00 04 55 ca 58 00 00 00 04 00 00 00<br>Feb 15 22:50:00 pve kernel: sd 5:0:0:1: [sdd] tag#2 uas_eh_abort_handler 0 uas-tag 6 inflight: CMD OUT <br>Feb 15 22:50:00 pve kernel: sd 5:0:0:1: [sdd] tag#2 CDB: Write(16) 8a 00 00 00 00 04 55 ca 54 00 00 00 04 00 00 00<br>Feb 15 22:50:00 pve kernel: sd 5:0:0:1: [sdd] tag#1 uas_eh_abort_handler 0 uas-tag 5 inflight: CMD OUT <br>Feb 15 22:50:00 pve kernel: sd 5:0:0:1: [sdd] tag#1 CDB: Write(16) 8a 00 00 00 00 04 55 ca 50 00 00 00 04 00 00 00<br>Feb 15 22:50:00 pve kernel: sd 5:0:0:1: [sdd] tag#0 uas_eh_abort_handler 0 uas-tag 4 inflight: CMD OUT <br>Feb 15 22:50:00 pve kernel: sd 5:0:0:1: [sdd] tag#0 CDB: Write(16) 8a 00 00 00 00 04 55 ca 4c 00 00 00 04 00 00 00<br>Feb 15 22:50:48 pve kernel: sd 5:0:0:1: [sdd] tag#4 uas_eh_abort_handler 0 uas-tag 8 inflight: CMD IN <br>Feb 15 22:50:48 pve kernel: sd 5:0:0:1: [sdd] tag#4 CDB: ATA command pass through(16) 85 08 0e 00 00 00 01 00 00 00 00 00 00 00 ec 00<br>Feb 15 22:51:33 pve kernel: sd 5:0:0:1: [sdd] tag#0 FAILED Result: hostbyte=DID_ERROR driverbyte=DRIVER_OK cmd_age=123s<br>Feb 15 22:51:33 pve kernel: sd 5:0:0:1: [sdd] tag#0 CDB: Write(16) 8a 00 00 00 00 04 55 ca 4c 00 00 00 04 00 00 00<br>Feb 15 22:51:33 pve kernel: I/O error, dev sdd, sector 18619190272 op 0x1:(WRITE) flags 0x0 phys_seg 128 prio class 0<br>Feb 15 22:51:33 pve kernel: sd 5:0:0:1: [sdd] tag#1 FAILED Result: hostbyte=DID_ERROR driverbyte=DRIVER_OK cmd_age=123s<br>Feb 15 22:51:33 pve kernel: sd 5:0:0:1: [sdd] tag#1 CDB: Write(16) 8a 00 00 00 00 04 55 ca 50 00 00 00 04 00 00 00<br>Feb 15 22:51:33 pve kernel: I/O error, dev sdd, sector 18619191296 op 0x1:(WRITE) flags 0x4000 phys_seg 128 prio class 0<br>Feb 15 22:51:33 pve kernel: sd 5:0:0:1: [sdd] tag#2 FAILED Result: hostbyte=DID_ERROR driverbyte=DRIVER_OK cmd_age=123s<br>Feb 15 22:51:33 pve kernel: sd 5:0:0:1: [sdd] tag#2 CDB: Write(16) 8a 00 00 00 00 04 55 ca 54 00 00 00 04 00 00 00<br>Feb 15 22:51:33 pve kernel: I/O error, dev sdd, sector 18619192320 op 0x1:(WRITE) flags 0x0 phys_seg 128 prio class 0<br>Feb 15 22:51:33 pve kernel: EXT4-fs warning (device sdd3): ext4_end_bio:343: I/O error 10 writing to inode 393087908 starting block 2327399040)<br>Feb 15 22:51:33 pve kernel: sd 5:0:0:1: [sdd] tag#3 FAILED Result: hostbyte=DID_ERROR driverbyte=DRIVER_OK cmd_age=123s<br>Feb 15 22:51:33 pve kernel: sd 5:0:0:1: [sdd] tag#3 CDB: Write(16) 8a 00 00 00 00 04 55 ca 58 00 00 00 04 00 00 00<br>Feb 15 22:51:33 pve kernel: I/O error, dev sdd, sector 18619193344 op 0x1:(WRITE) flags 0x4000 phys_seg 128 prio class 0<br>Feb 15 22:51:33 pve kernel: sd 5:0:0:1: [sdd] tag#15 FAILED Result: hostbyte=DID_TIME_OUT driverbyte=DRIVER_OK cmd_age=123s<br>Feb 15 22:51:33 pve kernel: sd 5:0:0:1: [sdd] tag#15 CDB: Read(16) 88 00 00 00 00 04 55 5f 50 00 00 00 00 80 00 00<br>Feb 15 22:51:33 pve kernel: I/O error, dev sdd, sector 18612178944 op 0x0:(READ) flags 0x80700 phys_seg 16 prio class 0<br>Feb 15 22:51:33 pve kernel: sd 5:0:0:1: [sdd] tag#28 FAILED Result: hostbyte=DID_ERROR driverbyte=DRIVER_OK cmd_age=123s<br>Feb 15 22:51:33 pve kernel: sd 5:0:0:1: [sdd] tag#28 CDB: Write(16) 8a 00 00 00 00 04 55 ca 44 00 00 00 04 00 00 00<br>Feb 15 22:51:33 pve kernel: I/O error, dev sdd, sector 18619188224 op 0x1:(WRITE) flags 0x0 phys_seg 128 prio class 0<br>Feb 15 22:51:33 pve kernel: EXT4-fs warning (device sdd3): ext4_end_bio:343: I/O error 10 writing to inode 393087908 starting block 2327398528)<br>Feb 15 22:51:33 pve kernel: sd 5:0:0:1: [sdd] tag#29 FAILED Result: hostbyte=DID_ERROR driverbyte=DRIVER_OK cmd_age=123s<br>Feb 15 22:51:33 pve kernel: sd 5:0:0:1: [sdd] tag#29 CDB: Write(16) 8a 00 00 00 00 04 55 ca 48 00 00 00 04 00 00 00<br>Feb 15 22:51:33 pve kernel: I/O error, dev sdd, sector 18612178944 op 0x0:(READ) flags 0x0 phys_seg 1 prio class 0<br>Feb 15 22:51:33 pve kernel: I/O error, dev sdd, sector 18619189248 op 0x1:(WRITE) flags 0x4000 phys_seg 128 prio class 0<br>Feb 15 22:51:33 pve kernel: EXT4-fs warning (device sdd3): ext4_end_bio:343: I/O error 10 writing to inode 393087908 starting block 2327398784)<br>Feb 15 22:51:33 pve kernel: Buffer I/O error on device sdd3, logical block 2195797760<br>Feb 15 22:51:33 pve kernel: Buffer I/O error on device sdd3, logical block 2195797761<br>Feb 15 22:51:33 pve kernel: Buffer I/O error on device sdd3, logical block 2195797762<br>Feb 15 22:51:33 pve kernel: Buffer I/O error on device sdd3, logical block 2195797763<br>Feb 15 22:51:33 pve kernel: Buffer I/O error on device sdd3, logical block 2195797764<br>Feb 15 22:51:33 pve kernel: Buffer I/O error on device sdd3, logical block 2195797765<br>Feb 15 22:51:33 pve kernel: Buffer I/O error on device sdd3, logical block 2195797766<br>Feb 15 22:51:33 pve kernel: Buffer I/O error on device sdd3, logical block 2195797767<br>Feb 15 22:51:33 pve kernel: Buffer I/O error on device sdd3, logical block 2195797768<br>Feb 15 22:51:33 pve kernel: Buffer I/O error on device sdd3, logical block 2195797769<br>Feb 15 22:51:33 pve kernel: I/O error, dev sdd, sector 18619194368 op 0x1:(WRITE) flags 0x0 phys_seg 128 prio class 0<br>Feb 15 22:51:33 pve kernel: EXT4-fs warning (device sdd3): ext4_end_bio:343: I/O error 10 writing to inode 393087908 starting block 2327399296)<br>Feb 15 22:51:33 pve kernel: I/O error, dev sdd, sector 18619195392 op 0x1:(WRITE) flags 0x4000 phys_seg 128 prio class 0<br>Feb 15 22:51:33 pve kernel: EXT4-fs warning (device sdd3): ext4_end_bio:343: I/O error 10 writing to inode 393087908 starting block 2327399552)<br>Feb 15 22:51:33 pve kernel: EXT4-fs warning (device sdd3): ext4_end_bio:343: I/O error 10 writing to inode 393087908 starting block 2327399808)<br>Feb 15 22:51:33 pve kernel: EXT4-fs warning (device sdd3): ext4_end_bio:343: I/O error 10 writing to inode 393087908 starting block 2327400064)<br>Feb 15 22:51:33 pve kernel: EXT4-fs warning (device sdd3): ext4_end_bio:343: I/O error 10 writing to inode 393087908 starting block 2327400320)<br>Feb 15 22:51:33 pve kernel: EXT4-fs warning (device sdd3): ext4_end_bio:343: I/O error 10 writing to inode 393087908 starting block 2327400576)<br>Feb 15 22:51:33 pve kernel: EXT4-fs warning (device sdd3): ext4_end_bio:343: I/O error 10 writing to inode 393087908 starting block 2327400832)<br>Feb 15 22:51:33 pve kernel: Buffer I/O error on dev sdd3, logical block 1887129603, lost sync page write<br>Feb 15 22:51:33 pve kernel: Aborting journal on device sdd3-8.<br>Feb 15 22:51:33 pve kernel: Buffer I/O error on dev sdd3, logical block 1886945280, lost sync page write<br>Feb 15 22:51:33 pve kernel: EXT4-fs error (device sdd3) in ext4_reserve_inode_write:5771: Journal has aborted<br>Feb 15 22:51:33 pve kernel: EXT4-fs error (device sdd3): ext4_convert_unwritten_extents:4875: inode #393087908: comm kworker/u16:4: mark_inode_dirty error<br>Feb 15 22:51:33 pve kernel: EXT4-fs error (device sdd3) in ext4_convert_unwritten_io_end_vec:4914: Journal has aborted<br>Feb 15 22:51:33 pve kernel: EXT4-fs (sdd3): failed to convert unwritten extents to written extents -- potential data loss!  (inode 393087908, error -30)<br>Feb 15 22:51:33 pve kernel: JBD2: I/O error when updating journal superblock for sdd3-8.<br>Feb 15 22:51:33 pve kernel: Buffer I/O error on dev sdd3, logical block 0, lost sync page write<br>Feb 15 22:51:33 pve kernel: EXT4-fs (sdd3): I/O error while writing superblock<br>Feb 15 22:51:33 pve kernel: EXT4-fs error (device sdd3) in ext4_reserve_inode_write:5771: Journal has aborted<br>Feb 15 22:51:33 pve kernel: EXT4-fs error (device sdd3): mpage_map_and_submit_extent:2304: inode #393087908: comm kworker/u16:2: mark_inode_dirty error<br>Feb 15 22:51:33 pve kernel: EXT4-fs error (device sdd3): mpage_map_and_submit_extent:2306: comm kworker/u16:2: Failed to mark inode 393087908 dirty<br>Feb 15 22:51:33 pve kernel: EXT4-fs error (device sdd3) in ext4_do_writepages:2720: Journal has aborted<br>Feb 15 22:51:33 pve kernel: Buffer I/O error on dev sdd3, logical block 0, lost sync page write<br>Feb 15 22:51:33 pve kernel: EXT4-fs (sdd3): I/O error while writing superblock<br>Feb 15 22:51:33 pve kernel: EXT4-fs error (device sdd3): ext4_journal_check_start:84: comm kworker/u16:2: Detected aborted journal<br>Feb 15 22:51:33 pve kernel: Buffer I/O error on dev sdd3, logical block 0, lost sync page write<br>Feb 15 22:51:33 pve kernel: EXT4-fs (sdd3): I/O error while writing superblock<br>Feb 15 22:51:33 pve kernel: EXT4-fs (sdd3): Remounting filesystem read-only<br>Feb 15 22:51:33 pve kernel: EXT4-fs (sdd3): ext4_do_writepages: jbd2_start: 1024 pages, ino 393087909; err -30<br>Feb 15 22:51:35 pve kernel: sd 5:0:0:1: [sdd] Synchronizing SCSI cache<br>Feb 15 22:51:36 pve kernel: sd 5:0:0:1: [sdd] Synchronize Cache(10) failed: Result: hostbyte=DID_ERROR driverbyte=DRIVER_OK<br>Feb 15 22:51:44 pve smartd[842]: Device: /dev/sdd [SAT], removed ATA device: No such device<br>Feb 15 22:51:45 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:51:55 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:52:05 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:52:15 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:52:25 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:52:35 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:52:45 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:52:56 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:53:06 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:53:16 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:53:26 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:53:36 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:53:46 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:53:56 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:54:06 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:54:17 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:54:27 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:54:37 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:54:47 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:54:57 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:55:07 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:55:17 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:55:27 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:55:37 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:55:47 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 22:56:00 pve kernel: EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block<br>Feb 15 23:12:32 pve sudo[779732]:     root : TTY=pts/1 ; PWD=/root ; USER=root ; COMMAND=/usr/bin/fuser -m /dev/sdd<br>root@pve:~/hd_drop_logs# <br></code></pre></td></tr></table></figure><h2 id="GPT分析硬盘掉线日志"><a href="#GPT分析硬盘掉线日志" class="headerlink" title="GPT分析硬盘掉线日志"></a>GPT分析硬盘掉线日志</h2><p>好的，我分析了你提供的系统日志，发现了一些非常重要的信息，可以确认硬盘掉线的原因是 <strong>硬盘存在坏道，导致文件系统错误</strong>。</p><p><strong>关键信息：</strong></p><ol><li><p><strong><code>sd 5:0:0:1: [sdd] tag#0 FAILED Result: hostbyte=DID_ERROR driverbyte=DRIVER_OK cmd_age=123s</code> 等类似信息：</strong> 这些信息表明硬盘在执行读写操作时失败。</p></li><li><p><strong><code>I/O error, dev sdd, sector 18619190272 op 0x1:(WRITE) flags 0x0 phys_seg 128 prio class 0</code> 等类似信息：</strong> 这些信息明确指出硬盘在特定扇区发生了 I&#x2F;O 错误，无法完成读写操作。</p></li><li><p><strong><code>EXT4-fs warning (device sdd3): ext4_end_bio:343: I/O error 10 writing to inode 393087908 starting block 2327399040)</code> 等类似信息：</strong> 这些信息表明 EXT4 文件系统在写入 inode 或数据块时遇到了 I&#x2F;O 错误。</p></li><li><p><strong><code>Buffer I/O error on device sdd3, logical block 2195797760</code> 等类似信息：</strong> 这些信息表明在读取或写入特定逻辑块时发生了缓冲区 I&#x2F;O 错误。</p></li><li><p><strong><code>EXT4-fs error (device sdd3) in ext4_reserve_inode_write:5771: Journal has aborted</code> 等类似信息：</strong> 这些信息表明 EXT4 文件系统的日志已经中止，这意味着文件系统已经损坏。</p></li><li><p><strong><code>EXT4-fs (sdd3): Remounting filesystem read-only</code>：</strong>  由于文件系统损坏，系统将 <code>sdd3</code> 分区重新挂载为只读模式，以防止进一步的数据损坏。</p></li><li><p><strong><code>sd 5:0:0:1: [sdd] Synchronize Cache(10) failed: Result: hostbyte=DID_ERROR driverbyte=DRIVER_OK</code>：</strong>  同步缓存失败，表明数据可能已经丢失。</p></li><li><p><strong><code>EXT4-fs warning (device sdd3): htree_dirblock_to_tree:1083: inode #2: lblock 0: comm smbd: error -5 reading directory block</code>：</strong>  无法读取目录块，表明文件系统结构已经损坏。</p></li></ol><p><strong>结论：</strong></p><p>根据这些信息，可以确认 <code>sdd</code> 硬盘存在 <strong>坏道</strong>，导致 <strong>I&#x2F;O 错误</strong> 和 <strong>文件系统损坏</strong>。 当系统尝试写入数据到坏道所在的区域时，就会发生 I&#x2F;O 错误，最终导致文件系统崩溃和硬盘掉线。</p><p><strong>解决方案：</strong></p><ol><li><p><strong>备份数据：</strong></p><ul><li><strong>立即停止使用 <code>sdd</code> 硬盘，防止进一步的数据损坏。</strong></li><li><strong>尝试将 <code>sdd</code> 硬盘上的重要数据备份到其他存储设备。</strong></li><li>由于文件系统已经损坏，备份过程可能会遇到困难。 可以尝试使用 <code>ddrescue</code> 等工具进行扇区级别的备份。</li></ul></li><li><p><strong>检查硬盘 SMART 信息：</strong></p><ul><li>运行 <code>sudo smartctl -a /dev/sdd</code> 命令，查看硬盘的 SMART 信息，确认是否存在硬件故障。</li><li>重点关注 <code>Reallocated_Sector_Ct</code>、<code>Current_Pending_Sector</code> 和 <code>Offline_Uncorrectable</code> 属性。 如果这些属性的值很高，表明硬盘存在大量的坏道。</li></ul></li><li><p><strong>尝试修复文件系统：</strong></p><ul><li><p><strong>卸载 <code>sdd3</code> 分区：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo umount /dev/sdd3<br></code></pre></td></tr></table></figure></li><li><p><strong>运行 <code>fsck</code> 命令修复文件系统：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo fsck -y /dev/sdd3<br></code></pre></td></tr></table></figure><p><strong>警告：</strong> 修复文件系统可能会导致数据丢失。</p></li></ul></li><li><p><strong>坏道扫描和修复：</strong></p><ul><li><p>可以使用 <code>badblocks</code> 命令扫描硬盘上的坏道：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo badblocks -v -s /dev/sdd<br></code></pre></td></tr></table></figure></li><li><p>如果发现坏道，可以使用 <code>e2fsck</code> 命令尝试修复：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo e2fsck -cc -k /dev/sdd3<br></code></pre></td></tr></table></figure><p><strong>警告：</strong> 修复坏道可能会导致数据丢失。</p></li></ul></li><li><p><strong>更换硬盘：</strong></p><ul><li>如果硬盘存在大量的坏道，并且无法修复，建议更换硬盘。</li></ul></li></ol><p><strong>重要提示：</strong></p><ul><li><strong>硬盘出现坏道通常是硬件故障的征兆。</strong> 即使修复了文件系统和坏道，硬盘仍然可能在不久的将来再次出现问题。</li><li><strong>定期备份数据是防止数据丢失的最佳方法。</strong></li></ul><p><strong>针对你的情况，我的建议是：</strong></p><ol><li><strong>立即停止使用 <code>sdd</code> 硬盘，并尝试备份数据。</strong></li><li><strong>运行 <code>sudo smartctl -a /dev/sdd</code> 命令，查看硬盘的 SMART 信息。</strong></li><li><strong>如果 SMART 信息显示硬盘存在大量的坏道，建议更换硬盘。</strong></li><li><strong>如果 SMART 信息没有显示明显的硬件故障，可以尝试修复文件系统和坏道，但请注意数据丢失的风险。</strong></li></ol><p>请尽快按照以上步骤操作，并提供 <code>sudo smartctl -a /dev/sdd</code> 命令的输出结果，以便我进一步分析。</p><h2 id="硬盘的S-M-A-R-T-值"><a href="#硬盘的S-M-A-R-T-值" class="headerlink" title="硬盘的S.M.A.R.T.值"></a>硬盘的S.M.A.R.T.值</h2><table><thead><tr><th>ID</th><th>属性</th><th>值</th><th>标准化</th><th>阈值</th><th>最差</th><th>标记</th><th>失败</th></tr></thead><tbody><tr><td>1</td><td>Raw_Read_Error_Rate</td><td>0</td><td>100</td><td>1</td><td>100</td><td>PO-R–</td><td>-</td></tr><tr><td>2</td><td>Throughput_Performance</td><td>100</td><td>135</td><td>54</td><td>135</td><td>P-S—</td><td>-</td></tr><tr><td>3</td><td>Spin_Up_Time</td><td>208 (Average 338)</td><td>83</td><td>1</td><td>83</td><td>POS—</td><td>-</td></tr><tr><td>4</td><td>Start_Stop_Count</td><td>116</td><td>100</td><td>0</td><td>100</td><td>-O–C-</td><td>-</td></tr><tr><td>5</td><td>Reallocated_Sector_Ct</td><td>0</td><td>100</td><td>1</td><td>100</td><td>PO–CK</td><td>-</td></tr><tr><td>7</td><td>Seek_Error_Rate</td><td>0</td><td>100</td><td>1</td><td>100</td><td>PO-R–</td><td>-</td></tr><tr><td>8</td><td>Seek_Time_Performance</td><td>17</td><td>132</td><td>20</td><td>132</td><td>P-S—</td><td>-</td></tr><tr><td>9</td><td>Power_On_Hours</td><td>247</td><td>100</td><td>0</td><td>100</td><td>-O–C-</td><td>-</td></tr><tr><td>10</td><td>Spin_Retry_Count</td><td>0</td><td>100</td><td>1</td><td>100</td><td>PO–C-</td><td>-</td></tr><tr><td>12</td><td>Power_Cycle_Count</td><td>14</td><td>100</td><td>0</td><td>100</td><td>-O–CK</td><td>-</td></tr><tr><td>22</td><td>Helium_Level</td><td>100</td><td>100</td><td>25</td><td>100</td><td>PO—K</td><td>-</td></tr><tr><td>184</td><td>End-to-End_Error</td><td>0</td><td>100</td><td>97</td><td>100</td><td>PO–CK</td><td>-</td></tr><tr><td>188</td><td>Command_Timeout</td><td>223341707272</td><td>100</td><td>0</td><td>100</td><td>-O–CK</td><td>-</td></tr><tr><td>192</td><td>Power-Off_Retract_Count</td><td>120</td><td>100</td><td>0</td><td>100</td><td>-O–CK</td><td>-</td></tr><tr><td>193</td><td>Load_Cycle_Count</td><td>120</td><td>100</td><td>0</td><td>100</td><td>-O–C-</td><td>-</td></tr><tr><td>194</td><td>Temperature_Celsius</td><td>32 (Min&#x2F;Max 10&#x2F;42)</td><td>63</td><td>0</td><td>63</td><td>-O—-</td><td>-</td></tr><tr><td>196</td><td>Reallocated_Event_Count</td><td>0</td><td>100</td><td>0</td><td>100</td><td>-O–CK</td><td>-</td></tr><tr><td>197</td><td>Current_Pending_Sector</td><td>0</td><td>100</td><td>0</td><td>100</td><td>-O—K</td><td>-</td></tr><tr><td>198</td><td>Offline_Uncorrectable</td><td>0</td><td>100</td><td>0</td><td>100</td><td>—R–</td><td>-</td></tr><tr><td>199</td><td>UDMA_CRC_Error_Count</td><td>0</td><td>100</td><td>0</td><td>100</td><td>-O-R–</td><td>-</td></tr><tr><td>241</td><td>Total_LBAs_Written</td><td>16473545176</td><td>100</td><td>0</td><td>100</td><td>-O–C-</td><td>-</td></tr><tr><td>242</td><td>Total_LBAs_Read</td><td>3622192007</td><td>100</td><td>0</td><td>100</td><td>-O–C-</td><td>-</td></tr></tbody></table><p>从SMART值来看，大部分参数都显示正常，数值为100，阈值为0，表示硬盘目前状况良好。但是，有几个参数需要注意：</p><ul><li><strong>Throughput_Performance (ID 2):</strong> 值为100，标准化值为135，阈值为54。虽然当前值看起来不错，但标准化值高于100可能表示性能略有下降，但仍在可接受范围内。</li><li><strong>Seek_Time_Performance (ID 8):</strong> 值为17，标准化值为132，阈值为20。这个值明显低于标准化值，可能表示寻道时间性能较低。虽然没有超过阈值，但值得关注。</li><li><strong>Temperature_Celsius (ID 194):</strong> 当前温度为32摄氏度，最小&#x2F;最大值为10&#x2F;42。这个温度在正常范围内，但需要注意保持硬盘散热良好，避免长时间高温运行。</li></ul><p><strong>总体建议：</strong></p><ol><li><strong>密切关注Seek_Time_Performance：</strong> 这是一个潜在的问题指标。定期检查SMART值，观察该参数是否持续下降。</li><li><strong>保持硬盘散热：</strong> 确保机箱通风良好，避免硬盘过热。</li><li><strong>定期备份数据：</strong> 无论SMART值如何，定期备份重要数据都是明智之举，以防硬盘出现意外故障。</li><li><strong>考虑进行硬盘检测：</strong> 可以使用专业的硬盘检测工具（例如 CrystalDiskInfo、HD Tune）进行更全面的检测，以评估硬盘的健康状况。</li></ol><p><strong>总结：</strong></p><p>虽然SMART值大部分正常，但Seek_Time_Performance和Throughput_Performance这两个参数值得关注。通过定期检查和维护，可以更好地了解硬盘的健康状况，并及时采取措施。</p><p>您是否希望我提供一些硬盘检测工具的名称或更详细的维护建议？</p><p>您好，Command_Timeout (ID 188) 的值是 223341707272，标准化值是 100，阈值是 0。</p><p>这个值 <strong>非常高</strong>，通常 Command Timeout 应该是一个相对较小的数值。如此高的数值可能意味着：</p><ol><li><strong>计数方式特殊：</strong> 某些硬盘厂商可能使用不同的计数方式，导致该数值异常大，但并不代表实际问题。</li><li><strong>潜在问题：</strong> 极高的 Command Timeout 值可能指示硬盘在处理命令时遇到了严重的延迟或错误。这可能是由于硬盘内部故障、连接问题或其他系统问题引起的。</li></ol><p><strong>建议：</strong></p><ol><li><strong>检查硬盘连接：</strong> 确保硬盘数据线和电源线连接稳固。尝试更换数据线，看看是否能解决问题。</li><li><strong>检查驱动程序：</strong> 确保硬盘驱动程序是最新的。</li><li><strong>运行硬盘检测：</strong> 使用专业的硬盘检测工具（例如 CrystalDiskInfo、HD Tune）进行全面检测，查看是否有其他错误或警告。</li><li><strong>检查系统日志：</strong> 查看系统事件日志，看是否有与硬盘相关的错误或警告信息。</li><li><strong>考虑更换硬盘：</strong> 如果经过以上检查仍然无法解决问题，并且您担心数据安全，建议考虑更换硬盘。</li></ol><p><strong>重要提示：</strong></p><p>Command Timeout 是一个重要的指标，极高的数值通常不正常。请务必认真对待，并尽快采取措施进行检查和修复，以避免数据丢失或其他潜在问题。</p><p>您是否希望我提供更详细的步骤或工具使用说明？</p><h2 id="编写的简易硬盘检测脚本"><a href="#编写的简易硬盘检测脚本" class="headerlink" title="编写的简易硬盘检测脚本"></a>编写的简易硬盘检测脚本</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><br><span class="hljs-comment"># 硬盘设备名称</span><br>HD_DEVICE=<span class="hljs-string">&quot;/dev/sdd&quot;</span><br><span class="hljs-comment"># 数据保存文件</span><br>LOG_FILE=<span class="hljs-string">&quot;hd_status.log&quot;</span><br><span class="hljs-comment"># 掉线事件日志目录</span><br>DROP_LOG_DIR=<span class="hljs-string">&quot;hd_drop_logs&quot;</span><br><br><span class="hljs-comment"># 检查日志目录是否存在，如果不存在则创建</span><br><span class="hljs-built_in">mkdir</span> -p <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;DROP_LOG_DIR&#125;</span>&quot;</span><br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span><br>    <span class="hljs-comment"># 检查硬盘是否在线</span><br>    <span class="hljs-keyword">if</span> [ -b <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HD_DEVICE&#125;</span>&quot;</span> ]; <span class="hljs-keyword">then</span><br>        <span class="hljs-comment"># 获取硬盘温度</span><br>        TEMP=$(sudo smartctl -A <span class="hljs-variable">$&#123;HD_DEVICE&#125;</span> | grep Temperature | awk <span class="hljs-string">&#x27;&#123;print $10&#125;&#x27;</span>)<br>        <span class="hljs-comment"># 获取当前时间</span><br>        CURRENT_TIME=$(<span class="hljs-built_in">date</span> <span class="hljs-string">&quot;+%Y-%m-%d %H:%M:%S&quot;</span>)<br>        <span class="hljs-comment"># 写入日志文件</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;CURRENT_TIME&#125;</span> - HD<span class="hljs-variable">$&#123;HD_DEVICE&#125;</span> is online. Temperature: <span class="hljs-variable">$&#123;TEMP&#125;</span> C&quot;</span> &gt;&gt; <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;LOG_FILE&#125;</span>&quot;</span><br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-comment"># 硬盘掉线，记录到掉线日志文件</span><br>        CURRENT_TIME=$(<span class="hljs-built_in">date</span> <span class="hljs-string">&quot;+%Y-%m-%d %H:%M:%S&quot;</span>)<br>        DROP_LOG_FILE=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;DROP_LOG_DIR&#125;</span>/hd_drop_<span class="hljs-variable">$&#123;CURRENT_TIME&#125;</span>.log&quot;</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;CURRENT_TIME&#125;</span> - HD<span class="hljs-variable">$&#123;HD_DEVICE&#125;</span> is offline.&quot;</span> &gt; <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;DROP_LOG_FILE&#125;</span>&quot;</span><br>    <span class="hljs-keyword">fi</span><br>    <span class="hljs-comment"># 等待1分钟</span><br>    <span class="hljs-built_in">sleep</span> 60<br><span class="hljs-keyword">done</span><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>日常</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>有意思的评论_2</title>
    <link href="/2003015/"/>
    <url>/2003015/</url>
    
    <content type="html"><![CDATA[<p><a href="https://music.163.com/#/song?id=2620640247&userid=129662147"><em>就像浪花吻不到月牙</em></a>    歌手：<a href="https://music.163.com/artist?id=94155322">Goodnight</a>    所属专辑：<a href="https://music.163.com/album?id=245965359">fresh hope</a></p><p>今天收藏了一句话：“爱应该是让人变的温柔与勇敢 而不是让人时常感到委屈或妥协.”</p><hr><p><a href="https://music.163.com/#/song?id=2058919172&userid=129662147">长大之前</a>    歌手：<a href="https://music.163.com/artist?id=36026753">椰子皮</a>   所属专辑：<a href="https://music.163.com/album?id=168357297">长大之前</a></p><p>社会的边角料，爸妈的小骄傲</p><p>父母都来自农村，人家说什么都信，唯独不相信自己的孩子会比别人差。</p><p>等我挥霍要仅剩的自由 就骄傲的向生活去自首…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs [歌词]">- 人生要做多少道的选择题<br>- 才能选择自己如何活下去<br>- 对世界有太多好奇 总以为会有惊喜 丢下了书和铅笔<br><br>- 我逃过了作业躲过了找我的妈妈<br>- 为不知名的喜欢手臂留下了烟疤<br>- 让最爱我的人的眼睛里吹进了风沙<br>- 我以为不听你们的话<br>- 就证明我已长大<br>- 迷失在世界真假<br><br>- 想起还能相信爸妈<br>- 有人对我说谎话<br>- 有人对我说真话<br>- 只有你们对我说着童话<br></code></pre></td></tr></table></figure><hr>[*凝望-依然少年*](https://music.163.com/#/song?id=2151205491&userid=129662147)    歌手：[赵照](https://music.163.com/artist?id=6729)    所属专辑：[凝望-依然少年](https://music.163.com/album?id=194157793)<p>格是内心的位置，局是外在的局面。格局，就是指一个人的眼界和心胸体现出来的外在状态。大境界才能有大胸怀，大格局才可能有大作为，成功者运气的背后隐藏着大格局。下面三件事决定了你的人生格局：1.读过的书：变化气质，沉淀灵魂。2.走过的路：一路风清，且行且惜。3.遇过的人：近朱者赤，近墨者黑。</p><blockquote><p>一代人终将老去，但总有人正年轻。</p><blockquote><p>“少年不惧岁月长” “彼方尚有荣光在”</p></blockquote></blockquote><p>把心情和脾气调成静音模式，让我们低配生活高配心灵。以欢喜之心，慢度日常。</p><p>年少时，在乡下的稻田里捡到了一把“剑”随意间挥舞出一道耀眼的剑气，只现片刻便无影无踪，没有在世界上留下一丝痕迹，只当是幻觉罢了。 24岁加班到深夜，寻着路灯走在回家的路上，身后一股强风袭来，我猛然回头，那道剑气直奔我脖颈而来，如同斩断玉米杆那般，将我少年的锐气尽数斩断</p><hr><p><a href="https://music.163.com/#/song?id=2115778262&userid=129662147">风的使命</a>    歌手：<a href="https://music.163.com/artist?id=12316248">尹昔眠</a>    所属专辑：<a href="https://music.163.com/album?id=182814209">风的使命</a></p><blockquote><p>“你肩负风的使命去闯， 化身第一缕曙光， 把整个世界都点亮， 你胸怀一腔热血滚烫， 铭记着梦和信仰， 尽管高飞吧， 撞破命运的南墙。”</p><blockquote><p>在追逐梦想的路上跌跌撞撞，却从没想过放弃！</p></blockquote></blockquote><hr><p><a href="https://music.163.com/#/song?id=2090266105&userid=129662147"><em>那盏茶</em></a>    歌手：<a href="https://music.163.com/artist?id=166014">金志文</a>    所属专辑：<a href="https://music.163.com/album?id=176675696">那盏茶</a></p><p>人总是在不同时间爱上同一旋律</p><hr><p><a href="https://music.163.com/#/song?id=2648559415&userid=129662147"><em>春不晚 (Live版)</em></a>    歌手：<a href="https://music.163.com/artist?id=30703119">郑浩Z-Hao</a> &#x2F; <a href="https://music.163.com/artist?id=58797175">冰洁</a>    所属专辑：<a href="https://music.163.com/album?id=254451555">有歌2024 第7期</a></p><blockquote><p>姑娘一句出去玩，痴儿连夜办贷款。 </p><p>姑娘一听是贷款，忙把痴儿往外赶。 </p><p>贷款一夜作贱完，两手空空把家还。 </p><p>姑娘一句冬不寒，痴儿冻死在江南。</p><blockquote><p>小伙一句要账难，老母含泪把地卖</p></blockquote></blockquote><p>所爱隔山海，山海不可平。所思隔云端，奈何凡肉身。愚公不复见，精卫长泣鸣。天神犹降怜，谁可恨终生。<br>海有舟可渡，山有路可行。此爱翻山海，山海俱可平。可平心中念，念去无自唏。但可寻所爱，永不弃已心。</p><p>一唱春不晚，一唱冬不寒，梦中烟雨是江南</p><p>偏我来时不逢春，杀尽此间留春人</p><hr><p><em><a href="https://music.163.com/#/song?id=2053170269&userid=129662147">纯白引力</a></em>    歌手：<a href="https://music.163.com/artist?id=31148973">王唯一（九姨太）</a>    所属专辑：<a href="https://music.163.com/album?id=167017858">纯白引力</a></p><p>世人常说“海底月是天上月，眼前人是心上人，”可是却忘了“海底月不可捞，心上人不可及。</p><hr><p><a href="https://music.163.com/#/song?id=1840464673&userid=129662147"><em>相思误</em></a>    歌手：<a href="https://music.163.com/artist?id=31314612">浅影阿</a>    所属专辑：<a href="https://music.163.com/album?id=126583804">相思误</a></p><p>“四季花常在，九州事尽知” “山河不足重，重在遇知己” “难寻少年时，总有少年来” 客行悲顾湘。</p><p>耳机是输氧管，电影是镇痛剂，书籍是避难所，爱情是致幻物，金钱是速效丸。我们什么也不是。 </p><hr><p><a href="https://music.163.com/#/song?id=2617563544&userid=129662147"><em>SONW (PHONK)</em></a>    歌手：<a href="https://music.163.com/artist?id=59660357">ROYAL</a>    所属专辑：<a href="https://music.163.com/album?id=245055643">SONW (PHONK)</a></p><p>修己，以清心为要；涉世，以慎言为先。 善用其心，就是用大智慧觉悟人生； 善待一切，就是用大慈悲奉献人生。 做人的八字方针：信仰、因果、良心、道德。 做事的八字方针：感恩、包容、分享、结缘。</p><hr><p><a href="https://music.163.com/#/song?id=1997515408&userid=129662147"><em>巫山换人间</em></a>     歌手：<a href="https://music.163.com/artist?id=997001">兔裹煎蛋卷</a>    所属专辑：<a href="https://music.163.com/album?id=154776056">巫山换人间</a></p><p>世间所有的相遇都是久别重逢，你该遇见的人总归不晚。</p><blockquote><p>不止婚姻，生活就是座围城，里面的人想出去，外边的人想进来。</p><blockquote><p>不幸福的婚姻（生活）才是围城</p></blockquote></blockquote><p>不见你时你离我最近，再见你时常面对面，却摸不见踪影。<br>当年的她已不是她，心中的她只能在孤梦里见。<br>人间已换，爱意化作的茧竟成了薛定谔的空茧。<br>巫山之云散尽时，毫无波澜，只觉得清晰舒坦。<br>好舒服啊，阳光撒下来时，仿佛我会对她说，<br>“一起晒晒吧，”</p><blockquote><p>白云喝了人间酒，巫山换了人间。</p><blockquote><p>云雾缭绕不见山，人间换作云海间</p></blockquote></blockquote><blockquote><p>少年人一动心就永远～</p><blockquote><p>爱意已成茧，这句绝了！</p></blockquote></blockquote><blockquote><p>钝一点再钝一点 慢一点再慢一点 不要急着恋爱 不要急着工作 不要急着变强 你就会发现 好像一切都顺利了起来</p><blockquote><p>会废的</p></blockquote></blockquote><hr><p><a href="https://music.163.com/#/song?id=2037049932&userid=129662147"><em>落的泪又下了一天</em></a>    歌手：<a href="https://music.163.com/artist?id=36775590">池鱼</a>    所属专辑：<a href="https://music.163.com/album?id=163237991">落的泪又下了一天</a></p><p>我一直没有谈恋爱的原因不是因为我不想，也不是因为自己条件很差，而是不敢，更是不知道怎么去哄女孩开心，我一个后天性格凉薄的人明明知道被伤害的感觉，又怎么敢去面对一场结果未知的恋爱，我不怕受伤，我怕的是自己的凉薄伤了在意自己的人，而我却不自知</p><blockquote><p>从你出生的那一刻，端什么碗，吃什么饭，经历什么事，什么时候和谁结婚都是定数，别太为难自己，顺其自然就好。人生的剧本你早在天堂看过了，你之所以选择这个剧本，是因为这一生中有你认为值得的地方。  ——梁晓声《人世间》</p><blockquote><p>天堂的我翻着人身的剧本，拿起放下，即便苦难，即便不美满，依然选择了它。是因为这是我能选到的离你最近的一本吗</p></blockquote></blockquote><hr><p><a href="https://music.163.com/#/song?id=2622394255&userid=129662147"><em>风儿吹蝴蝶飞</em></a>    歌手：<a href="https://music.163.com/artist?id=13113858">林宝馨</a> &#x2F; <a href="https://music.163.com/artist?id=28070174">顾墨迹</a>    所属专辑：<a href="https://music.163.com/album?id=246479605">风儿吹蝴蝶飞</a></p><p>“我们无法判断一个瞬间的价值直到它变成回忆。”</p><p>像在轻风中漫步在田埂，慢慢享受着微风，蝉鸣蝴蝶飞绕。</p><p>风儿吹蝴蝶飞， 飞过时光的洪水， 飞的再远都有人等我归。</p><p>故地重游就像是刻舟求剑，但只有那年，胜过年年</p><p>童年的味道刻在回忆里，童年的伙伴却早已远去。回不去的不止是从前，还有那个单纯无忧的自己。</p><hr><p><a href="https://music.163.com/#/song?id=2603051006&userid=129662147"><em>云朵变成棉花糖</em></a>    歌手：<a href="https://music.163.com/artist?id=36567809">泡芙芙Scarlett</a>    所属专辑：<a href="https://music.163.com/album?id=240648528">云朵变成棉花糖</a></p><p>总有人间一两风，填我十万八千梦</p><p>我会爱上美好的东西，比如你这样的 ‘͜’</p><blockquote><p>可爱的人永远没烦恼</p><blockquote><p>可爱的你又出现了</p></blockquote></blockquote><hr><p><a href="https://music.163.com/#/song?id=2151499090&userid=129662147"><em>妈妈陪我长大了</em></a>    歌手：<a href="https://music.163.com/artist?id=28303284">陈小满阿</a> &#x2F; <a href="https://music.163.com/artist?id=34563784">庄淇玟(29#)</a>    所属专辑：<a href="https://music.163.com/album?id=194257904">妈妈陪我长大了</a></p><blockquote><p>“别跟妈妈诉苦，她帮不上忙，也睡不着觉。”</p><blockquote><p>是真的 有一次我讲了 我妈妈另一天起来我一看就知道她没睡 我就问了她 她说听到你说的那些 我一晚都睡不着觉</p></blockquote></blockquote><p>“只要妈妈在 就永远有退路”</p><p>她用这 世界送的风沙 种出了花朵， 亲手送给我 在路上开着， 她将这 残酷现实做成 童话的段落， 让我在尘埃 看星星闪烁。</p><hr><p><em><a href="https://music.163.com/#/song?id=2057538258&userid=129662147">万重山（轻舟已过万重山</a></em>     歌手：<a href="https://music.163.com/artist?id=32856695">平生不晚</a>    所属专辑：<a href="https://music.163.com/album?id=168054110">万重山</a></p><p>回头看，轻舟已过万重山 向前看，前路漫漫亦灿灿 抬头看，人间烟火甚灿烂 低头看，万里征程心未乱</p><p>小时候不理解老人晒太阳，一坐就是一天，现在明白了，目之所及皆回忆，心之所想皆过往。</p><p>前路漫漫亦灿灿。人间烟火灿灿灿烂，万里征程心未乱。</p><p>军师从不上战场  一上就是纯爱党.</p><p>你说轻舟已过万重山 我说忘记你比登天还难</p><p>不知江月待何人， 那天的风真的好大。</p><p>我最害怕夜晚抬头看的晚霞， 一起做过的事如今最为挣扎。 这两句的调调，很像黑猫警长里面的： 磨快了尖齿利爪到处巡行， 你给我们带来了生活安宁。</p><hr><p><a href="https://music.163.com/#/song?id=1984839875&userid=129662147"><em>秋风起</em></a>    歌手：<a href="https://music.163.com/artist?id=37127696">杨玙瑶</a> &#x2F; <a href="https://music.163.com/artist?id=49291515">Pao倪磊</a>    所属专辑：<a href="https://music.163.com/album?id=152295345">秋风起</a></p><p>莎士比亚曾经说过，适度的悲伤，可以表示感情的真切，过度的伤心呢，却可以证明智慧的缺陷，我觉得你可以去爱一个人，你念念不忘也好，撕心裂肺也罢，但你不能因为爱，就把自己永远的困在伤心难过之中，虽然你可能没追上月亮，但你要记得，在你追逐月亮的过程中，你也曾被月亮照亮过。</p><p>我们不会再见面 这就是分别的意义</p><blockquote><p>每一段生命的旅程，<br>都会赋予它独有的意义与价值。让自己成为自己的希望，<br>做一朵只为自己盛开的花，<br>在无声中绽放，<br>静静地欣赏加油！</p></blockquote><blockquote><p>“真没必要为三五年后的前途担忧，大家都乐观点，说不定到时候物是人非，瞬间豁然开朗。</p><p>当下便是最好的时光，及时行乐，与世界和解，我们不妨暂时不去想那些烦恼，去听喜欢的歌、拍想拍的照片、吃喜欢的甜点。</p><p>给好运一点时间，只管做自己，好运一定会如约而至。”</p></blockquote><p>别人离开只是在你的剧本里杀青了，而你永远是自己剧本里的主角。</p><p>我很喜欢导航里的一句话： “您已偏离路线，已为您重新规划路线，请您在路线合适位置选择掉头。”</p><p>宫崎骏有一段浪漫的语录：“其实我很早就知道我们不合适。但是我还是拒绝了所有人陪你走了一段没有结果的路 虽然时间不长 但毕生难忘。留住你和放过你 我都做不到。就像我坐在湖边 以为是海边.我吹着湖边的风 以为吹着的是海风.但湖是湖 海是海. ”</p><p>我们还没来得及说再见，所以，我不会把他当做离别，我们终将相逢。</p><hr><p><a href="https://music.163.com/#/song?id=2637776071&userid=129662147"><em>等了一个秋天</em></a>    歌手：<a href="https://music.163.com/artist?id=28299018">一只白羊</a> &#x2F; <a href="https://music.163.com/artist?id=58016285">张妙格</a> &#x2F; <a href="https://music.163.com/artist?id=12083260">潘成（皮卡潘）</a> &#x2F; <a href="https://music.163.com/artist?id=31571835">袁小葳</a> &#x2F; <a href="https://music.163.com/artist?id=53262224">pro</a> &#x2F; <a href="https://music.163.com/artist?id=34303818">程今</a> &#x2F; <a href="https://music.163.com/artist?id=95611939">小野来了</a>    所属专辑：<a href="https://music.163.com/album?id=251156737">等了一个秋天</a></p><p>小镇的秋天，是被打翻的调色盘 ，金黄的银杏叶在风中簌簌飘落，像一封封寄往远方的信。站在院子里，望着那棵老银杏树，心中的思念如秋草般疯长。</p><p>相处到最后，处的是良心</p><hr><p><a href="https://music.163.com/#/song?id=2637051110&userid=129662147"><em>这风太温柔</em></a>    歌手：<a href="https://music.163.com/artist?id=47131826">李雪萌</a> &#x2F; <a href="https://music.163.com/artist?id=47057408">音融三喜</a>    所属专辑：<a href="https://music.163.com/album?id=250885663">这风太温柔</a></p><p>眼睛可以眺望高空，双脚却必须踏在地上，梦想、愿望再大，每天也必须做好单纯，甚至桔燥的工作。</p><p>小雨在浇长凉凉的心，乌云在嘲笑小小的雨，仲冬的风，一山一山的滑，思绪也可飘然</p><blockquote><p>若能这般释然了这份遇见，我想不回头 </p><blockquote><p>如果结局注定如此 我希望一开始就是空欢喜</p></blockquote></blockquote><p>想对新的一年自己说，向前走 别回头，得到的就是最好的</p><p>时间的参照物是什么呢 也许是距离越来越远的我们</p><p>“肖申克的救赎里有这样一句话：总有一天你会笑着说出曾经令你痛苦的事情。”</p><p>你的人生就应该去看世界所有美好的风景</p><p>突然想回到初中的那个下午，风很柔，心很激动，拿着我手中的密码本，去交换我的爱情。</p><hr><p><a href="https://music.163.com/#/song?id=1966840652&userid=129662147"><em>无一不是你</em></a>    歌手：<a href="https://music.163.com/artist?id=783036">童可可</a>    所属专辑：<a href="https://music.163.com/album?id=148633602">无一不是你</a></p><blockquote><p>孩子：我长大以后要当医生。 </p><p>爸爸：好啊，医生收入多高啊! </p><p>妈妈：好啊，医生社会地位高! </p><p>奶奶：好啊，当个好医生名气多大啊! </p><p>爷爷：好啊，当医生人脉广，路子多啊! </p><p>孩子：医生不是治病救人的吗？ </p><p>――bilibili 浮生-十年</p></blockquote><p>“你需要变好，而不是一直后悔”</p><blockquote><p>我偷偷碰了你一下，却不料你如蒲公英散开，此后到处都是你的模样</p><blockquote><p>从此到处是你的影子 我该怎么逃</p><p>对，这很浪漫</p></blockquote></blockquote><p>无一是你，无一不是你</p><blockquote><p>“现在的爱情变质了，深情叫做舔狗，把渣当做荣誉”</p><blockquote><p>真诚在当今时代显得格外珍贵</p></blockquote></blockquote><hr><p><a href="https://music.163.com/#/song?id=2616978600&userid=129662147"><em>风过半山</em></a>    歌手：<a href="https://music.163.com/artist?id=47131826">李雪萌</a> &#x2F; <a href="https://music.163.com/artist?id=47057408">音融三喜</a>    所属专辑：<a href="https://music.163.com/album?id=244928252">风过半山</a></p><blockquote><p>“妈妈的肚子很大，可以装下一整个我” </p><p>“妈妈的肚子很小，好吃的一口就饱”</p></blockquote><p>云无心以出岫，鸟倦飞而知还。我还在等待年少时的群鸟归来，但群鸟在很多年前已经归家，只有我困在了当时平平淡淡的一天</p><p>“同频且真诚的人，本来就没那么容易遇见。”</p><blockquote><p>不知为何，突然脑后一沉，突然摸出了一根辫子。我大抵是病了，竟也开始学会了以貌取人，我总固执的认为只有五官精致的人才会被爱，总觉得只有瘦的人才配拥有爱，我好像陷入了那吃人的黑雾中，嘲笑着勇敢纯洁的人。看多了网络上精致的生活，却忘了自己的平凡和普通，</p><blockquote><p>也要接受你也是独一无二的呀</p><p>每个人都是独一无二的啊</p></blockquote></blockquote><hr><p><a href="https://music.163.com/#/song?id=1963691806&userid=129662147"><em>解相思</em></a>    歌手：<a href="https://music.163.com/artist?id=31880229">石玺彤</a>    所属专辑：<a href="https://music.163.com/album?id=148051899">解相思</a></p><p>“少年不做烂尾的诗集，要做，就做禁书里最惊世骇俗的那一章”</p><p>愿每一个醒来的日子，都有阳光相伴，或许在晴空，或许在心里</p>]]></content>
    
    
    <categories>
      
      <category>语录</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>合同的作用</title>
    <link href="/2003008/"/>
    <url>/2003008/</url>
    
    <content type="html"><![CDATA[<p>约定上限，设置下限</p>]]></content>
    
    
    <categories>
      
      <category>语录</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>有意思的语录_2</title>
    <link href="/2003016/"/>
    <url>/2003016/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.youtube.com/shorts/GWVxyqjoVyM">乾坤未定，你我都是黑马。 闹钟一响，你我都是牛马。</a></p><hr /><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs Test">海潮以永恒的节奏消涨起落<br>而现代的块节奏<br>让越来越多的人<br>过着潮汐般的生活<br></code></pre></td></tr></table></figure><hr /><p><a href="https://music.163.com/song?id=1856336476&userid=129662147">“为什我挑选你做我的助手，是因为你的眼睛里没有光。在现实世界里太熠熠生辉的人是无法进行创作的，而只有看上去黯淡的人才有自己的脑内世界。”</a></p>]]></content>
    
    
    <categories>
      
      <category>语录</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Alist使用MySQL引起FULLTEXT indexes解决</title>
    <link href="/2001004/"/>
    <url>/2001004/</url>
    
    <content type="html"><![CDATA[<h4 id="复现"><a href="#复现" class="headerlink" title="复现"></a>复现</h4><p>如果将Alist的数据库改成MySQL，在使用时不使用索引的情况下，没问题，但如果使用索引，那么有一定概率造成FULLTEXT indexes报错</p><p>该位置如下<br><img src="/img/2024/08/24/f27f96907881005f7cda5c31e27382e2.png" alt="f27f96907881005f7cda5c31e27382e2.png"></p><hr><h4 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h4><p>解决方法，将数据库中表的引擎进行更改</p><ul><li>使用Navicat<br><img src="/img/2024/08/24/71261311170c54f3bd7277bfa749f868.png" alt="71261311170c54f3bd7277bfa749f868.png"></li><li>使用Sql语句<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> your_table_name ENGINE <span class="hljs-operator">=</span> MyISAM;<br></code></pre></td></tr></table></figure></li></ul><hr><h4 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h4><p>在CentOS系统下，如果您使用的是MySQL 5.x版本，并且遇到了错误 “Error 1214 (HY000): The used table type doesn’t support FULLTEXT indexes”，这通常是因为您尝试在非InnoDB或MyISAM存储引擎的表上创建FULLTEXT索引。FULLTEXT索引在MySQL中只支持MyISAM和InnoDB存储引擎（从MySQL 5.6开始支持InnoDB）。<br>以下是一些解决步骤：</p><ol><li><strong>检查存储引擎</strong>：<br>首先，您需要检查您的表正在使用的存储引擎。您可以通过以下SQL命令来检查：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">TABLE</span> STATUS <span class="hljs-keyword">WHERE</span> Name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;your_table_name&#x27;</span>;<br></code></pre></td></tr></table></figure>或者针对具体的表：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> ENGINE <span class="hljs-keyword">FROM</span> information_schema.TABLES<br><span class="hljs-keyword">WHERE</span> TABLE_SCHEMA <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;your_database_name&#x27;</span> <span class="hljs-keyword">AND</span> TABLE_NAME <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;your_table_name&#x27;</span>;<br></code></pre></td></tr></table></figure></li><li><strong>转换存储引擎</strong>：<br>如果您的表不是使用MyISAM或InnoDB存储引擎，您需要将其转换为支持FULLTEXT索引的存储引擎。以下是将表转换为MyISAM的示例命令：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> your_table_name ENGINE <span class="hljs-operator">=</span> MyISAM;<br></code></pre></td></tr></table></figure>如果您希望使用InnoDB（推荐，因为它支持事务），并且您使用的是MySQL 5.6或更高版本，则可以使用以下命令：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> your_table_name ENGINE <span class="hljs-operator">=</span> InnoDB;<br></code></pre></td></tr></table></figure></li><li><strong>创建FULLTEXT索引</strong>：<br>在确认表使用的是正确的存储引擎后，您可以尝试再次创建FULLTEXT索引：<br>对于MyISAM表：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> your_table_name <span class="hljs-keyword">ADD</span> FULLTEXT(your_fulltext_index_name) (column1, column2, ...);<br></code></pre></td></tr></table></figure>对于InnoDB表（MySQL 5.6+）：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> your_table_name <span class="hljs-keyword">ADD</span> FULLTEXT(your_fulltext_index_name) (column1, column2, ...);<br></code></pre></td></tr></table></figure></li><li><strong>检查MySQL版本</strong>：<br>如果您正在使用的是MySQL 5.5或更早版本，并且希望使用InnoDB存储引擎的FULLTEXT索引，那么您需要升级到MySQL 5.6或更高版本，因为早期版本不支持InnoDB上的FULLTEXT索引。</li><li><strong>检查系统变量</strong>：<br>确保没有系统变量阻止您创建FULLTEXT索引。例如，<code>ft_min_word_len</code> 变量定义了可以包含在FULLTEXT索引中的最小单词长度。如果这个值设置得太高，可能会导致您无法为某些列创建FULLTEXT索引。</li><li><strong>检查表结构</strong>：<br>确保用于FULLTEXT索引的列数据类型是CHAR、VARCHAR或TEXT。<br>如果在完成上述步骤后仍然遇到问题，请检查MySQL的错误日志以获取更详细的错误信息，这可能会提供更具体的解决方案。同时，确保您的MySQL服务已经正确安装和配置，且没有其他系统级别的限制阻止了FULLTEXT索引的创建。</li></ol><hr /><h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><ul><li><a href="https://blog.csdn.net/qq_43175215/article/details/107060384">https://blog.csdn.net/qq_43175215&#x2F;article&#x2F;details&#x2F;107060384</a></li><li><a href="https://chatglm.cn/share/FjwT3">https://chatglm.cn/share/FjwT3</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>技术/软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Alist</tag>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>有意思的评论_1</title>
    <link href="/2003014/"/>
    <url>/2003014/</url>
    
    <content type="html"><![CDATA[<p>“《月亮与六便士》背后的一句话:“人生漫长转瞬即逝，有人见尘埃，有人见星辰。” ​<br>白日消逝的光辉，蓝色大海的风涌，世界万物不停流转，生活细细碎碎的点滴，那些美好的褪色的，拼凑了我们完完整整的人生，值得让我们活得肆意精彩。 ​”</p><hr />人活着不是为了爱与被爱人活着是为了自己喜欢的事而活爱是之一，不是唯一<hr />希望每个人死后尸体都能自动变成一本书，书的内容就是死者的生平。这样一来，有人成了名著，有人成了禁书，有人变成菜谱，有人变成地图，有人是美图秀秀使用手册，有人是小旅馆的登记簿……整个世界就是一个巨大的图书馆，我们读着别人，做着自己，等着被读。<hr />渐渐的你就会发现，你喜欢的人不喜欢你是一种常态，爱情这种事情看的是运气，喜欢是没有道理可讲的，你喜欢的人不喜欢你你就得认，你喜欢的人也喜欢你才是小概率事情，承认无能，才是我们对爱情最大的敬意。<hr /><ul><li><p>总会有一天，我的床头有你随意翻看的书，洗漱室的漱口杯旁是你的粉底液，更衣室的白衬衫里夹杂着你的白裙，车副座成了你的专属，朋友们无一不知道你的模样，连夜晚独自在客厅等我归来的都成了你最幸福的小事。然后我在前方，你大步靠近并勇敢地握住我的手，听我低头说：“我们回家吧。”</p></li><li><p>总会有一天，我的床头是你抛弃的玩偶，洗漱室的柜子里是你曾经用过的洗发水，更衣室的白衬衫上残留着你的香水味，车副座只有你的专属靠垫，朋友没无一不劝我忘记你的模样，连夜晚独自在客厅等你归来都成为我的奢望。然后你在门口，我大步走去并握紧你的手，你低声说：“我们后会有期吧。。。”</p></li></ul><hr />Ok! I think your new song is WOOOOOOYEAH!  It's a new style for your other songs. I'm very enjoy your new song. It make me feel better! Wish you can day day up (become better than yesterday) , Good wish for you , man!<hr />“要多吃水果哦，苹果橙子芒果。要多读书哦，小说历史哲学。要多表达爱哦，微笑拥抱亲吻。要多多努力哦，做一个可爱的人，在某人眼里闪闪发亮的人。” ​<hr />寂静的夜，空灵的星。孤独的影，清幽的音远方的路，迷失的人无声的歌，无懂的人寂静的夜，我的作业<hr />“我说不结婚可以吗？”“ 我妈只说了如果外面烟花升起 街坊四邻饭味溢出 大街上一家人手牵手出行 你能忍住不哭就可以”<hr />时光无错   孤独难谈看哭的不看，听哭的不听，自己保护自己，虽然是逃避，但是世界上永远没有谁离不了谁。分别是主旋律，愿自己坚强些吧。<hr />印着“谢谢参与”的饮料瓶盖不要扔 可以寄给那些进入过你的生活又离开的朋友这个世界已经够为难你了你本来就不快乐就不要再为难自己了更不要让不爱你的人给你添堵了好好爱自己，晚安好梦。<hr />我一个走，一个人看电影，一个人吃火锅，一个人去医院，在外人眼里我孤僻，但是他们并不知道，我自在的如同深海巨鲸<hr />学生时代的每到选择题都有正确答案，当你放下书包才发现人生的选择题永远没有所谓的正确答案。<hr />我告诉你 我喜欢你并不一定非要和你在一起只是希望今后的你在遭遇人生低谷的时候不要灰心至少曾经有人被你的魅力所吸引曾经是以后也会是<hr />如果你感到委屈，证明你还有底线 。如果你感到迷茫，证明你还有追求 。如果你感到痛苦，证明你还有力气 。如果你感到绝望，证明你还有希望 。从某种意义上，你永远都不会被打倒，因为你还有你 。——送给纠结的你<hr />仰望浩瀚的宇宙，无奈感叹于自己的渺小 深不见底的幽空充斥着无奈与寂落，但回首又见漫天的繁星，广阔的银河之中万物演化，生生不息 绝望中的希望 似乎才是真正的难能可贵<hr />我既然选择了你，哪能这么轻易的放弃，但是哪天我真的放弃了，请你记得，是因为你的不在乎<hr />到了夜晚，他们就把月光排列成一行一行；到了早晨，他们就把露珠排列成一行一行；到了冬天，他们就把雪排列成一行一行；那些爱写田园诗的秀才看见了，就学着把文字排列成一行一行。<hr />做个温柔的人.眼里藏着星星.<hr />或许生活总是充满着未知的变数，我也依旧期盼着花信风的到来；或许即将与音乐相别一年，我也不会忘记曾有过这样一个梦想；或许哪天，我无法再写下那些我曾苦苦追求的旋律，但，至少，我从未后悔过......<hr />明月时隐时现，清风若即若离。虚幻无常飘天际，云儿自游移。<hr />一切都会过去，何苦痴存记忆？听玉泉带走山情思，看薄雾悄抚大地。<hr />虫鸣依萦幽谷，偶闻夜莺歌啼。星星且请将息去，让花香漾进梦里。<hr />枝叶轻轻婆娑，疏影静静摇曳。一个山果掉水中，蛙声沉入塘底。<p>——天马的诗《明月》</p><hr />正因为天高之不可触，我们才会向往更高处翱翔。也正是因为梦想耀目之不可及，我们才会渴望更远处追逐。真正的强者从来不痴迷于飞行的高度，他们痴迷的是闯破自我限界的畅快，是那种触摸到更深天空的愉悦。<hr />不适合的鞋子，就不要硬塞了，磨的是自己的脚；打电话对方不接，就不要一次又一次重播了，珍惜你的人会第一时间打来；搬走的餐厅，就不要大老远过去吃了，你的时间不能一直花在追随的路上。所有人和事，自己问心无愧就好，不是你的也别强求，反正离去的，都是风景，留下的，才是人生。<hr />你喜欢白开水，正巧我是一瓶雪碧，我不会去摇晃自己，因为那样只会变成一杯糖水，永远不会是你喜欢的样子，不合适便是不合适，没有必要为了任何人改变自己。<hr />你这辈子有没有跟谁说过我爱你？说过啊，很多回，不同的人。我没听过！Baby i love you o sole mio。说母语！爱你。谁啊？我。你爱谁？你！<hr />“生物必刷题上有这么一句话，就算全世界都抛弃了你，但是你要记住，你身上还有几十亿的细胞，仅为你而活”<hr />好喜欢人民日报这段激励的话：“无人问津也好 技不如人也罢 你都要试着安静下来 去做自己该做的事 而不是让内心的烦躁 焦虑 毁掉你本就不多的热情和定力”<hr />那些我以为  是特别的  其实也不过如此<hr />发现一种特别舒服的关系，并不总是你一言我一语的秒回，有时候愿意把我现在看到的所有东西一股脑儿的发给你，不用组织好精简的语言，啰哩啰嗦也不怕有哪句话说错，发完也不会等着回复，因为我知道你总会看见，是信任和任何时候都不会被丢下的安定感。<hr />遇见你就像猫咪的世界下起了小鱼<hr />路边的小广告写着 “太阳能维修” ， 有人用笔在下边接了句 “月亮可更换”， 隔天又多了一句 “星星不闪包退换”<hr />宫崎骏有一段浪漫的语录：“其实我很早就知道我们不合适。但是我还是拒绝了所有人陪你走了一段没有结果的路 虽然时间不长 但毕生难忘。留住你和放过你 我都做不到。就像我坐在湖边 以为是海边.我吹着湖边的风 以为吹着的是海风.但湖是湖 海是海. ”<hr />大海深处有一家便利店售卖着蓝色的孤独森林深处有一家便利店售卖着绿色的寂寞云层之上有一家便利店贩卖着粉色的温柔阳光近处有一家便利店售买着金色的温暖内心深处有一家便利店贩卖着真挚的情感<hr />潜游到深海，取得了孤独深入森林，喜得寂寞直冲上云霄，加倍温柔靠近阳光，充满喜悦与温暖可我还是进不了你的内心你将我拒与于万门之外我才发现，空有温柔与温暖是不够的你得抛下你的孤独与寂寞重新拥抱生活<hr />我们终其一生寻找的，应该是能喜欢的生活方式和想成为的人。所以多走点弯路没关系的,花很多时间在路上也不要紧的。只要你在成为你的路上就够了。如果你赶不上凌晨五点的日出,不妨看看傍晚六点的夕阳。希望你有足了的勇气 面对风 面对雪 面对朝阳希望你永远自由的活着，永远在看花的路上。是的，我们这一生为了什么，无非就是爱的人和喜欢的生活方式，未来可期。<hr />你熬的不是夜，你熬的是你妈，你妈都要被你熬没了<hr />爱你的人给了你力量，批评你的人给了你清醒，帮助你的人给了你机会，陷害你的人给了你胸怀，赞扬你的人给了你信心，抹黑打击你的人给了你坚强，但凡是岁月馈赠于你的，都有他的道理，岁月给你的沉淀，让人成长，生命中遇到的各种苦难磨难和劫难，有福之人才配经历，命运送你的，暗中都标好了他的意义。<hr />好喜欢人民日报这段激励的话：“无人问津也好 技不如人也罢 你都要试着安静下来 去做自己该做的事 而不是让内心的烦躁 焦虑 毁掉你本就不多的热情和定力”<hr />1.不要看见别人发光就觉得自己暗淡2. 别计较太多，怎么快乐怎么过3. 耳边的声音太多不如早睡4. 取悦自己才是头等大事<hr />民谣有三：姑娘，吉他，南北方听者有三：香烟，孤独，还有酒<hr />小时候不理解老人晒太阳，一坐就是半天，长大了才明白，目之所及皆是回忆，心之所想皆是过往，眼之所看皆是遗憾！我们终于得到了小时候最羡慕的年纪，却没有成为小时候想成为的人。而我们却是在别人最羡慕的年纪，依旧有着大把时光可以为我们的梦想而抛洒。“回忆啊，再不晒晒就发霉了！”<hr />如果今天的你感到幸福，请不要忘记，感谢过往那个默默努力的自己。晚安<hr />人生中出现的一切，都无法拥有，只能经历。深知这一点的人，就会懂得：无所谓失去，只是经过而已；无所谓失败，只是经验而已。用一颗浏览的心，去看待人生，一切的得与失、隐与显，都是风景与风情。 所以，请别害怕，目前的困难只是经历和经过而已！<hr />世界就像一个万花筒，有的绿，有的黄，都在各自的领域发光。<hr />你讨厌父亲的平庸，却不知道他也是个怀揣梦想的男孩，你讨厌母亲的市侩圆滑，却不知道她也和你一样憧憬过未来，你的父亲曾经也是意气风发的少年郎，眉眼如剑翩翩风骨，你的母亲曾经也是窈窕淑女，眉眼含春，一笑惊艳了时光。在我们看不到的地方，父母一直都在对这个世界低声下气]]></content>
    
    
    <categories>
      
      <category>语录</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>云南移动机顶盒-改源安装软件</title>
    <link href="/2001006/"/>
    <url>/2001006/</url>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><code>由于运营商的机顶盒存在着安装软件的限制，同时设置里面的adb无法打开 因此另辟西路解决-机顶盒为移动和广电联合的机顶盒</code></p><blockquote><p><img src="/../../img/2024/07/02/a0f58d9fc0c66d1a3e7e6e8bd76480f3.jpg" alt="a0f58d9fc0c66d1a3e7e6e8bd76480f3.jpg"><br><img src="/../../img/2024/07/02/826d2f8c23e42585a31b9f9e15a9b565.jpg" alt="826d2f8c23e42585a31b9f9e15a9b565.jpg"></p></blockquote><h1 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h1><ul><li>路由器&#x2F;光猫（支持添加路由）</li><li>一台电脑，建议Windows(我用的Windows抓包，macos搭服务)，如有条件，建议2台</li><li>使用虚拟机或将一个路由器的网段改成目的网段</li></ul><h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>至少2种方法</p><blockquote><blockquote><p>使用虚拟机创建网卡为目的网段，将虚拟机的ip设置为目的ip，在路由器设备上添加路由指向物理主机，并在物理主机上做路由转发。</p></blockquote><blockquote><p>把一个路由器的网段改为目的网络的段，然后手动配ip，在机顶盒连接的网络设备上添加路由指向这个路由器。<br>注：需要2个路由器，因为其他的网络业务会用到这个网段的其他ip，因此不能让机顶盒处于这个网段中</p></blockquote></blockquote><blockquote><p>以上两种方法我都试过，差别仅仅在于路由的时候单独使用路由器来做转发还是在电脑上做配置，电脑上存在防火墙等情况，不确定能否实现转发策略</p><blockquote><p>本文主要记录第二种方法，物理机的部分</p></blockquote></blockquote><h1 id="机顶盒型号"><a href="#机顶盒型号" class="headerlink" title="机顶盒型号"></a>机顶盒型号</h1><blockquote><p><img src="/../../img/2024/07/02/e0244d0c5b85114d6537f11b3dfdaabb.jpg" alt="e0244d0c5b85114d6537f11b3dfdaabb.jpg"></p></blockquote><h1 id="网络连接"><a href="#网络连接" class="headerlink" title="网络连接"></a>网络连接</h1><h2 id="抓包"><a href="#抓包" class="headerlink" title="抓包"></a>抓包</h2><blockquote><p>抓包，如果路由器有端口镜像，可以直接使用端口镜像后抓数据包，路由器不支持，我采用下面的方法进行</p><blockquote><p>把Windows连接到Wifi，在【网络适配器】，右击无线网卡，【属性】【共享】，选择有线网卡<br><img src="/../../img/2024/07/02/8f2443b36d9da4886d858bd107a001f2.jpg" alt="8f2443b36d9da4886d858bd107a001f2.jpg"></p></blockquote><p>我用<a href="https://www.wireshark.org/">Wireshark</a>进行抓包，打开后选择有线网卡即可开始抓包</p></blockquote><h2 id="分析数据包"><a href="#分析数据包" class="headerlink" title="分析数据包"></a>分析数据包</h2><blockquote><p>第二张图那里，有个【应用中心】，可以通过Wireshark看到数据包的传输<br>可以看到如下数据 [搜索A] [我改了部分数据]<br><code>http://*.*.*.*:9091/app_epg/api/search/search.json?initals=A&amp;size=*&amp;pageindex=*&amp;apkChannel=*</code><br>复制下来，使用Get访问会的到如下数据<br>[<img src="/../../img/2024/07/02/c41a514d0afaf9f28cb659137b06fe6c.jpg" alt="c41a514d0afaf9f28cb659137b06fe6c.jpg">]</p><blockquote><p>恭喜你，通过这个连接，你可以自由的下载【应用中心】中的各类apk</p></blockquote></blockquote><blockquote><p>此时再点进一个应用，会发现有一个json数据，这个json中包含着软件的信息</p><blockquote><p>访问json,会得到如下数据[ES文件浏览器],这是我自己改过的</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">200</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;app&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;appId&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;app_*&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;packageName&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;com.estrongs.android.pop&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;ES文件浏览器&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;simpleDes&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;score&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;9.0&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;downloadUrl&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;http://*.*.*.*/es.apk&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;versionCode&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;4268&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;versionName&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;4.2.6.8&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;fileSize&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;36828172&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;updateTime&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;2024-06-14&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;downloadNum&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;descripiton&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;这是一个文件浏览器，浏览文件的浏览器&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;pics&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-string">&quot;http://*.*.*.*/logo-108-108.png&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;http://*.*.*.*/logo-108-108.png&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;flag&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;1&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;apptype_*&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;language&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;中文&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;lastUpdateDes&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;apkMd5&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;52fee4ee728e89dd6890e2ab2b7714ec&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;needUpdate&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;autoInstall&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;autoUpdate&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">0</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>数据对应的位置如下图所示[下载软件中]<br><img src="/../../img/2024/07/02/6596cc2b091c3e2d5e4ecad815038750.jpg" alt="6596cc2b091c3e2d5e4ecad815038750.jpg"><br>下载之后会自动安装<br><img src="/../../img/2024/07/02/4e4660193101f224069d2a1848930446.jpg" alt="4e4660193101f224069d2a1848930446.jpg"><br>安装之后运行<br><img src="/../../img/2024/07/02/b9a94b681237c980ddd76fff02bd277f.jpg" alt="b9a94b681237c980ddd76fff02bd277f.jpg"><br><img src="/../../img/2024/07/02/12d04af8814af61f0093dd27c01dce44.jpg" alt="12d04af8814af61f0093dd27c01dce44.jpg"><br><img src="/../../img/2024/07/02/09efd9d0d40f6f17e19e8315d81dc305.jpg" alt="09efd9d0d40f6f17e19e8315d81dc305.jpg"></p></blockquote><p>如果要传文件到机顶盒上，把机顶盒的网线插到和笔记本同一个网络的路由器等设备上，使用ES的局域网传文件即可解决</p><p>使用es安装的时候，选择apk，直接安装即可，会自动安装软件，机顶盒支持鼠标，如果遥控不好用，可以直接使用鼠标</p></blockquote><h2 id="运行Nginx服务"><a href="#运行Nginx服务" class="headerlink" title="运行Nginx服务"></a>运行Nginx服务</h2><p>使用电脑安装Nginx服务，再配置nginx.config文件<br>局部配置如下,如果需要，记得对照上面的图，把数据改成你自己的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs nginx.config">server &#123;<br>    listen 9091;<br>    server_name 183.[改成你抓到json包的ip] localhost 127.0.0.1 0.0.0.0;<br><br>    index index.php index.html index.htm default.php default.htm default.html;<br>    <br>    # location / &#123;<br>    #     default_type application/json;<br>    #     return 200 &#x27;&#123;&quot;status&quot;: 200, &quot;message&quot;: null&#125;&#x27;;<br>    # &#125;<br>    location / &#123;<br>        default_type application/json;<br>        return 200 &#x27;&#123;&quot;status&quot;:200,&quot;message&quot;:null,&quot;app&quot;:&#123;&quot;appId&quot;:&quot;app_*&quot;,&quot;packageName&quot;:&quot;com.estrongs.android.pop&quot;,&quot;name&quot;:&quot;ES文件浏览器&quot;,&quot;simpleDes&quot;:&quot;&quot;,&quot;score&quot;:&quot;9.0&quot;,&quot;downloadUrl&quot;:&quot;http://*.*.*.*/es.apk&quot;,&quot;versionCode&quot;:&quot;4268&quot;,&quot;versionName&quot;:&quot;4.2.6.8&quot;,&quot;fileSize&quot;:&quot;36828172&quot;,&quot;updateTime&quot;:&quot;2024-06-14&quot;,&quot;downloadNum&quot;:&quot;&quot;,&quot;descripiton&quot;:&quot;这是一个文件浏览器，浏览文件的浏览器&quot;,&quot;pics&quot;:[&quot;http://*.*.*.*/logo-108-108.png&quot;],&quot;icon&quot;:&quot;http://*.*.*.*/logo-108-108.png&quot;,&quot;flag&quot;:&quot;1&quot;,&quot;type&quot;:&quot;apptype_*&quot;,&quot;language&quot;:&quot;中文&quot;,&quot;lastUpdateDes&quot;:&quot;&quot;,&quot;apkMd5&quot;:&quot;52fee4ee728e89dd6890e2ab2b7714ec&quot;,&quot;needUpdate&quot;:1,&quot;autoInstall&quot;:1,&quot;autoUpdate&quot;:0&#125;&#125;&#x27;;        &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><blockquote><p>建议，先到应用的列表，然后再将路由之类的指向你开服务的电脑，这时候再点进去，数据就是你改的</p><p>如果你一来就把路由指向你自己开服务的ip，那么会造成应用商店的页面加载不出来【因为你用的这个ip不止跑着这一个服务，应用列表等都再跑】，你也可以把其他包都用nginx搭建</p><p>包名一定要时你软件的包名，md5，size这些都必须时你软件的，不然会提示【文件不完整】</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>技术/软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>机顶盒</tag>
      
      <tag>Nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>我希望有个如你一般的人</title>
    <link href="/2003011/"/>
    <url>/2003011/</url>
    
    <content type="html"><![CDATA[<p>我希望有个如你一般的人。<br>　　如这山间清晨一般明亮清爽的人<br>　　如奔赴古城道路上阳光一般的人<br>　　温暖而不炙热，<br>　　覆盖我所有肌肤。<br>　　由起点到夜晚，<br>　　由山野到书房，<br>　　一切问题的答案都很简单。<br>　　我希望有个如你一般的人，<br>　　贯彻未来，<br>　　数遍生命的公路牌。</p><p><a href="https://zhuanlan.zhihu.com/p/131684869?utm_id=0">https://zhuanlan.zhihu.com/p/131684869?utm_id=0</a></p>]]></content>
    
    
    <categories>
      
      <category>语录</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Win 多用户同时登录</title>
    <link href="/2001003/"/>
    <url>/2001003/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>转载自-<a href="https://www.wyr.me/post/701">https://www.wyr.me/post/701</a></p><p>winHex-<a href="https://www.52pojie.cn/thread-1252078-1-1.html">https://www.52pojie.cn/thread-1252078-1-1.html</a></p><h2 id="修改文件内容"><a href="#修改文件内容" class="headerlink" title="修改文件内容"></a>修改文件内容</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">C:\Windows\System32\termsrv.dll<br>39 81 3C 06 00 00 0F 84 XX XX XX XX<br>替换为:<br>B8 00 01 00 00 89 81 38 06 00 00 90<br></code></pre></td></tr></table></figure><h2 id="修改组策略"><a href="#修改组策略" class="headerlink" title="修改组策略"></a>修改组策略</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">打开住策略编辑器命令<br>gpedit.msc<br></code></pre></td></tr></table></figure><p>打开<code>编辑组策略</code>应用，进入<code>本地计算机策略</code>–<code>计算机配置</code>–<code>管理模板</code>–<code>Windows组件</code>–<code>远程桌面服务</code>–<code>远程桌面会话主机</code>–<code>连接</code>。</p><h2 id="参考视频"><a href="#参考视频" class="headerlink" title="参考视频"></a>参考视频</h2><p>B站录屏地址-<a href="https://www.bilibili.com/video/BV12h411M7vp/">https://www.bilibili.com/video/BV12h411M7vp/</a></p><iframe src="//player.bilibili.com/player.html?isOutside=true&aid=227395045&bvid=BV12h411M7vp&cid=1095208885&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>]]></content>
    
    
    <categories>
      
      <category>技术/软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Windows</tag>
      
      <tag>笔记</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>我的下面可以给任何人看，但我的真心只能给你看</title>
    <link href="/2003012/"/>
    <url>/2003012/</url>
    
    <content type="html"><![CDATA[<p>我的下面可以给任何人看，但我的真心只能给你看</p><p>舍友语录</p>]]></content>
    
    
    <categories>
      
      <category>语录</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>去除信号x[adb命令]</title>
    <link href="/2001008/"/>
    <url>/2001008/</url>
    
    <content type="html"><![CDATA[<p>手机为原生系统，可能连接wifi会遇到【网络连接受限】,移动数据有个x，wifi也有个x的情况。</p><p>我个人将其称之为: 【信号x】</p><hr><p>先打开手机的usb设备调试，之后连接电脑，电脑的adb环境下输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs BASH">adb shell settings put global captive_portal_https_url http://www.google.cn/generate_204;<br></code></pre></td></tr></table></figure><p>之后，重新开关手机飞行模式即可，或者重启手机也行</p><hr><p>下载<a href="https://developer.android.google.cn/tools/releases/platform-tools?hl=zh-cn">adb环境</a><br>解压后在解压的目录下运行上述命令，如果为Linux或MacOS系统，则需要加上.&#x2F;</p><p>如果不会操作，可尝试与我取得联系，QQ<code>2777610842</code>微信<code>a844660952</code></p><hr><p>如果安卓7.1&#x2F;7.0&#x2F;6.X如果使用上面的命令不行，可以试试下面代码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs BASH">adb shell settings delete global captive_portal_serveradb shell settings put global captive_portal_detection_enabled 0<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>技术/软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ADB</tag>
      
      <tag>手机</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Alist下载站存个档_2023-03-31</title>
    <link href="/2001002/"/>
    <url>/2001002/</url>
    
    <content type="html"><![CDATA[<p>存储下载站目前的样式等-2023-03-31</p><hr><p>自定义样式</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">async</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9160775120589255&quot;</span></span><br><span class="hljs-tag">     <span class="hljs-attr">crossorigin</span>=<span class="hljs-string">&quot;anonymous&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">type</span>=<span class="hljs-string">text/css</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-comment">/*</span></span><br><span class="hljs-comment"><span class="language-css">   body &#123;background-image:url(https://tuapi.eees.cc/api.php?category=fengjing&amp;type=302) ;//图片类型更换请修改参数  </span></span><br><span class="hljs-comment"><span class="language-css"></span></span><br><span class="hljs-comment"><span class="language-css"></span></span><br><span class="hljs-comment"><span class="language-css"></span></span><br><span class="hljs-comment"><span class="language-css">https://images.anime-pictures.net/9c8/9c8b700cfd350c523814b9cf6a7840c9.jpg?if=ANIME-PICTURES.NET_-_48318-2000x1125-strike+witches-charlotte+e+yeager-long+hair-single-blush-highres.jpg</span></span><br><span class="hljs-comment"><span class="language-css"></span></span><br><span class="hljs-comment"><span class="language-css">https://images.anime-pictures.net/8ba/8ba83bb346eabcc31f9416b8fdf16ed0.jpg?if=ANIME-PICTURES.NET_-_488421-3840x2160-original-assassinwarrior-dmith+%28baguscasbon%29-long+hair-single-blush.jpg</span></span><br><span class="hljs-comment"><span class="language-css">*/</span></span><br><span class="language-css">   <span class="hljs-selector-tag">body</span> &#123;<span class="hljs-attribute">background-image</span>:<span class="hljs-built_in">url</span>(<span class="hljs-string">https://images.anime-pictures.net/b84/b8404c435d8b147548bed1971aefdd38.jpg?if=ANIME-PICTURES.NET_-_496625-3200x1800-vocaloid-hatsune+miku-bai+yemeng-single-blush-highres.jpg</span>) ;</span><br><span class="language-css">  <span class="hljs-attribute">background-repeat</span>:no-repeat;<span class="hljs-attribute">background-size</span>:cover;<span class="hljs-attribute">background-attachment</span>:fixed;<span class="hljs-attribute">background-position</span>-x:center;</span><br><span class="language-css">   <span class="hljs-attribute">background-repeat</span>:repeat;</span><br><span class="language-css">   <span class="hljs-attribute">background-attachment</span>:fixed;</span><br><span class="language-css">   <span class="hljs-attribute">background-position</span>:<span class="hljs-number">50%</span> <span class="hljs-number">50%</span>;</span><br><span class="language-css">   &#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-comment">/*</span></span><br><span class="hljs-comment"><span class="language-css">.main-box &#123;</span></span><br><span class="hljs-comment"><span class="language-css">  border-radius: 15px !important;</span></span><br><span class="hljs-comment"><span class="language-css">&#125;</span></span><br><span class="hljs-comment"><span class="language-css">.chakra-ui-light .main-box &#123;</span></span><br><span class="hljs-comment"><span class="language-css">  background-color: #ffffff70 !important;</span></span><br><span class="hljs-comment"><span class="language-css">&#125;</span></span><br><span class="hljs-comment"><span class="language-css">.chakra-ui-light .readme-box &#123;</span></span><br><span class="hljs-comment"><span class="language-css">  background-color: white !important;</span></span><br><span class="hljs-comment"><span class="language-css">&#125;</span></span><br><span class="hljs-comment"><span class="language-css">.readme-box &#123;</span></span><br><span class="hljs-comment"><span class="language-css">  border-radius: 15px !important;</span></span><br><span class="hljs-comment"><span class="language-css">&#125;</span></span><br><span class="hljs-comment"><span class="language-css">*/</span></span><br><span class="language-css"><span class="hljs-comment">/* 去除通知栏 右上角 X */</span></span><br><span class="language-css"><span class="hljs-selector-class">.notify-render</span> <span class="hljs-selector-class">.hope-close-button</span>&#123;</span><br><span class="language-css"><span class="hljs-attribute">display</span>: none;</span><br><span class="language-css">&#125;</span><br><span class="language-css"><span class="hljs-comment">/*去掉底部*/</span></span><br><span class="language-css"><span class="hljs-selector-class">.footer</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">display</span>: none <span class="hljs-meta">!important</span>;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-comment">/*主列表透明*/</span></span><br><span class="language-css"><span class="hljs-selector-class">.obj-box</span><span class="hljs-selector-class">.hope-stack</span><span class="hljs-selector-class">.hope-c-dhzjXW</span><span class="hljs-selector-class">.hope-c-PJLV</span><span class="hljs-selector-class">.hope-c-PJLV-igScBhH-css</span> &#123;</span><br><span class="language-css"><span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.6</span>) <span class="hljs-meta">!important</span>;</span><br><span class="language-css">&#125;</span><br><span class="language-css"><span class="hljs-comment">/*readme透明*/</span></span><br><span class="language-css"><span class="hljs-selector-class">.hope-c-PJLV</span><span class="hljs-selector-class">.hope-c-PJLV-ikSuVsl-css</span>&#123;</span><br><span class="language-css"><span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.5</span>) <span class="hljs-meta">!important</span>;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-color: rgba(255, 255, 120, 0.2) !important;border-radius:10%;&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">del</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color:#009688&quot;</span>&gt;</span>如背景不适，右下角设置按钮，将模式改为暗黑模式可隐藏部分<span class="hljs-tag">&lt;/<span class="hljs-name">del</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color:#870000&quot;</span>&gt;</span>所有资源均来自用户自愿分享，仅供学习交流使用，<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;nofollow noopener&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;__blank&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;mailto:ucu520@126.com&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-decoration:inherit;color: #8C40E2;&quot;</span>&gt;</span>如有侵权请点我联系删除<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color:#ffd3d3&quot;</span>&gt;</span>鸣谢：<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://github.com/alist-org/alist&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;view_window&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: aquamarine&quot;</span>&gt;</span>Alist<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://office.com&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;view_window&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: cornflowerblue&quot;</span>&gt;</span>Office<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://yunpan.aliyun.com&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;view_window&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: darksalmon&quot;</span>&gt;</span>阿里云盘<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://www.ucu520.top&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;view_window&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color:deepskyblue&quot;</span>&gt;</span>开心ucu<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span>  <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color:white&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://beian.miit.gov.cn/&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;view_window&quot;</span>&gt;</span>滇ICP备19001709号-1<span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display:none&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>https://images.anime-pictures.net/016/01684cc3b858a52412e49ef9b9e3df48.jpg?if=ANIME-PICTURES.NET_-_489858-2560x1440-k-on%21-re%3Azero+kara+hajimeru+isekai+seikatsu-kyoto+animation-rem+%28re%3Azero%29-emilia+%28re%3Azero%29-ram+%28re%3Azero%29.jpg<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>   body &#123;background-image:url(https://images.anime-pictures.net/b8f/b8f1b5d946cdde0117efdcc9208f78df.jpeg?if=ANIME-PICTURES.NET_-_776129-1920x1080-original-gou+lianlian+dogface-single-long+hair-looking+at+viewer-blush.jpeg) ;<br><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://alist.ucu520.ml/&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;view_window&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color:white&quot;</span>&gt;</span>不需要这么花哨的请点我<span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><br> <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://tuapi.eees.cc/ccoo/2020-10-8.html&quot;</span> <span class="hljs-attr">target</span>=<span class="hljs-string">&quot;view_window&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: coral&quot;</span>&gt;</span>随机图片API<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><hr><p>自定义头部</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">var</span> _hmt = _hmt  [];</span><br><span class="language-javascript">(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">  <span class="hljs-keyword">var</span> hm = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;script&quot;</span>);</span><br><span class="language-javascript">  hm.<span class="hljs-property">src</span> = <span class="hljs-string">&quot;https://hm.baidu.com/hm.js?f0f72a2a90a1697378d38f588c6b0485&quot;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">var</span> s = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByTagName</span>(<span class="hljs-string">&quot;script&quot;</span>)[<span class="hljs-number">0</span>]; </span><br><span class="language-javascript">  s.<span class="hljs-property">parentNode</span>.<span class="hljs-title function_">insertBefore</span>(hm, s);</span><br><span class="language-javascript">&#125;)();</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://polyfill.io/v3/polyfill.min.js?features=String.prototype.replaceAll&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--引入字体，全局字体使用--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://npm.elemecdn.com/lxgw-wenkai-webfont@1.1.0/lxgwwenkai-regular.css&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><hr><p>站点公告</p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">&gt; 由于搜索功能需手动刷新，且每次建立都需大量时间，因此搜索的内容不是最新的，建议手动找文件夹<br><br>&gt; 由于站点挂载的大部分存储源为SP，直接使用浏览器下载可能速度会很慢，建议使用多线程下载工具，如IDM，FDM，Motrix等，请勿使用迅雷下载本站资源<br><br>```如果您访问的存储点为【kindle-[OneDrive]】，由于部分人有点分不清，因此改为了【kindle-漫画-[OneDrive]】```<br><br>```本站支持Alist套娃，本站使用的是Alist3```<br><br>```漫画/动漫交流QQ群 <span class="hljs-number">481482654</span>，备注【开心ucu】```<br><br>```技术等探讨QQ群 <span class="hljs-number">632565204</span>```<br><br>### 本站支持webdav<br>```地址```<br>```https://alist.ucu520.top/dav```<br><br><br>```如果软件需要填写目录```<br><br>```地址填https://alist.ucu520.top```<br>```目录填dav```<br><br>```账号```<br>```alist.ucu520.top```<br><br>```密码```<br>```www.ucu520.top```<br><br>```请理性使用，请勿乱动东西```<br>```webdav建议用第三方软件挂载使用```<br><span class="hljs-title">参考[B站](https:</span>//www.bilibili.com/video/BV1UT411P7Mr/)  <br><span class="hljs-title">[下载站整理集合](https:</span>//docs.qq.com/sheet/DZWJza2hGVFJsaGl3?tab=BB08J2)<br><span class="hljs-title">[QQ频道](https:</span>//pd.qq.com/s/hobyfiylr)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>技术/软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Alist</tag>
      
      <tag>下载站</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>防晒霜和防晒伞结合</title>
    <link href="/2002001/"/>
    <url>/2002001/</url>
    
    <content type="html"><![CDATA[<p>市面上如果有这东西，销量会如何，又会以什么样的形式收费，伞把子当防晒霜也不错</p>]]></content>
    
    
    <categories>
      
      <category>点子</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>2022嘉兴旅</title>
    <link href="/2003001/"/>
    <url>/2003001/</url>
    
    <content type="html"><![CDATA[<p>逢场作戏 </p><p>多考证 </p><p>大哥给大钱，小弟给小钱 </p><p>直接送走 </p><p>你的生活我的梦 </p><p>必须到位</p>]]></content>
    
    
    <categories>
      
      <category>语录</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>重要的不是开始</title>
    <link href="/2003017/"/>
    <url>/2003017/</url>
    
    <content type="html"><![CDATA[<p>重要的不是开始，也不是中途，是最后啊</p>]]></content>
    
    
    <categories>
      
      <category>语录</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>以前不让你乱跑，是怕你惹事，今天，你想怎么跑，你自己定。</title>
    <link href="/2003006/"/>
    <url>/2003006/</url>
    
    <content type="html"><![CDATA[<p>以前不让你乱跑，是怕你惹事，今天，你想怎么跑，你自己定。</p><p>来源长津湖</p>]]></content>
    
    
    <categories>
      
      <category>语录</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>不是因为拥有力量才该去做什么</title>
    <link href="/2003003/"/>
    <url>/2003003/</url>
    
    <content type="html"><![CDATA[<p>而是因为想做什么，才去追求力量并加以使用</p>]]></content>
    
    
    <categories>
      
      <category>语录</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>不要拿自己的兴趣爱好和别人的工作相比</title>
    <link href="/2003005/"/>
    <url>/2003005/</url>
    
    <content type="html"><![CDATA[<p>不要拿自己的兴趣爱好和别人的工作相比</p>]]></content>
    
    
    <categories>
      
      <category>语录</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>不是用户要什么就给什么</title>
    <link href="/2003004/"/>
    <url>/2003004/</url>
    
    <content type="html"><![CDATA[<p>满足底层需求</p>]]></content>
    
    
    <categories>
      
      <category>语录</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>套路是假的，爱你是真的</title>
    <link href="/2003009/"/>
    <url>/2003009/</url>
    
    <content type="html"><![CDATA[<p>套路是假的，爱你是真的</p>]]></content>
    
    
    <categories>
      
      <category>语录</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>一个风扇一阵风，吹进xxx心窝中</title>
    <link href="/2003002/"/>
    <url>/2003002/</url>
    
    <content type="html"><![CDATA[<p>一个风扇一阵风，吹进我的心窝中<br>一个风扇一阵风，吹进XX的婚姻里</p>]]></content>
    
    
    <categories>
      
      <category>语录</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>平台，贵人指路，个人努力，持久</title>
    <link href="/2003010/"/>
    <url>/2003010/</url>
    
    <content type="html"><![CDATA[<p>好的发现离不开社会，遇到对的人是多么幸运。</p>]]></content>
    
    
    <categories>
      
      <category>语录</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>手段，目的，为什么</title>
    <link href="/2003013/"/>
    <url>/2003013/</url>
    
    <content type="html"><![CDATA[<p>在学校，学习是手段，目的是找工作 工作是手段，目的是赚钱，为了花钱</p>]]></content>
    
    
    <categories>
      
      <category>语录</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>停用噢易多媒体网络教室软件</title>
    <link href="/2001007/"/>
    <url>/2001007/</url>
    
    <content type="html"><![CDATA[<p>如果将内容复制到文件中，改名为.bat  可双击直接运行</p><p>该方案原理是搜索噢易多媒体网络教室软件的进程，然后将其全部杀死。使用一个循环来不断搜索，一监测到有相关进程就再次杀死进程</p><p>停用命令</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs BAT">@<span class="hljs-built_in">echo</span> off<br>:one<br><span class="hljs-keyword">for</span> <span class="hljs-variable">%%p</span> <span class="hljs-keyword">in</span> (<br>Ctsc_Multi.exe , DeviceControl_x64.exe , HRMon.exe , MultiClient.exe , OAtiveII-Client.exe , OEClient.exe , OELogSystem.exe , OEUpdate.exe , OEProtect.exe , ProcessProtect.exe , RunClient.exe , RunClient.exe , ServerOSS.exe , Student.exe , wfilesvr.exe , tvnserver.exe , updatefilesvr.exe , ScreenRender.exe ) <span class="hljs-keyword">do</span> <span class="hljs-built_in">taskkill</span> /f /IM <span class="hljs-variable">%%p</span><br><span class="hljs-keyword">goto</span> two<br><br>:two<br><span class="hljs-keyword">for</span> <span class="hljs-variable">%%p</span> <span class="hljs-keyword">in</span> (<br>DeviceControl_x64.exe , tvnserver.exe , Student.exe ) <span class="hljs-keyword">do</span> <span class="hljs-built_in">taskkill</span> /f /IM <span class="hljs-variable">%%p</span><br><span class="hljs-keyword">goto</span> two<br></code></pre></td></tr></table></figure><p>启用命令，根据自己的路径进行更改</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs CMD"><span class="hljs-built_in">start</span> &quot;&quot; &quot;C:\\Program Files (x86)\\Os-Easy\\os-easy multicast teaching system\\Student.exe&quot;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>技术/软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>学校</tag>
      
      <tag>脚本</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>你认为认识的</title>
    <link href="/2003007/"/>
    <url>/2003007/</url>
    
    <content type="html"><![CDATA[<p>1，你认为认识是“与生俱来”的，还是“求之而后得”的？<br>求之而后得，当我们了解一个了一个产品的大概后才能认识这个产品。比如一场手机的发布会，只有了解了其功能才能认识这个手机。</p><p>2，你认为认识是不是“照镜子似的原物映现”？<br>不是<br>了解大概，我们认识手机这个实物，并不需要了解其构造，只需知道我们想了解的部分</p>]]></content>
    
    
    <categories>
      
      <category>语录</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>ssh隧道代理</title>
    <link href="/6084.html/"/>
    <url>/6084.html/</url>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>我的Linux临时需要访问墙外的资源，折腾clash，v2rayA，无解，最终尝试用ssh隧道，结果成功</p><p>前提，需要有个vps在国外，且开启了sshd，并能登陆到该vps</p><h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh -N -D 127.0.0.1:7891 root@vps -p 22<br></code></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">-N,只做隧道，不执行命令，可以极大的降低风险<br>-D,隧道<br>127.0.0.1:7891    127，本地地址，7891，本地代理的端口<br>root@vps //root用户名，vps，vps的IP，或者域名<br>-p //默认22，如果是其他的，输入你其他的端口<br></code></pre></td></tr></table></figure><p>我使用的edge，使用插件链接的，并未使用系统代理<br><a href="https://microsoftedge.microsoft.com/addons/detail/proxy-switchyomega/fdbloeknjpnloaggplaobopplkdhnikc">https://microsoftedge.microsoft.com/addons/detail/proxy-switchyomega/fdbloeknjpnloaggplaobopplkdhnikc</a></p><p>ssh隧道采用的是socks5协议</p><hr><p>Options<br><img src="/img/2022/01/1.png" alt="1.png"></p><p>添加节点<br><img src="/img/2022/01/2.png" alt="2.png"></p><p>选择节点，就能通过连接的ssh来访问需要的内容<br><img src="/img/2022/01/3.png" alt="3.png"></p><hr><p>ssh端口转发，参考自SSH <a href="https://www.cnblogs.com/dwtfukgv/articles/12837356.html">远程端口映射</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh -C -f -N -g -R 100:127.0.0.1:200 root@ip<br></code></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text"># 将要登陆的ssh服务器上的100端口转发到本地200端口，直接访问本地200端口相当于访问服务器的100端口<br></code></pre></td></tr></table></figure><hr><h3 id="应用举例"><a href="#应用举例" class="headerlink" title="应用举例"></a>应用举例</h3><p>将发往本机的80端口访问转发到192.168.1.1的8080端口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh -C -f -N -g -L 80:192.168.1.1:8080  user@192.168.1.1<br></code></pre></td></tr></table></figure><p>将发往192.168.1.1的8080访问转发到本机的80端口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh -C -f -N -g -R 80:192.168.1.1:8080 user@192.168.1.1<br></code></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">（user为主机192.168.1.1上的用户）<br>-N – 不使用Shell窗口，纯做转发的时候用，如果你在映射完成后继续在服务器上输入命令，去掉这个参数即可<br></code></pre></td></tr></table></figure><h3 id="例子A-我们想远程管理服务器上的MySQL-那么使用下面命令"><a href="#例子A-我们想远程管理服务器上的MySQL-那么使用下面命令" class="headerlink" title="例子A:我们想远程管理服务器上的MySQL,那么使用下面命令"></a>例子A:我们想远程管理服务器上的MySQL,那么使用下面命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh -L 3306:127.0.0.1:3306   user@emlog-vps    -N  <br></code></pre></td></tr></table></figure><p>运行这个命令之后，ssh将会自动将服务器的3306映射到本机的3306端口，我们就可以使用任意MySQL客户端连接 localhost:3306即可访问到服务器上的MySQL了。</p><h3 id="例子B-一次同时映射多个端口"><a href="#例子B-一次同时映射多个端口" class="headerlink" title="例子B:一次同时映射多个端口"></a>例子B:一次同时映射多个端口</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh -L 8888:www.host.com:80 -L 110:mail.host.com:110 -L    25:mail.host.com:25 user@host -N <br></code></pre></td></tr></table></figure><p>命令将自动把服务器的80，110，25端口分别映射到本机的8888，110和25端口</p><p>注：以上命令在ubuntu 9.10 上测试通过…</p>]]></content>
    
    
    <categories>
      
      <category>技术/软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>服务器</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LG常见刷机技巧</title>
    <link href="/5608.html/"/>
    <url>/5608.html/</url>
    
    <content type="html"><![CDATA[<h2 id="P1—简介"><a href="#P1—简介" class="headerlink" title="P1—简介"></a>P1—简介</h2><p>adb环境可适用这个，解压后运行cmd-here.exe</p><p><a href="https://z.ucu520.top/adb-fastboot/ADB.zip">https://z.ucu520.top/adb-fastboot/ADB.zip</a></p><p>驱动</p><p>64位电脑装</p><p><a href="https://z.ucu520.top/driver/android_11000010001_x64_718.exe">https://z.ucu520.top/driver/android_11000010001_x64_718.exe</a></p><p>32位电脑装</p><p><a href="https://z.ucu520.top/driver/android_11000010001_x86_718.exe">https://z.ucu520.top/driver/android_11000010001_x86_718.exe</a></p><hr><h2 id="P2—进BL模式"><a href="#P2—进BL模式" class="headerlink" title="P2—进BL模式"></a>P2—进BL模式</h2><p>进BL模式</p><p>数据线插上，点击重启，按住音量下不动<br><img src="/img/2021/12/3.png" alt="3.png"></p><hr><h2 id="P3—直接从BL启动到TWRP【不用刷twrp】"><a href="#P3—直接从BL启动到TWRP【不用刷twrp】" class="headerlink" title="P3—直接从BL启动到TWRP【不用刷twrp】"></a>P3—直接从BL启动到TWRP【不用刷twrp】</h2><p>如果手机无法开机，直接按住电源和音量下不动，黑屏瞬间，只松开电源，音量下按住不动</p><p>直接从BL启动到TWRP</p><p>在BL模式下</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">fastboot boot &lt;twrp文件&gt;<br></code></pre></td></tr></table></figure><hr><p>没装驱动<br><img src="/img/2021/12/4.png" alt="4.png"></p><p>64位电脑装</p><p><a href="https://z.ucu520.top/driver/android_11000010001_x64_718.exe">https://z.ucu520.top/driver/android_11000010001_x64_718.exe</a></p><p>32位电脑装</p><p><a href="https://z.ucu520.top/driver/android_11000010001_x86_718.exe">https://z.ucu520.top/driver/android_11000010001_x86_718.exe</a></p><p>未装驱动<br><img src="/img/2021/12/5.png" alt="5.png"></p><p><img src="/img/2021/12/6.png" alt="6.png"></p><p>成功安装驱动后<br><img src="/img/2021/12/7.png" alt="7.png"></p><hr><p>再次执行刚刚的命令<br><img src="/img/2021/12/8.png" alt="8.png"><br>2个OKAY是成功了</p><p>成功进TWRP<br><img src="/img/2021/12/9.png" alt="9.png"></p><hr><h2 id="P4—BL刷入文件"><a href="#P4—BL刷入文件" class="headerlink" title="P4—BL刷入文件"></a>P4—BL刷入文件</h2><p>BL刷入文件</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">fastboot flash &lt;分区名称&gt; &lt;文件&gt;<br><br>Eg.刷入boot.img到boot分区<br>fastboot flash boot boot.img<br></code></pre></td></tr></table></figure><h2 id="P5—TWRP模式下备份-恢复分区"><a href="#P5—TWRP模式下备份-恢复分区" class="headerlink" title="P5—TWRP模式下备份&#x2F;恢复分区"></a>P5—TWRP模式下备份&#x2F;恢复分区</h2><blockquote><p>TWRP模式下备份&#x2F;恢复分区</p><p>备份，选择分区，滑动</p><blockquote></blockquote><p>恢复，选择文件，选择分区，滑动</p></blockquote><p>图片演示恢复<br><img src="/img/2021/12/10.png" alt="10.png"></p><p>选择文件<br><img src="/img/2021/12/11.png" alt="11.png"></p><p>勾选要恢复的文件，滑动<br><img src="/img/2021/12/12.png" alt="12.png"></p><p><img src="/img/2021/12/13.png" alt="13.png"></p><hr><p>Backup，选择分区，滑动</p><p>Restore,恢复，选择文件，选择分区，滑动</p><p>图片演示备份</p><p><img src="/img/2021/12/14.png" alt="14.png"></p><p><img src="/img/2021/12/15.png" alt="15.png"></p><p><img src="/img/2021/12/16.png" alt="16.png"></p><h2 id="P6—TWRP模式下格式化userdata【清空所有数据】"><a href="#P6—TWRP模式下格式化userdata【清空所有数据】" class="headerlink" title="P6—TWRP模式下格式化userdata【清空所有数据】"></a>P6—TWRP模式下格式化userdata【清空所有数据】</h2><p>TWRP模式下格式化userdata【清空所有数据】</p><h3 id="中文"><a href="#中文" class="headerlink" title="中文"></a>中文</h3><p>清除–&gt;格式化data–&gt;yes–&gt;确认<br><img src="/img/2021/12/17.png" alt="17.png"></p><p><img src="/img/2021/12/18.png" alt="18.png"></p><p><img src="/img/2021/12/19.png" alt="19.png"></p><hr><h3 id="英文"><a href="#英文" class="headerlink" title="英文"></a>英文</h3><p>wipe–&gt;format data—&gt;yes—确认</p><p><img src="/img/2021/12/20.png" alt="20.png"></p><p><img src="/img/2021/12/21.png" alt="21.png"></p><p><img src="/img/2021/12/22.png" alt="22.png"></p><hr><h2 id="P7—-TWRP模式下只清部分数据【存手机里面的照片不清，清系统数据和软件等】"><a href="#P7—-TWRP模式下只清部分数据【存手机里面的照片不清，清系统数据和软件等】" class="headerlink" title="P7—-TWRP模式下只清部分数据【存手机里面的照片不清，清系统数据和软件等】"></a>P7—-TWRP模式下只清部分数据【存手机里面的照片不清，清系统数据和软件等】</h2><p>TWRP模式下只清部分数据【存手机里面的照片不清，清系统数据和软件等】</p><blockquote><p>清除，直接滑动</p></blockquote><p><img src="/img/2021/12/23.png" alt="23.png"></p><p><img src="/img/2021/12/24.png" alt="24.png"></p><hr><p>WIPE-直接滑动<br><img src="/img/2021/12/25.png" alt="25.png"></p><p><img src="/img/2021/12/26.png" alt="26.png"></p><hr><h2 id="P8—TWRP模式下切换语言"><a href="#P8—TWRP模式下切换语言" class="headerlink" title="P8—TWRP模式下切换语言"></a>P8—TWRP模式下切换语言</h2><h3 id="英文-1"><a href="#英文-1" class="headerlink" title="英文"></a>英文</h3><p>Settings–&gt;Language—–&gt;Set Language</p><p><img src="/img/2021/12/27.png" alt="27.png"></p><p><img src="/img/2021/12/28.png" alt="28.png"></p><p><img src="/img/2021/12/29.png" alt="29.png"></p><h3 id="中文-1"><a href="#中文-1" class="headerlink" title="中文"></a>中文</h3><p>设置–&gt;语言—–&gt;设置语言</p><p><img src="/img/2021/12/30.png" alt="30.png"></p><p><img src="/img/2021/12/31.png" alt="31.png"></p><p><img src="/img/2021/12/32.png" alt="32.png"></p><hr><h2 id="P9—刷入文件"><a href="#P9—刷入文件" class="headerlink" title="P9—刷入文件"></a>P9—刷入文件</h2><p>刷入文件</p><p>中英对照截图太折腾了，只截一个语言的</p><blockquote><p>安装，选择文件，滑动</p><p>install,选择文件，滑动</p></blockquote><p><img src="/img/2021/12/33.png" alt="33.png"></p><p><img src="/img/2021/12/34.png" alt="34.png"></p><p><img src="/img/2021/12/35.png" alt="35.png"></p><hr><blockquote><p>安装，刷入镜像文件， 选择镜像文件 ，选择分区，滑动</p><p>install,install image,选择镜像文件，选择分区，滑动</p></blockquote><p><img src="/img/2021/12/36.png" alt="36.png"></p><p><img src="/img/2021/12/37.png" alt="37.png"></p><p><img src="/img/2021/12/38.png" alt="38.png"></p><p><img src="/img/2021/12/39.png" alt="39.png"></p><hr><p>The End，目前就这么多吧</p><hr>]]></content>
    
    
    <categories>
      
      <category>技术/软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ADB</tag>
      
      <tag>手机</tag>
      
      <tag>LG</tag>
      
      <tag>V30</tag>
      
      <tag>V30+</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>修改网站鼠标样式，滚动条</title>
    <link href="/5750.html/"/>
    <url>/5750.html/</url>
    
    <content type="html"><![CDATA[<p><code>演示为wordpress</code></p><p>样式参数看这里<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/cursor">https://developer.mozilla.org/zh-CN/docs/Web/CSS/cursor</a></p><p>参数都添加到css中</p><p>外观-自定义<br><img src="/img/2021/12/1.png" alt="1.png"></p><p>额外css<br><img src="/img/2021/12/2.png" alt="2.png"></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/** 鼠标样式 开始**/</span><br><span class="hljs-comment">/** 普通指针样式**/</span><br><span class="hljs-selector-tag">body</span> &#123;<br><span class="hljs-attribute">cursor</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">//www.ucu520.top/shubiao/Office_Flat/Arrow.png</span>), default;<br>&#125;<br><span class="hljs-comment">/** 链接指针样式**/</span><br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span>&#123;<span class="hljs-attribute">cursor</span>:<span class="hljs-built_in">url</span>(<span class="hljs-string">//www.ucu520.top/shubiao/Office_Flat/Hand.png</span>), pointer;&#125;<br><span class="hljs-comment">/** 指示文字可被选中指针样式**/</span><br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span>&#123;<span class="hljs-attribute">cursor</span>:<span class="hljs-built_in">url</span>(<span class="hljs-string">//www.ucu520.top/shubiao/Office_Flat/IBeam.png</span>), text;&#125;<br><span class="hljs-comment">/** 可抓取指针样式**/</span><br><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span>&#123;<span class="hljs-attribute">cursor</span>:<span class="hljs-built_in">url</span>(<span class="hljs-string">//www.ucu520.top/shubiao/grab1.png</span>), grab;&#125;<br><span class="hljs-comment">/* * 放大指针样式*</span><br><span class="hljs-comment">a:hover&#123;cursor:url(//www.ucu520.top/shubiao/zoom-in1.png), zoom-in;&#125; */</span><br><span class="hljs-comment">/* * 缩小指针样式*</span><br><span class="hljs-comment">a:hover&#123;cursor:url(//www.ucu520.top/shubiao/zoom-out1.png), zoom-out;&#125; */</span><br><span class="hljs-comment">/* * 元素可任意方向滚动 （平移）.指针样式*</span><br><span class="hljs-comment">a:hover&#123;cursor:url(//www.ucu520.top/shubiao/all-scroll1.png), all-scroll;&#125; */</span><br><span class="hljs-comment">/** 鼠标样式 结束**/</span><br> <br><span class="hljs-comment">/**自定义侧边滚动条**/</span><br>::-webkit-scrollbar &#123;<br>    -webkit-appearance: none;<br>&#125;<br>::-webkit-scrollbar &#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span>;<br>&#125;<br><span class="hljs-comment">/**背景色**/</span><br>::-webkit-scrollbar-track &#123;<br>    <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">linear-gradient</span>( <span class="hljs-number">135deg</span>, <span class="hljs-number">#3C8CE7</span> <span class="hljs-number">10%</span>, <span class="hljs-number">#00EAFF</span> <span class="hljs-number">100%</span>);<br><span class="hljs-attribute">border</span>:<span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;<br>&#125;<br><span class="hljs-comment">/** 初始色**/</span><br>::-webkit-scrollbar-thumb &#123;<br><span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">316deg</span>, <span class="hljs-number">#e200f5</span>, <span class="hljs-number">#f56ec4</span>, <span class="hljs-number">#fca590</span>, <span class="hljs-number">#fad64e</span>);<br><span class="hljs-attribute">border</span>:<span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>;<br><span class="hljs-attribute">height</span>:<span class="hljs-number">100px</span>;<br><span class="hljs-attribute">border-radius</span>:<span class="hljs-number">5px</span>;<br>&#125;<br><span class="hljs-comment">/** 选中后**/</span><br>::-webkit-scrollbar-thumb:hover &#123;<br>  <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">linear-gradient</span>( <span class="hljs-number">135deg</span>, <span class="hljs-number">#3C8CE7</span> <span class="hljs-number">10%</span>, <span class="hljs-number">#00EAFF</span> <span class="hljs-number">100%</span>);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>技术/软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>网站</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Win修改启动时的引导选择</title>
    <link href="/5459.html/"/>
    <url>/5459.html/</url>
    
    <content type="html"><![CDATA[<p>使用到的命令</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs text">bcdedit /set &#123;default&#125; description &quot;Windows 11&quot;<br>//修改默认启动系统的描述<br><br>bcdedit /set &#123;current&#125; description &quot;QUBER - WIN7&quot;<br>//修改当前启动系统的描述<br><br>bcdedit<br>//查看启动的bcd配置<br><br>msconfig<br>//运行里面输入，系统配置实用程序。可查看启动时候的选项【引导里面】<br><br>bcdedit /?<br>//bcdedit的说明<br><br>bcdedit /? /set<br>//bcdedit 中的set的说明<br><br></code></pre></td></tr></table></figure><p>查看命令<br><code>bcdedit</code><br><img src="/img/2021/10/1.png" alt="1.png"></p><blockquote><p>{current}-当前启动的系统</p><p>{default}-默认启动的</p></blockquote><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">bcdedit /set &#123;default&#125; description &quot;Windows 11&quot;<br>修改默认启动的选项的描述为Windows 11<br></code></pre></td></tr></table></figure><p><img src="/img/2021/10/2.png" alt="2.png"></p>]]></content>
    
    
    <categories>
      
      <category>技术/软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Windows</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>远程桌面连接-要求的函数不受支持</title>
    <link href="/5617.html/"/>
    <url>/5617.html/</url>
    
    <content type="html"><![CDATA[<p>按win+R，输入</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">gpedit.msc<br></code></pre></td></tr></table></figure><p>找到</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs text">计算机配置<br>系统<br>凭据分配<br>第三个【加密数据】英文的好像是o开头<br>顺序第三个<br>如果是英文，介绍里面如果看到desktop类似的应该就是了<br></code></pre></td></tr></table></figure><p>英文是：Encption Orede Rmedotcon</p><p>改了之后，应用并确认</p>]]></content>
    
    
    <categories>
      
      <category>技术/软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Windows</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>有Magisk下恢复出厂后还原Magisk功能</title>
    <link href="/1646.html/"/>
    <url>/1646.html/</url>
    
    <content type="html"><![CDATA[<h2 id="建议"><a href="#建议" class="headerlink" title="建议"></a>建议</h2><p>下载当前版本的apk包，将拓展名<code>.apk</code>改名为<code>.zip</code>使用TWRP等刷入，或者在<code>magisk</code>的安装模块下选择这个包</p><h2 id="18-0及以下（历史方法，不建议）"><a href="#18-0及以下（历史方法，不建议）" class="headerlink" title="18.0及以下（历史方法，不建议）"></a>18.0及以下（历史方法，不建议）</h2><p>链接失效，仅供参考</p><p>恢复出厂&#x2F;清数据后，magisk软件没在，或者有个图标，点击就让下载</p><p>以下演示为，Magisk之前的版本在18.0+以上[18.0以下参考，方法类似]</p><p>先安装Magisk软件</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs text">https://host.mintimate.cn/fileHost/download/MTM1MTcxODA2NDExODQwNzE2OQ==<br> <br>安装软件<br> <br>打开magisk，可能会出现一个弹窗，额外更新，说你的magisk功能不全的提示<br>这里点取消，你的root功能已经恢复，还差magisk功能未恢复&#123;无法安装模块，会报错，部分模块除外&#125;<br> <br> <br>方法1：<br>7.x.x及以下版本的MagiskManager点击左上角菜单<br>8.x.x版本的MagiskManager点击右上角菜单[上面的链接是8.0.7的]<br> <br>7.x.x及以下版本的，点击设置，找到更新通道，自定义通道<br>8.x.x版本的，更新通道自定义<br> <br>7.x.x及以下和8.x.x的，更新通道都输入<br>http://z.ucu520.top/magisk/test.json<br> <br>建议，7.x.x及以下的输入<br>http://z.ucu520.top/magisk/7.5.1/custom.json<br> <br>输入完之后，点击确认保存，退了magisk，然后打开，出现的弹窗，点击确认<br>如果刚开始就一直没弹窗，改了之后也没，那就不用管<br> <br> <br> <br>方法2：<br>下载Magisk的install包<br>下面的链接是21.4的<br></code></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">https://host.mintimate.cn/fileHost/download/MTM1MTcxOTg1MDU0Nzk3ODI0Mg==<br> <br>其他版本的可自行查找<br>安装模块的方法安装以上install包，方法这里不做过多介绍，请参考本站的其他文章<br>https://www.ucu520.top/1607.html（失效）<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>技术/软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>手机</tag>
      
      <tag>Magisk</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
